<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
<!--
Automatically generated, don't change:
$Id: troubleshooting.htm,v 1.6 2007/12/15 10:10:20 fizick Exp $
-->
   <meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
   <title> Trouble shooting </title>
<style type=text/css></style>
   <link rel="stylesheet" type="text/css" href="../avisynth.css">
     <meta http-equiv="Content-Language" content="ru">
</head>
<body>

<h2>Решение проблем</h2>

<h3>Содержание</h3>
<a href="#Installation_problems">1 Проблемы установки</span></a><br>
<a href="#Other_problems">2 Другие проблемы</a><br>
<a href="#Simple">2.1 Пишите просто</a><br>
<a href="#check_parameters">2.2 Всегда проверяйте параметры</a><br>
<a href="#Test_Virtualdub">2.3 Тестируйте скрипты используя Virtualdub</a><br>
<a href="#step">2.4 Двигайтесь по скрипту шаг за шагом</a><br>
<a href="#plugin_directory">2.5 Проверьте файлы Вашей папки автозагрузки плагинов</a><br>
<a href="#image_sizes">2.6 Используйте консервативные размеры кадра</a><br>
<a href="#FAQ">2.7 Наконец прочтите AviSynth FAQ</a><br>
<a href="#bugs">2.8 Доклад об ошибках / Запрашивание помощи</a>

<h4><a name="Installation_problems"></a>Проблемы установки</h4>

<p>
Если Вам проблематично заставить AviSynth работать вообще, попробуйте создать файл Version.avs со следующим
текстом внутри:

<pre><a href="corefilters/version.htm">Version</a>()</pre>

<p> и открыть его в Windows Media Player 6.4 (это файл "mplayer2.exe" расположенный обычно в "C:\Program Files\Windows Media Player", другие версии WMP могут не работать).
Если вы увидите сообщение о версии AviSynth и Copyright, то он установлен правильно.

<p> Если это не работает, Вы можете попробовать следующее:
<ul>
  <li>Очистите подкаталог плагинов AviSynth: автозагружаемые скрипты avsi
   или некоторые фильтры могут это вызвать (<a href="#plugin_directory">см. ниже</a>).</li>
  <li>Установите кодеки, в частности  <a href="http://www.avisynth.org/mediawiki/wiki/huffyuv.htm">Huffyuv</a>:
   возможно у Вас отсутствует декодер, который нужен для вашего видео.</li>
  <li>Если Вы используете некоторый пакет кодирования (типа DVD2SVCD, GKnot, DVX, ...)
   удостоверьтесь, что Вы используете ту версию AviSynth, которая поставлялась с этим пакетом:
   возможно, что более новые версии AviSynth несовместимы с данным пакетом.
    Обратитесь за поддержкой к разработчикам этих пакетов.</li>
  <li>Переустановите AviSynth: возможно, что-то не в порядке с установкой.
   Если Вы пробовали бета версию, переустановите стабильный выпуск.</li>
  <li>Если все вышеизложенное не помогает, ищите помощи на
  <a href="http://forum.doom9.org/forumdisplay.php@s=&amp;forumid=33"> форуме Doom9</a>.&nbsp;</li>
</ul>

<h4><a name="Other_problems"></a>Другие проблемы</h4>

<p> Создание скриптов с AviSynth не всегда легкое занятие, и иногда AviSynth дает очень странные результаты.
Вот небольшое руководство, которое может помочь Вам выявить наиболее типичные ошибки.

<h4><a name="Simple"></a>Пишите просто</h4>

<p> Если AviSynth производит странные результаты, попытайтесь упростить Ваш скрипт.
Попытайтесь расщепить скрипт на возможно большее число строк текста.
Это поможет Вам идентифицировать проблему. Например:

<pre>video = AviSource(&quot;file23.avi&quot;).ConvertToYUY2().Trim(539,8534)
return AudioDub(Blur(video,1.5).Reduceby2().Bilinearrresize(512,384),Wavsource(&quot;file23.wav&quot;).AmplifyDB(4.5)</pre>

<p> не так читабельно в отличие от

<pre>AviSource(&quot;file23.avi&quot;)
ConvertToYUY2()
Trim(539, 8534)
Blur(video, 1.5)
Reduceby2()
Bilinearrresize(512, 384)
AudioDub(Wavsource(&quot;file23.wav&quot;))
AmplifyDB(4.5)</pre>
<p>Кроме того, преимуществом такой записи является возможность:</p>
<ul>
  <li>Закомментировать отдельную команду (строку). Это удобно для тестирования эффекта отдельного фильтра.</li>
  <li>Получить сообщение о точном положении (строке) проблемной команды, если есть синтаксическая ошибка.</li>
  <li>Поместить "return last" в любом месте скрипта. Это выведет видео в текущем месте цепочки фильтров.
  Меняя положение "return last", Вы можете установить, до какой строки обработка идет нормально.</li>
  <li>Получить обзор "течения" скрипка. (Хорошо ли, что только команда <a href="corefilters/trim.htm"> Trim</a>
  влияет на видео в клипе выше?)</li>
</ul>

<h4><a name="check_parameters"></a>Всегда проверяйте параметры</h4>

<p> Если некий фильтр дает Вам неожиданный результат, попробуйте использовать его с простейшими параметрами.
Всегда сверьтесь с описанием встроенных фильтров либо на домашней странице AviSynth, или в документации,
которая пришла вместе с Вашей копией AviSynth.

<p> Удостоверьтесь, что Вы используете тот же тип параметров, как описанный в документации.
Наиболее общая ошибка в этом случае относится к первому параметру всех (почти) фильтов, типа "clip".
Удостоверьтесь, что Вы понимаете, как работает "неявный последний" ("implicit last").
Если вдруг не окажется "последнего клипа" ("last clip"), то большинство фильтров аварийно завершат работу
с сообщением об ошибке "Invalid parameter" ("неподходящий параметр").

<p> "Filter does not return a clip" ("Фильтр не возвращает клип") сообщается,
если выход Вашего последнего фильтра присваивается некоторой переменной,
и не существует никакого "последнего клипа" ("last clip"). Например:

<pre>video = AviSource(&quot;file.avi&quot;)
audio = WavSource(&quot;file.wav&quot;)
combined = AudioDub(video, audio)</pre>

<p> завершится аварийно. Это можно исправить следующим образом:

<pre>video = AviSource(&quot;file.avi&quot;)
audio = WavSource(&quot;file.wav&quot;)
AudioDub(video, audio)</pre>

<p> где 'last' теперь содержит клип, или:

<pre>video = AviSource(&quot;file.avi&quot;)
audio = WavSource(&quot;file.wav&quot;)
combined = AudioDub(video, audio)
return combined</pre>

<p> где возвращается переменная, или даже:

<pre>video = AviSource(&quot;file.avi&quot;)
audio = WavSource(&quot;file.wav&quot;)
return AudioDub(video, audio)</pre>

<h4><a name="Test_Virtualdub"></a>Тестируйте скрипты используя Virtualdub</h4>

<p> Всегда используйте <a href="http://www.avisynth.org/mediawiki/wiki/virtualdub.htm"> Virtualdub</a> или даже лучше
<a href="http://www.avisynth.org/mediawiki/wiki/virtualdubmod.htm"> VirtualDubMod</a> для тестирования Ваших скриптов.
Это то, на чем тестируется вся функциональность AviSynth (его разработчиками).
AviSynth конечно работает с другими программами, но если Вы получаете ошибки в других приложениях,
то это наиболее вероятно проблема не AviSynth, а некоторое ограничение используемой программы.

<p> Эти ограничения главным образом связаны с:
<ul>
  <li>Проблемы цветовых форматов. Приложение, которое Вы используете,
  не поддерживает цветовой формат, используемый Вами на выходе скрипта.</li>
  <li>Проблемы размеров. Некоторые программы принимают не все размеры изображений.</li>
</ul>

<h4><a name="step"></a>Двигайтесь по скрипту шаг за шагом</h4>
<p>Как упоминалось в "Пишите просто", всегда хорошо проверить каждый шаг вашего скрипта, если есть проблемы.</p>
<p>Вы может закомментировать (деактивировать) любой фильтр (фильтры), поместив символ '#' в начале строки (или перед фильтром).
Таким образом он (и весь остаток строки) будет игнорироваться AviSynth.</p>
<p>Вы можете поместить "return last" или "return НекотораяПеременная" в любом месте скрипта для контроля.</p>
<p>В любом месте скрипта Вы можете добавить фильтр <a href="corefilters/info.htm">Info</a>(),
чтобы получить информацию об изображении и звуке на данной стадии фильтрации.</p>

<h4><a name="plugin_directory"></a>Проверьте содержимое Вашей папки автозагрузки плагинов</h4>
<p>Автозагрузка плагинов обычно работает нормально. Но Вы НЕ должны помещать туда:
<ul>
<li> никакие плагины от несовместимых версий AviSynth (например старых 2.0.x).</li>
<li> специальный плагин LoadPluginEx.DLL (из пакета WarpSharp) используемый для загрузки старых 2.0 плагинов в 2.5.х.</li>
<li> AviSynth C-плагины (которые используют AviSynth C API вместо регулярного интерфейса).</li>
<li> слишком много плагинов AviSynth (хотя этот предел автозагрузки 50 плагинов удален в версии 2.5.7)</li>
<li> любые DLL файлы (иногда это безопасно, но не рекомендуется.)</li>
</ul>
</p>
<p>Вы также должны помнить, что все файлы AVSI в Вашем каталоге автозагрузки плагинов автоматически включаются в Ваш скрипт.
Это есть особенность, чтобы позволить Вам включать собственные (или заимствованные) функции,
без необходимости копировать/вставлять их в каждый скрипт.</p>
<i><p>Примечание. В старых версиях AviSynth (вплоть до 2.0.7) все AVS файлы
в Вашем каталоге автозагрузки плагинов автоматически включались в Ваш скрипт.
Это также означает, что если Вы копируете примеры скриптов в данный каталог, то они будут всегда включаться,
и могут генерировать ошибки (в старых версиях!).</p></i>
Вообще, любой AVSI (ранее AVS) файл, команды которого не приводятся к функциям, будут проблемными.</p>
<p>Все другие форматы файлов кроме AVSI и DLL игнорируются, так что Вы можете безопасно оставлять Вашу документацию
<span lang="en-us">(TXT, HTM) </span>здесь.</p>
<p>Как очистить каталог плагинов? Просто создайте некоторый подкаталог (например "hide") и переместите туда все (или некоторые) файлы.
Помните, что некоторые файлы (плагины DirectShowSource.dll, TCPDeliver.dll и Color<span lang="en-us">s_</span>RGB.avsi) являются частью AviSynth (с версии 2.5.6).</p>

<h4><a name="image_sizes"></a>Используйте консервативные размеры изображения</h4>
<p>Если Вы имеете проблемы с искаженными изображениями, попытайтесь использовать консервативные размеры кадров.
Это означает, лучше используйте размеры, где высота и ширина кратны 16.
 Использование размеров изображений не кратных 2 во многих случаях проблематично, и это надо избегать.</p>
<p>Если однако Вы обнаружите некоторую проблему с определенным размером изображения, пожалуйста сделайте доклад об ошибке (bug-report).
Смотрите ниже как сделать это.</p>

<h4><a name="FAQ"></a>Наконец посмотрите AviSynth FAQ</h4>
<p>Если Вы еще имеете проблемы (загрузка скриптов в определенные кодировщики, или ошибки цветовых пространств),
загляните в вопросы и ответы по AviSynth (Q&amp;A), особенно
<a href="faq.htm#q2.4">Q2.4: Problems when Encoder X reads AVS-files ?</a>
Также просмотрите раздел <a href="faq.htm#q1.4">Q1.4: What are the main bugs in these versions ?</a> FAQ.</p>

<h4><a name="bugs"></a>Доклад об ошибках / Запрашивание помощи</h4>
<p>Чтобы помочь Вам, нам необходимо много информации. Если Вы не снабдите нас этим,
есть большая вероятность, что мы не сможем помочь Вам или исправить ошибку.</p>
<p>Непременно <b>всегда</b> укажите:</p>
<ul>
  <li>Версию AviSynth (и дата беты, если не финальный релиз с SourceForge)</li>
  <li>Наипростейший возможный скрипт для воспроизведения данной ошибки.</li>
  <li>ТОЧНОЕ (английское) сообщение об ошибке, которое Вы получили.
  Вы можете скопировать текст из окошка сообщения об ошибке VirtualDub
  в буфер Windows клавишами Ctrl-C и вставить его в текст на форуме
  клавишами Ctrl-V (или правой кнопкой мыши и т.п.).
  Или используйте клавиши Alt-PrintSreen, чтобы скопировать окно сообщения как изображение,
  сохраните в файл в редакторе рисунков и выложите его в интернет.</li>
</li>
  <li>Версию VirtualDub (Mod).</li>
  <li>Всю информация о файле: Virtual Dub / File / File Information.</li>
  <li>Версии использованных плагинов.</li>
  <li>Кодеки и размеры изображений входного материала.</li>
</ul>
<p>Сообщения об ошибках могут быть доложены на <a href="http://sourceforge.net/projects/avisynth2"> SourceForge Project
page</a>. Проверьте, не было ли уже сообщено об ошибке подобной  Вашей - это уже могло быть.
Об ошибках во внешних плагинах надо сообщать не там, а автору данного фильтра.</p>
<p>Очень хорошим местом для получения помощи являются
<a href="http://forum.doom9.org/forumdisplay.php@s=&amp;forumid=33"> форумы Doom9</a>.
Сначала просмотрите форум (используя поиск), прежде чем задать вопрос. Многие темы уже затрагивались там! - Затем вступайте в обсуждение.</p>
<p><kbd>$English Date: 2007/12/15 09:52:51 $<br>
Русский перевод 15.12.2007 Fizick http://avisynth.org.ru</kbd>
</body>
</html>