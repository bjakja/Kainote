<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html lang="ru"><head><!--
Automatically generated, don't change:
$Id: faq_using_virtualdub_plugins.htm,v 1.1 2008/07/04 17:13:36 fizick Exp $
-->

    <meta http-equiv="Content-Language" content="ru">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">


  <title>Часто задаваемые вопросы - обрабртка с плагинами от VirtualDub</title>
  <style type="text/css"></style>
  <link rel="stylesheet" type="text/css" href="../avisynth.css"></head>
<body>
<h1>Часто задаваемые вопросы по AviSynth - обработка с плагинами от VirtualDub</h1>

<h2>Содержание</h2>
<ol>
  <li>
<a href="#Where_can_I_download_the_latest_version_of_scripts_which_import_filters_from_VirtualDub.3F">
            Где я могу загрузить последние версии скриптов, которые импортируют фильтры от VirtualDub ?</a></li>
  <li><a href="#Which_filters_can_be_imported.3F">Какие фильтры могут быть импортированы ?</a></li>
  <li><a href="#Do_these_scripts_work_in_RGB-space_or_in_YUV-space.3F">
  Работают ли эти скрипты в цветовом пространстве RGB или YUV ?</a></li>
  <li><a href="#How_do_I_make_such_a_script.3F">Как мне самому создать такой скрипт ?</a>
  </li>
</ol>

<a name="Where_can_I_download_the_latest_version_of_scripts_which_import_filters_from_VirtualDub.3F"></a>
<h3>Где я могу скачать последние версии скриптов, которые импортируют фильтры от VirtualDub ?</h3>

<p>Эти AviSynth скрипты находятся на странице
<a href="http://avisynth.org/mediawiki/Shared_functions">ShareFunctions</a>,
 или Вы можете скачать пакет, называемый vdub_filtersv15.zip, со ссылок <a href="http://forum.doom9.org/showthread.php?s=&amp;threadid=23804">на форуме</a>
или <a href="http://neuron2.net/hosted.html">http://neuron2.net/hosted.html</a>
<br>
&nbsp;
</p>

<a name="Which_filters_can_be_imported.3F"></a>
<h3>Какие фильтры могут быть импортированы ?</h3>

<p>Большинство фильтров. Прочитайте соответствующую документацию, имеющуюся в том же zip файле.
</p>

<a name="Do_these_scripts_work_in_RGB-space_or_in_YUV-space.3F"></a>
<h3>Работают ли эти скрипты в цветовом пространстве RGB или YUV ?</h3>

<p>Только в RGB (RGB32). Вам необходимо преобразовать формат в RGB32 перед их применением
</p>

<a name="How_do_I_make_such_a_script.3F"></a>
<h3>Как мне самому создать такой скрипт ?</h3>

<p>Пример скрипта (рассматриваемый VirtualDub фильтр может быть скачан с
<a href="http://neuron2.net/">домашней страницы Donald Graft</a>):
</p>

<p>Фильтр Smart Bob от Donald Graft:
</p>

<pre>function VD_SmartBob(clip clip, bool show_motion, int threshold, bool motion_map_denoising)
{
  LoadVirtualdubPlugin(&quot;d:\bob.vdf&quot;, &quot;_VD_SmartBob&quot;, 1)
  return clip.SeparateFields._VD_SmartBob(clip.GetParity?1:0,
    \  default(show_motion,false)?1:0, default(threshold,10),
    \  default(motion_map_denoising,true)?1:0)
}</pre>

<p>VirtualDub плагин SmartBob
импортируется командой "LoadVirtualdubPlugin".
Первый ее аргумент дает путь к плагину, второй аргумент это имя
плагина, которое будет использовано в скрипте, и третий аргумент
называется подмотка (preroll).
</p>

<p>Подмотка должна быть
установлена равной по крайней мере числу кадров, которые
необходимо&nbsp; предварительной обработать фильтру, чтобы
заполнить буферы и/или обновить его внутренние переменные. Этот
последний аргумент используется с некоторыми фильтрами, такими как:
SmartBob,
SmartDeinterlace,
TemporalCleaner и другими. Причина связана с архитектурой
фильтрации в Virtual Dub, где будущие кадры недоступны
фильтру.
Dividee сообщает: "В диалоге "Add filter"&nbsp; VirtualDub,
некоторые фильтры имеют параметр
"Lag:" (задержка) в их описании. Я думаю это есть величина, которая
должна быть использована как подмотка. К несчастью, это
указание не всегда присутствует. В этих случаях вы должны
использовать предполагаемое значение." Конечно, Вы всегда
можете спросить у автора фильтра.
</p>

<p>На первом шаге надо найти
последовательность аргументов в последней строке, где клип
выводится.&nbsp; Сконфигурируйте фильтр в VirtualDub
и выберите "Save processing Settings" (сохранить настройки обработки) в
меню "File", или нажмите Ctrl+S.
Откройте созданный .vcf файл в текстовом редакторе, и вы увидите строки
подобно следующим:
</p>

<pre>VirtualDub.video.filters.Add(&quot;smart bob (1.1 beta 2)&quot;);
VirtualDub.video.filters.instance[0].Config(1, 0, 10, 1);</pre>

<p>Порядок аргументов тот же, который должен быть использован в
AviSynth.
Чтобы выяснить роль аргументов, поиграйте с ними в VirtualDub и контролируйте получаемые строки.
</p>

<p>Второй шаг заключается в
тестировании фильтра и сравнении его с фильтром в самом
VirtualDub. Что касается собственно
программирования скриптов, то Вы можете многому научиться, глядя на
скрипты, уже содержащиеся в vdub_filters.avs.
</p>

<p>Пример скрипта, который использует функцию VD_SmartBob:
</p>

<pre>Import("d:\vdub_filters.avs")
AviSource("d:\filename.avi")
ConvertToRGB32 # только если необходимо (но не повредит)
VD_SmartBob(1, 0, 10, 1)
ConvertBackToYUY2 # только если необходимо </pre>

<p>Пакет vdub_filtersv15.zip является немного устаревшим, так как много новых VirtualDub
фильтров в нем нет. Если это как раз случай с нужным Вам фильтром VirtualDub, и вы
не хотите создать функцию сами (такую как VD_SmartBob), можно также
использовать следующий скрипт:</p>
<pre>LoadVirtualdubplugin("d:\bob.vdf", "VD_SmartBob", 1)
VD_SmartBob(1, 0, 10, 1) # параметры взяты из файла .vcf</pre>

<p>|<a href="faq_sections.htm" title="AviSynth FAQ">
Содержание FAQ</a> | <a href="faq_general_info.htm">Общая информация</a> |
 <a href="faq_loading_clips.htm">Загрузка клипов</a> |
 <a href="faq_frameserving.htm">Открытие скриптов</a> |
 <a href="faq_common_errors.htm">Общие сообщения об ошибках</a> |
 <a href="faq_different_types_content.htm">Обработка различного контента</a> |
 <a href="faq_yv12.htm">Работа с YV12</a> |
 <a href="faq_using_virtualdub_plugins.htm">Обработка с плагинами от Virtualdub</a> |</p>

<kbd>$English Date: 2008/07/04 17:07:28 $<br>
Русский перевод 19.05.2005-04.07.2008 Fizick http://bag.hotmail.ru</kbd>

</body></html>