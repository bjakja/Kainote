<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html lang="ru">
<head>
<meta http-equiv="Content-Language" content="ru">
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=windows-1251">
   <TITLE>Histogram Avisynth Filter</TITLE>
   <link rel="stylesheet" type="text/css" href="../../avisynth.css">
<!--
Automatically generated, don't change:
$Id: histogram.htm,v 1.6 2007/12/20 22:15:37 fizick Exp $
-->
</head>
<BODY>
<h2>
<A NAME="Greyscale"></A>Histogram
</h2>
<P><code>Histogram </code>(<var>clip, string "mode"</var>)</p>
<P>Добавляет гистограмму сигнала яркости на правую сторону клипа.</p>
<p> Начиная с AviSynth <em>v2.50</em>, этот фильтр также показывает корректные и не корректные
  цвета в режимах YV12/YUY2. Некорректные значения (ниже 16 и выше 235) будут окрашены
  коричневым/желтоватым.</p>
  <p>Начиная с <em>v2.53</em> был добавлен дополнительный параметр <var>mode</var>, чтобы показать дополнительную
  информацию о клипе. <var>Mode</var> может быть "Сlassic" (классический старый
  режим, по умолчанию), "Levels" (уровни), "Color" (цвет),
  и начиная с <em>v2.54</em> "Luma" (яркость), "Stereo" (стерео), "StereoOverlay" (стереоналожение),
&quot;Color2&quot; (<em>v2.58</em>) и &quot;AudioLevels&quot; (<em>v2.58</em>).</p>

<h3>Режим Classic (классический)</h3>
<P><img border="0" src="../pictures/corefilters/histogram_classic.jpg" width="608" height="288">
<P>Это добавит построчный график сигнала яркости
(называемый монитором формы сигнала) на правой стороне
  видео. Левая сторона графика обозначает яркость - luma = 0 и правая сторона
  обозначает яркость - luma = 255. Некорректные по нормам CCIR601 диапазоны показаны в
  коричнево-желтоватом цветах, и зеленоватая линия обозначает Y = 128.<br>
  <br>
  Доступно в режимах YUY2 и YV12.
<h3>Режим Levels (уровней)</h3>
<P><img border="0" src="../pictures/corefilters/histogram_modelevels.jpg" width="256" height="256">
<P>Этот режим показывает три графика уровней на левой стороне видео кадра (что называется гистограмма). Это
  покажет распределение Y, U и V компонентов в текущем кадре.</p>
  <p>
  Самый верхний график показывает распределение в кадре яркости (luma Y) , где левая сторона
  обозначает Y = 0 , и правая сторона обозначает Y = 255. Допустимый CCIR601 диапазон
  показан в немного отличающемся цвете и Y = 128 промаркировано пунктирной линией.
  Вертикальная ось показывает число пикселов с данной величиной яркости (Y).
  Средний график показывает компоненту цветности (chroma) U, и нижний график показывает компоненту V.</p>
  <p> Доступно только в режиме YV12.
<h3>Режим Color (цвета)</h3>
<P><img border="0" src="../pictures/corefilters/histogram_modecolor.jpg" width="256" height="256">
<P>Этот режим показывает распределение U/V цвета в двумерном графике (называемом вектороскоп) на левой
  стороне видео кадра. Это может быть использовано для чтения тона и насыщенности клипа.
  В то же время это является гистограммой. Чем светлее пиксел на вектороскопе,
  тем больше пикселов входного клипа соответствует этому пикселу (то есть больше пикселов
  имеют это значение цветности).</p>
  <p>U компонент показан на горизонтальной (X) оси, с крайне левой стороны являющейся
  U = 0 и с крайне правой стороны являющейся U = 255.
  V компонент показан на вертикальной (Y) оси, с вершиной обозначающей V = 0 и
  основой (внизу) обозначающей V = 255.</p>
  <p>Положение белого пиксела на графике соответствует величине цвета пиксела входного клипа.
  Так что этот график может быть использован, чтобы прочитать тон (hue, цветовой оттенок)
  и насыщенность (степень цветового оттенка). Что касается изменений цветового тона ,
  он движется вокруг квадрата. В центре квадрата, насыщенность равна нулю,
  что означает, что соответствующий пиксел не окрашен.
  Если вы увеличиваете количество указанного цвета, оставляя другие цвета неизменными,
  насыщенность будет увеличиваться, и вы двигаетесь к краю квадрата.
  </p>
  <p>Доступно только в режиме YV12.</p>
<h3>Режим Color2 (цвет 2)</h3>
<p><img border="0" src="../pictures/corefilters/histogram_modecolor2.jpg" width="616" height="288"></p>
<p>Этот режим будет отображать пикселы на двумерном графике (называемом вектороскоп)
 с правой стороны видеокадра.  Это может быть использовано
 для чтения цветового тона (hue) и насыщенности клипа.</p>
  <p>U компонент показан на горизонтальной (X) оси, с крайне левой стороны являющейся
  U = 0 и с крайне правой стороны являющейся U = 255.
  V компонент показан на вертикальной (Y) оси, с вершиной обозначающей V = 0 и
  основой (внизу) обозначающей V = 255.
  Серый квадрат обозначает допустимый диапазон по CCIR601.</p>
  <p>Положение пиксела на графике соответствует величине цветности пиксела входного клипа.
  Так что этот график может быть использован, чтобы прочитать тон (hue, цветовой оттенок)
  и насыщенность (степень цветового оттенка). Что касается изменений цветового тона ,
  он движется вокруг круга. В центре круга насыщенность равна нулю,
  что означает, что соответствующий пиксел не окрашен.
  Если вы увеличиваете количество указанного цвета, оставляя другие цвета неизменными,
  насыщенность будет увеличиваться, и вы двигаетесь к краю круга.
 Цветное колесо нарисовано и разделено на шесть оттенков (красный, желтый, зеленый,
 голубой, синий и пурпуровый) чтобы помочь вам прочитать значения тона (hue). Также каждые 15
 градусов рисуется белая точка.</p>
<p>При U=255, V=128 тон является нулевым (что отвечает синему) и насыщение
 максимально, то есть, sqrt( (U-128)^2 + (V-128)^2 ) = 127. При повороте
 по часовой стрелке, скажем на 90 градусов, цветность дается U=128, V=255 (что
 соответствует красному).  Удержание тона постоянным и уменьшение насыщения
 означает, что мы движемся от окружности к центру вектороскопа. Таким образом
 цветовой оттенок остается тем же (а именно красным), только меняясь медленно к серому.
 И т.п. ...</p>
<p>Доступен для YV12.</p>
<h3>Режим Luma (яркости)</h3>
<P><img border="0" src="../pictures/corefilters/histogram_modeluma.jpg" width="416" height="256">
<P>Этот режим усилит сигнал яркости, и отобразит очень малые вариации сигнала
  яркости. Это хорошо подходит для того, чтобы обнаружить блочность и шум, и может
  быть полезно при корректировке параметров фильтра. В этом режиме разница 1 отсчет
  сигнала яркости пиксела будет показана, как 16 отсчетов сигнал яркости пиксела, таким
  образом серьезно увеличивая малые дефекты.</p>
  <p>Доступно в режимах YUY2 и YV12.</p>
<h3>Режимы Stereo и StereoOverlay</h3>
<P><img border="0" src="../pictures/corefilters/histogram_modestereo.gif" width="512" height="512">
<P>Этот режим показывает классический стерео график, аудио дорожки из клипа. Некоторым
  он может быть известен из звукозаписи. Он может использоваться, чтобы увидеть
  распределение направления слева-справа и распределение фазы входного сигнала.
  StereoOverlay будет накладывать график поверх оригинала. Каждый кадр будет
  содержать информацию только из текущего кадра до начала следующего кадра. Сигнал
  линейно восьмикратно увеличен, чтобы улучшить визуальное восприятие.</p>
  <p>
  Этому режиму необходим входной стерео сигнал, и StereoOverlay принимает только
  YV12.</p>
<h3>Режим AudioLevels (аудио уровни)</h3>
<p><img border="0" src="../pictures/corefilters/histogram_audiolevels.jpg" width="352" height="288"></p>
<p>Этот режим показывает уровни аудио для каждого канала в децибелах (многоканальность поддерживается).
Более точно он определяется так:
 </p>
<ul>
  <li>извлекаем корень из средне-квадратичной величины отсчетов, относящихся к каждому кадру,
  и преобразуем эту величину в децибелы по следующей формуле:<br>
    <br>
    RMS = 20 * log_10( sqrt( sum_j( sample(j)^2 ) / j ) / 32768 ) # для каждого канала<br>
  </li>
  <li>берем максимум громкости отсчетов, относящихся к каждому кадру,
  и преобразуем эту величину в децибелы, используя следующую формулу:<br>
    <br>
    max = 20 * log_10( max_j( sample(j) ) / 32768 ) # для каждого канала<br>
    <br>
    Полосы, соответствующие корню среднеквадратичной величины - зеленые, а максимуму - синие.
    Данный фильтр доступен для планарных форматов (YV12) и аудио преобразуется в 16 бит.
    Заметьте, что для 16 битного аудио, максимальная громкость могла бы быть<br>
    <br>
    20 * log_10(32768/32768) = 0 dB (так как 2^16/2 = 32768)<br>
    <br>
    и минимальная громкость<br>
    <br>
    20 * log_10(1/32768) = - 90.31 dB</li>
</ul>
<p><b>Изменения:</b></p>
<table border="1">
  <tbody>
    <tr>
      <td>v2.53</td>
      <td>Добавлены различные режимы.</td>
    </tr>
    <tr>
      <td>v2.55</td>
      <td>Добавлены точки к режиму = &quot;stereo&quot; чтобы показать отклонение/смещение.</td>
    </tr>
    <tr>
      <td>v2.56</td>
      <td>Добавлены некорректные цвета в режиме YUY2.</td>
    </tr>
    <tr>
      <td>v2.58</td>
      <td>Добавлены Color2 и AudioLevels.</td>
    </tr>
  </tbody>
</table>
<p><kbd>$English Date: 2007/05/17 23:45:54 $<br>
Русский перевод 17.05.2005 RBF<br>
Редакция и обновления 17.12.2005-11.06.2007 Fizick
</kbd></p>
<FORM><INPUT TYPE="Button" VALUE="Back"
onClick="history.go(-1)"></FORM>
</BODY>
</HTML>