<html>
<head>
<title>Decomb Plugin for Avisynth</title>
<link rel="stylesheet" type="text/css" href="../../avisynth.css">
<!--
Automatically generated, don't change:
$Id: decombreferencemanual.htm,v 1.1 2010/02/27 14:50:14 wilbertd Exp $
-->
</head>

<body>
<h1 align=center>Decomb Plugin pro Avisynth 2.5<br>
(Verze 5.2.3)<br>
Pøíruèka</h1>

<h2 align=center>od Donald A. Graft</h2>
<p><hr><p>
<h2>Obsah</h2>

<ul>
 <li><a href="#introduction">Úvod</a></li>
 <li><a href="#decombfunc">Pøehled funkcí</a></li>
 <li><a href="#requirements">Vstupní požadavky</a></li>
 <li><a href="#speed">Dùležité tipy pro rychlost</a></li>
 <li><a href="#typical">Typické scénáøe</a></li>
 <li><a href="#fieldmatch">Poznámky k uspoøádávání polí (Field Matching)</a></li>
 <li><a href="#generalsyntax">Obecná syntaxe funkcí</a></li>
 <li><a href="#defaultparam">Uživatelské výchozí hodnoty parametrù</a></li>
 <li><a href="#override">Nadøazená rozhodnutí Decomb</a></li>
 <li><a href="#detailsyntax">Podrobná syntaxe funkcí</a></li>
 <ul>
  <li><a href="#telecide">Telecide()</a></li>
  <ul>
   <li><a href="#common">Bìžnì užívané parametry</a></li>
   <li><a href="#advanced">Pokroèilé parametry</a></li>
  </ul>
  <li><a href="#fielddeinterlace">FieldDeinterlace()</a></li>
  <li><a href="#decimate">Decimate()</a></li>
  <li><a href="#iscombed">IsCombed()</a></li>
 </ul>
 <li><a href="#theory">PØÍLOHA A. Telecide() teorie operace</a></li>
 <li><a href="#hybrid">PØÍLOHA B. Zacházení s hybridními klipy</a></li>
 <li><a href="#acknowledge">Podìkování</a></li>
</ul>

<p><hr size=2 width="100%" align=center>
<h2><a name=introduction>Úvod</a></h2>

<p>Tento balík plugin funkcí pro Avisynth poskytuje
prostøedky pro odstranìní  artefaktù roztøepení (combing) z pùvodnì progresivních
streamù podrobených procesu telecine, prokládaných (interlaced)
streamù, a jejich mixù. Funkce mohou být kombinovány pro implementování inverze
telecine (IVTC) jak pro NTSC tak i PAL streamy. </p>

<p>Termín &quot;combing&quot; se používá jako obecnìjší termín proti
&quot;interlacing&quot; (prokládání), protože prokládání je obvykle spojováno s
neprogresivními streamy. To co vypadá jako artefakty prokládání lze vidìt i v
progresivních streamech zpracovaných pomocí telecine, takže používám termín roztøepení
(combing) pro popis všech takových artefaktù, bez ohledu na typ streamu. </p>

<p>Balík se automaticky pøizpùsobuje jakýmkoliv telecine/zachytávacím šablonám, a
jejich mixùm, aèkoliv pokud chcete decimovat obnovený progresivní
stream, musíte zadat žádaný decimaèní pomìr pokud se liší od výchozího
1-z-5 použitého pro NTSC 3:2 telecining. Žádná z funkcí neuvádí
zpoždìní v audio nebo video streamech. </p>

<p>Pro mnohé aplikace existuje nìkolik nastavitelných parametrù, ale nejlepší výsledky
jsou dosaženy s opatrným nastavením parametrù. Decomb umožòuje uživateli definovat
jeho vlastní výchozí hodnoty parametrù, pokud si to pøeje (Výchozí hodnoty jsou pøedpokládané
pokud parametr není zadán explicitnì (konkrétnì). </p>

<p>Mnohá rozhodnutí Decomb lze ruènì pøepsat podle pøání použitím textových
nadøazovacích souborù. To umožní puntièkáøským uživatelùm dosáhnout nejlepší možné
kvality pro jejich enkódování. </p>

<p>Toto je pøíruèka pro Decomb. Podívejte se do Decomb Tutorialu na uživatelsky pøíjemné
procedury k použití Decomb, a do Decomb FAQ na odpovìdi na èasto kladené otázky.</p>
<p>
<hr size=2 width="100%" align=center>

<h2><a name=decombfunc>Pøehled funkcí</a></h2>

<p>Balík se skládá z následujících funkcí: </p>
<ul>
<li><p><b>Telecide()</b>: Obnovuje
progresivní snímky (nalezením a srovnáním uspoøádávaných polí) ale neodstraòuje
výsledné duplikáty a nemìní frekvenci snímkù nebo poèet snímkù.
Nepoužívejte Telecide na streamy, které neobsahují pùvodnì progresivní snímky
podrobené telecine, takové jako prokládané video. Všimnìte si, že stream
PAL progresivních snímkù, které jsou posunuty o jedno pole je vzorovou ukázkou roztøepení
(combing) a pro úèel obnovení ho lze považovat za stream podrobený telecine;
Telecide tuto situaci snadnou vyøeší.</p>

<p>Ve výchozím stavu Telecide provádí na obnovovaných snímcích <i>postprocessing</i>
- doplòkové zpracování. Tento postprocessing kontroluje každý snímek aby vidìl jestli je roztøepený
(nìkteré roztøepené snímky se mohou objevit pøi procesu porovnávání polí [viz níže]), a
pokud je snímek roztøepený, je v nìm provedeno odstranìní prokládání, jinak zùstane nedotèený.
Algoritmus odstranìní prokládání je prostorovì adaptivní, což je, že je odstraòováno prokládání jen
v tìch èástech snímku, kde se nachází roztøepení. To znamená, že ve statických oblastech
obrazu jsou zachovány plné detaily. Algoritmus pro rozlišení roztøepených
a progresivních snímkù je efektivní, ale ne dokonalý. </p>

<p>Pro dosažení inverzního telecine, použijte funkci Telecide
následovanou funkcí Decimate. Pøíloha A vysvìtluje proè to funguje.</p>

<p>Telecide podporuje volitelný <i>pattern guidance
mode</i> - režim øízení šablony. Zapnutí této možnosti umožní Telecide to pozmìnit vypoètený sled
polí jeho pøedpovìzeným sledem, založeným na blízké historii a budoucnosti klipu. Prahová hodnota
mùže být definována tak, že dost velký nesoulad mezi pøedpovìzeným a
vypoèteným sledem resetuje šablonu. </p>

<li><p><b>FieldDeinterlace()</b>: Tento filtr poskytuje podobnou funkcionalitu
jako postprocessingová funkce v Telecide. Mùžete ho použít pro
èistì prokládané streamy (to je, takové které neobsahují progresivní
snímky podrobené telecine). (Jméno odkazuje na skuteènost, že je použit režim rozdílnosti polí.)
Nepoužívejte FieldDeinterlace po Telecide protože stejná funkctionalita je vestavìná
v Telecide.</p>

<p>FieldDeinterlace poskytuje možnost, která vám umožní
zadat, zda mají být odstraòování prokládání podrobeny všechny snímky, nebo jen snímky
u kterých je detekováno roztøepení. </p>

<li><p><b>Decimate()</b>: Decimuje (tzn. odstraòuje) 1 snímek z každých N snímkù, kde N je
parametr a mùže být v rozsahu 2 až 25. Decimate odstraòuje duplikovaný snímek v
každé skupinì N snímkù. Frekvence snímkù a jejich poèet jsou pak pøíslušnì upraveny.
Decimate øádnì podporuje náhodný pøístup VirtualDubu (navigaci po èasové ose). </p>

<p>Decimate poskytuje nìkolik speciálních režimù, které jsou
užiteèné pro práci s film/video hybridním materiálem.
<p>
<li><p><b>IsCombed()</b>: Toto je filtr užiteèný pro Avisynth skriptování.
Zapíná ve skriptu rozlišení progresivních a prokládaných snímkù. Je
navržen pro použití uvnitø ConditionalFilter().
</ul><p>

<hr size=2 width="100%" align=center>

<h2><a name=requirements>Vstupní požadavky</a></h2>

<p>Telecide
vyžaduje, aby vstupní šíøka byla násobkem 2. Nedodržení tohoto
zpùsobí, že Telecide zahlásí chybu. </p>

<p>Nemìòte vertikální velikost pøed použitím Decomb. Decomb potøebuje vidìt
pùvodní rozmístìní øádkù, aby správnì detekoval roztøepení. </p>

<p>Telecide vyžaduje barevné formáty YUY2 nebo YV12 na vstupu. DLL soubor v
této verzi Decomb bude pracovat jen s Avisynthem verze 2.5 a novìjšími. </p>

<p>Je lepší nedìlat pøevody mezi YV12 a YUY2 (obìma smìry) pøed
použitím Decomb. Použijte Decomb v nativním barevném prostøedí. Takové pøevody mohou
zpùsobit artefakty kvùli nesprávnému nadvzorkování/podvzorkování barevnosti. </p>

<p>Pro operace v YV12 je podporována jen verze &quot;mpeg2dec&quot; od
MarcFD tedy mpeg2dec3 (verze 0.94 a novìjší). Jiné verze mohou vytváøet
nesprávný výstup. </p>

<hr size=2 width="100%" align=center>

<h2><a name=speed>Dùležité tipy pro rychlost</a></h2>

<p><b><i>Vyhnìte se
pøevodùm barevného prostøedí</i></b>&nbsp;&nbsp;Uvìdomte si, že pøevod do YUY2
z RGB je èasovì znaènì nároèný, takže neukládejte vaše AVI v RGB. Populární kodek
HUFYUV má možnost pøevést RGB na YUY2 a vy by jste ji mìli zapnout,
když generujete pomocí HUFYUV taková AVI, která jsou urèena pro zpracování v Decomb. </p>

<p><b><i>Zbyteènì nepoužívejte postprocessing </i></b>&nbsp;&nbsp;Zkuste Telecide
bez postprocessingu, pokud si myslíte, že je šance, že máte pìknì èistý vstupní stream.
Pokud máte takový stream, uvidíte, že zpracování
bude rychlejší bez postprocessingu. </p>

<p><b><i>Nevyvolávejte neobvyklosti Avisynthu</i></b>&nbsp;&nbsp;Toto je
velmi dùležité a mùže vás to snadno stát 25% zpomalení! Projevuje se to tak, že
neobvyklost Avisynthu zpùsobí enormní plýtvání èasu,
když nejsou u pøíkazù žádné závorky. Napøíklad, tento skript: </p>

<p>Telecide<br>
Decimate </p>

<p>&#8230;pobìží mnohem pomaleji než tento: </p>

<p>Telecide()<br>
Decimate() </p>

<p>Pokud o tom pochybujete, vyzkoušejte oba zpùsoby a uvidíte. Je to kritické, proto tedy
vždy zahrnujte minimálnì jeden parametr nebo sadu prázdných závorek. To je dùvod
proè jsou všechny scénáøe níže zapsány takovým zpùsobem. </p>

<p><b><i>Používejte rychlou rekompresi pokud je to možné.</i></b>&nbsp;&nbsp;Pokud pøedáváte
snímky do VirtualDubu pro transkódování, a nepotøebujete dìlat žádné filtrování nebo
jiné zpracování ve VirtualDubu, pak použijte øežim VirtualDubu Rychlá rekomprese (Fast Recompress). </p>

<p><b><i>Vypnìte zobrazování snímkù</i></b>&nbsp;&nbsp;Když se posílá výstup z Decomb
do VirtualDubu (a podobných aplikací), vypnìte zobrazení vstupního i
výstupního snímku pøi zpracování. To citelnì sníží dobu zpracování.
</p>

<hr size=2 width="100%" align=center>

<h2><a name=typical>Typické scénáøe</a></h2>
<p>
Tyto pøíklady jsou použity pouze pro ilustraci hlavních funkcí Decomb.
Podívejte se do uživatelského manuálu na podrobné procedury k urèení
správného nastavení pro použití, protože nejlepší výsledky dosáhnete peèlivou úpravou
parametrù.
<p><b><i>Jednoduché odstranìní prokládání</i></b>
&nbsp;&nbsp;Pokud máte nìjaký nefilmový (prokládaný) zdroj,
jednoduše odstraòte prokládání takto: </p>

<p>&nbsp;&nbsp;LoadPlugin(&quot;decomb.dll&quot;)<br>
&nbsp;&nbsp;AVISource(&quot;nonfilm.avi&quot;)<br>
&nbsp;&nbsp;FieldDeinterlace() </p>

<p><b><i>Obnovení progresivních snímkù</i></b>&nbsp;&nbsp;Pokud máte film (pùvodnì progresivní zdroj),
který byl podroben procesu telecine a chcete obnovit progresivní snímky ale
nechcete mìnit frekvenci snímkù pomocí decimování, postupujte následovnì: </p>

<p>&nbsp;&nbsp;LoadPlugin(&quot;decomb.dll&quot;)<br>
&nbsp;&nbsp;AVISource(&quot;film.avi&quot;)<br>
&nbsp;&nbsp;AssumeTFF()<br>
&nbsp;&nbsp;Telecide() </p>


<p>AssumeTFF() nastavuje poøadí polí na TFF aby bylo zadané poøadí polí v klipu.
Všimnìte si, že zde Telecide provádí postprocessing obnovených snímkù, aby vyèistil
jakékoliv roztøepené snímky, které by se mohli objevit pøi procesu uspoøádání polí
(viz &quot;Poznámky k Uspoøádávání polí&quot; níže). </p>

<p>Mùžete využít možnosti zobrazení, nebo možnosti ladìní ve
spojení s utilitou DebugView, aby jste vidìli metriky a rozhodnutí,
která Telecide generuje. To vám bude pomáhat pøi nastavování parametrù.
</p>

<p><b><i>Inverze Telecine (IVTC)</i></b>&nbsp;&nbsp;Pokud chcete udìlat stejnou vìc
ale decimovat výsledek pro odstranìní duplikovaných snímkù (jejich množství pro
provedení operace inverze telecine [IVTC] ), postupujte následovnì [u NTSC
3:2 použijeme Decimate(cycle=5)]: </p>

<p>&nbsp;&nbsp;LoadPlugin(&quot;decomb.dll&quot;)<br>
&nbsp;&nbsp;AVISource(&quot;film.avi&quot;)<br>
&nbsp;&nbsp;AssumeTFF()<br>
&nbsp;&nbsp;Telecide()<br>
&nbsp;&nbsp;Decimate(cycle=5) </p>

<p><b><i>Vypnutí postprocessingu</i></b>&nbsp;&nbsp;Pokud váš zdroj (zpracovaný døíve
pomocí telecine) je velmi èistý, mùžete chtít vypnut postprocessing, aby jste zkrátili
èas zpracování. Postupujte následovnì: </p>

<p>&nbsp;&nbsp;LoadPlugin(&quot;decomb.dll&quot;)<br>
&nbsp;&nbsp;AVISource(&quot;mixed.avi&quot;)<br>
&nbsp;&nbsp;AssumeTFF()<br>
&nbsp;&nbsp;Telecide(post=0)<br>
&nbsp;&nbsp;Decimate(cycle=5) </p>

<p>Zde tøetí parametr, <i>post</i>, je nastaven na 0 pro vypnutí
postprocessingu. </p>

<p><b><i>Inverze 3:2 Telecine s Pattern Guidance</i></b>&nbsp;&nbsp;Pokud je váš zdroj (zpracovaný døíve
pomocí telecine) NTSC 3:2 pulldown, mùžete zapnout patern
guidance - øízení šablony, které mùže, pro nìkteré klipy, provést uspoøádání polí pøesnìji.
Postupujete následovnì: </p>

<p>&nbsp;&nbsp;LoadPlugin(&quot;decomb.dll&quot;)<br>
&nbsp;&nbsp;AVISource(&quot;mixed.avi&quot;)<br>
&nbsp;&nbsp;AssumeTFF()<br>
&nbsp;&nbsp;Telecide(post=0)<br>
&nbsp;&nbsp;Decimate(cycle=5) </p>

<p>Podívejte se na popis syntaxe pro Telecide() níže pro více detailù. </p>

<p><b><i>Zpracování Hybridního Materiálu</i></b>&nbsp;&nbsp;Pokud máte klip, který obsahuje
jak 3:2 pulldown (film) tak i èisté video, mùžete s tím udìlat dobrou práci,
jako zde: </p>

<p>&nbsp;&nbsp;LoadPlugin(&quot;decomb.dll&quot;)<br>
&nbsp;&nbsp;AVISource(&quot;hybrid.avi&quot;)<br>
&nbsp;&nbsp;AssumeTFF()<br>
&nbsp;&nbsp;Telecide(guide=1)<br>
&nbsp;&nbsp;Decimate(mode=3,threshold=2.0) </p>

<p>Podívejte se do PØÍLOHY B na další detaily o zpracování hybridního materiálu. </p>

<hr size=2 width="100%" align=center>

<h2><a name=fieldmatch>Poznámky k uspoøádávání polí</a></h2>

<p>Telecide
normálnì dìlá výbornou práci pøi obnovování progresivních snímkù uspoøádáváním polí,
za pøedpokladu, že máte nastavené správné poøadí polí. Existují ètyøi známé podmínky zdrojového streamu, které mohou zpùsobit, že Telecide
pøedá roztøepené snímky: </p>
<ul>
<li><p><i>Chybìjící pole</i>. Pokud
pole chybí kvùli špatné editaci, pak jeho partnerské pole ve zdroji
nemá vhodné pole pro dorovnání. Použijte výchozí postprocessing
pro vyèištìní výstupního streamu. </p>

<li><p><i>Smíchaná (blended) pole</i>. Nìkteré streamy mají pole, která
jsou smíchaná ze dvou pùvodních (progresivních) filmových obrázkù! Napøíklad nìkteré NTSC/PAL pøevody
to mohou zpùsobit. Obvykle mají takové streamy tìchto smíchaných polí hodnì a
øešením je použít postprocessing blend=true pro vyèištìní výstupního
streamu. Použití režimu blend=true znamená nejlepší práci a smíchaná
pole se objeví jako smíchané snímky, což poskytuje druh rozmazání pohybu a odráží
&quot;význam&quot; vstupního streamu. </p>

<p>V pøípadech kdy je mnoho smíchaných snímkù,
není místo pro použití Telecide vùbec. Prostì použijte FieldDeinterlace()
a zacházejte s klipem jako s prokládaným videem. </p>

<p>Nakonec, jak poznáte, že má váš stream smíchaná
pole? Jednoduše použijte funkci Avisynthu SeparateFields aby jste oddìlili pole
a pak otevøete výsledek ve VirtualDubu. Krokujte po polích a uvidíte
jestli jsou mezi nimi pole, která jsou smíchaná z více než jednoho obrázku (mají dvojitý obraz). </p>

<li><p><i>Nefilmové snímky (hybridní klipy)</i>. Nìkteré streamy,
obzvláštì ty zachycené z živého vysílání, mají periody filmové a
periody nefilmové. Pro takové streamy mùžete použít buï Decimate() s mode=1
nebo mode=3 jak je popsáno v kapitole scénáøù výše. Mode=1 zanechá klip
s 30fps zatímco mode=3 ho zanechá s 24fps. Je na vás (obtížnì)
rozhodnout o tom jestli chcete koneèný stream s 24fps nebo 30fps. </p>

<li><p><i>Hybridní snímky</i>. Obèas budou grafiky, podìkování (titulky),
atd., rendrovány na koneènou frekvenci snímkù a pak položeny na obsah podrobený
telecine, což vede ke snímkùm, které mají jak progresivní tak neprogresivní
obsah. Nebo ještì øidèeji, se setkáte s klipy, které mají rùzné vrstvy, které
byly podrobeny telecine s rùznými fázemi a pak složeny.
Pro streamy s hybridními snímky se obvykle musíte spolehnout na postprocesing z Telecide
aby vyèistil výstupní stream. </p>

<p>Nyní by jste mìli získat pøedstavu, že postprocessing je obecnì
dobrá vìc pro zajištìní toho, že se do výstupu neproplíží roztøepené snímky. </p>
</ul>

<hr size=2 width="100%" align=center>

<h2><a name=generalsyntax>Obecná  syntaxe funkcí</a></h2>

<p>Funkce z
Decomb používají jmenné parametry. To znamená, že nemusíte mít obavy o
poøadí parametrù. Mùžete jednoduše na nì poukazovat pomocí názvù a vkládat je v
jakémkoliv poøadí do seznamu parametrù. Když vynecháte parametr tak bere své
výchozí hodnoty. Napøíklad, pokud chcete použít Telecide s
postprocessingem, a se zapnutým ladìním, mùžete jednoduše øíci: </p>

<p>Telecide(post=2,debug=true) </p>

<p>Je povolena jakákoliv kombinace a poøadí parametrù. Nicménì pamatujte, že
by jste mìli vždy vkládat prázdné závorky, pokud nespecifikujete žádné
parametry. </p>

<hr size=2 width="100%" align=center>

<h2><a name=defaultparam>Uživatelské výchozí hodnoty parametrù</a></h2>

<p>Pokud
se vám nelíbí výchozí hodnoty popsané níže, mùžete si nastavit svoje vlastní standartní
výchozí hodnoty. Pro pøepsání výchozích hodnot, vytvoøte soubory výchozích hodnot tak
jak je vyžadováno ve složce pluginù Avisynthu. Napøíklad
nastavte výchozí post=4 pro Telecide(), vytvoøte soubor pojmenovaný
Telecide.def a vložte do nìj tento øádek: </p>

<p>post=4 </p>

<p>Mùžete uvést tolik záznamù parametrù kolik budete chtít, na každý øádek jeden. Ty,
které nebudou zadané budou brát výchozí hodnoty takové, jaké jsou uvedeny níže.
Samozøejmì vždy mùžete pøepsat výchozí hodnoty ve vašich skriptech, když vyzvete funkci.
Poznámka: Øádky v souboru výchozích hodnot nesmí obsahovat žádné mezery nebo tabulátory. </p>

<hr size=2 width="100%" align=center>

<h2><a name=override>Nadøazená rozhodnutí Decomb</a></h2>

<p>Pøíležitostnì mùžete mít perfektní výsledek kromì nìkolika snímkù, o
kterých Decomb chybnì rozhodne. V takových pøípadech mùžete použít ruèní pøepsání
funkcionality Decomb. Je to pokroèilá vymoženost, která by mìla být použita jen experty
kteøí potøebují nejvyšší možnou kvalitu. </p>

<p><b><i>Nadøazení pro Telecide()</i></b> Pøedpokládejme napøíklad, že najdeme, že ve snímku
100 není uspoøádání polí správné. Prozkoumáme ladící (debug) výstup z Telecide()
a zjistíme že je to uspoøádání z pøedchozího snímku (&quot;[použití p]&quot;). Chceme
zkusit vynutit uspoøádání aktuálního a následujícího, abychom vidìli zda lze najít
správné uspoøádání (viz. PØÍLOHA A pro vysvìtlení terminologie). Nejdøíve vytvoøíme soubor
ve stejné složce, kde je skriptový soubor a nazveme ho
&quot;tango.tel&quot; (mùžete použít jakékoliv jméno). Pak umístíme do tohoto souboru
tento øádek: </p>

<p>100 c </p>

<p>To deklaruje, že snímek 100 je uspoøádán na aktuální - current (použijte místo &quot;c&quot; napø. &quot;p&quot;
pro pøedchozí snímek a &quot;n&quot; pro následující next). </p>

<p>Nyní nasmìrujeme Telecide k použití tohoto nadøazeného souboru: </p>

<p>Telecide(ovr=&quot;tango.tel&quot;) </p>

<p>Nyní zpracujte skript jako obvykle; Zadané nadøazené údaje budou použity jako
aktuální. Pokud toto uspoøádání selže, mùžeme zkusit nahradit &quot;c&quot; písmenem &quot;n&quot;
abychom vyzkoušeli následující. </p>

<p>Také mùže být použit rozsah snímkù, jako zde: </p>

<p>100,500 c </p>

<p>Mùžeme pøidat doplòkové øádky urèující jakékoliv další nadøazené údaje podle požadavkù.
Všimnìte si, že poèet snímkù musí být v rostoucím poøadí (od nejnižšího po nejvyšší). </p>

<p>Do vašeho nadøazovacího souboru mùžete také zadat úplné šablony pro vaše uspoøádání
v Telecide. Napøíklad pøedpokládejme, že jste chtìli vynutit šablonu ncccn pro
snímky 100 až 185. Øádek ve vašem nadøazovacím souboru by byl: </p>

<p>100,185 ncccn </p>

<p>Mùžete do šablony vložit tolik specifikátorù kolik chcete. Napøíklad tento
by byl také legální: </p>

<p>100,185 nc </p>

<p>Zadaná šablona bude opakována poèínaje na úvodním snímku a
konèe na posledním snímku rozsahu. </p>

<p>Tato schopnost umožòuje pružné a pohodlné ruèní ovládání uspoøádání
polí. Mùžete tak udìlat celý film ruènì, pokud chcete! </p>

<p>Rozhodnutí postprocessingu Telecide() lze také nadøadit. Pro vynucení
toho, aby byl snímek považovaný za roztøepený, použijte øádek s '+' jako jeden z tìchto: </p>

<p>100 +<br>
100,500 + </p>

<p>Pro vynucení toho, aby byl snímek považovaný za NEroztøepený, použijte takovéto øádky: </p>

<p>100 -<br>
100,500 - </p>

<p>Mùžete nastavit rùzné hodnoty <i>vthresh</i> pro rùzné èásti vašeho klipu. Napøíklad,
pro nastavení <i>vthresh</i> na 25 pro snímky 200 až 500 použijte:</p>

200,500 v 25

<p>Všimnìte si, že 'v' nadøazuje (pøepisuje) požadovaný rozsah snímkù. Pro zadání jednoho snímku nastavte
oba, tedy úvodní i koneèný snímek rozsahu na požadované èíslo snímku.

<p>Mùžete zadat režim uspoøádání (back=0/1/2) pro snímek nebo rozsah snímkù:
<p>
100 b 2<br>
200,500 b 1
<p>
První øádek nahoøe zapíná trojité uspoøádání pro snímek 100. Druhý øádek zapíná
zpìtné uspoøádání roztøepení pro snímky 200 až 500.

<p>Øádky pro nadøazené uspoøádání polí a pro nadøazený postprocessing mohou být
použity spoleènì ve stejném nadøazovacím souboru tak dlouho, dokud se nenajde
požadavek rostoucího èísla snímku. </p>

<p><b><i>Nadøazení pro FieldDeinterlace()</i></b>
FieldDeinterlace() podporuje '+' a '-' nadøazení tak jak je popsáno pro Telecide(). Samozøejmì
nadøazení uspoøádání polí nepoužívá a nemìlo by být používáno. Mohli by jste vyzývat
nadøazovací soubor &quot;tango.fd&quot;. </p>

<p><b><i>Nadøazení pro Decimate()</i></b> Pro Decimate() provádíme vše stejným zpùsobem,
ale používáme øádky následující formy, kde èísla jsou èísla snímkù
klipu vstupujícího do Decimate() , které budou vynuceny pro decimaci: </p>

<p>150<br>
175 </p>

<p>V pøíkladu výše budou snímky 150 a 175 vynuceny pro decimaci. Znovu,
vhodným jménem pro nadøazovací soubor by bylo &quot;tango.dec&quot;. </p>

<hr size=2 width="100%" align=center>

<h2><a name=detailsyntax>Podrobná syntaxe funkcí</a></h2>

<p>Následující
je syntaxe pro funkce Decomb (nahraïte <i>parameter_list</i> vaším
èárkou oddìleným seznamem jmenných parametrù): </p>

<p><hr size=2 width="100%" align=center>

<h2><a name=telecide>Telecide(<i>parameter_list</i>)</a></h2>

<p><a
name=common><b>Bìžnì užívané parametry</b></a> </p>

<p><b><i>Poøadí polí</i></b> Pro správné rendrování je zásadní správné nastavení poøadí polí. Poøadí polí je
získáno z Avisynthu a mùže být nastaveno funkcemi AssumeTFF() nebo AssumeBFF()
ve vašem skriptu pøed výzvou Telecide(). Nastavte AssumeTFF() pro horní pole první; použijte AssumeBFF()
pro spodní pole první (bottom field first). Protože správné nastavení je tak dùležité,
dùraznì se vám doporuèuje nedìlat domnìnky o poøadí polí v klipu, ale radìji si poøadí polí
ovìøit pomocí následující procedury.
<p>
Pro urèení poøadí polí, vytvoøte skript Avisynthu, který pøedává syrový klip bez jakéhokoli
zpracování. Pokud to je AVI, tak prostì použijte AviSource(). Pro naše pøíklady budeme používat
AviSource(). Pøidejte skriptový øádek pro oddìlení polí s použitím horního pole jako prvního, jako zde:

<pre>AviSource(&quot;your_clip.avi&quot;)
AssumeTFF().SeparateFields()</pre>

<p>Nyní pøedejte skript do VirtualDubu a najdìte oblast s pohybem. Krokujte vpøed podle
pohybu. Všímejte si zda jde pohyb vždy vpøed jak by mìl jít, nebo zda skáèe
zpìt a vpøed. Napøíklad, pokud je poøadí polí nesprávné,
objekt pohybující se trvale zleva doprava by se pohnul doprava, pak by trochu skoèil zpìt doleva, pak
by se hnul zase doprava, atd. Pokud je poøadí polí správné, hýbe se trvale doprava.</P>
<p>Pokud je pohyb správný pøi AssumeTFF().SeparateFields(), pak je vaše poøadí polí s horními
poli prvními a musíte použít AssumeTFF(). Pokud není pohyb správný, pak je vaše poøadí polí se
spodními poli prvními a musíte použít AssumeBFF(). Pokud chcete dvojitou kontrolu, mùžete ještì použít
AssumeBFF.SeparateFields() pro kontrolu správné operace pro spodní pole první.</p>
<p>
Nakonec, všimnìte si, že jestliže je volání AssumeTFF() nebo AssumeBFF() vynecháno, Telecide() získá
aktuální informaci o poøadí polí z Avisynthu. Èasto je to správné, jako když Telecide() následuje
MPEG2Source() z DGMPGDec, ale obèas je to chybné, takže buïte opatrní s vynecháváním zadání poøadí polí.

<p><b><i>guide</i></b> (0-3, výchozí 0) lze použít k vylepšení uspoøádání
polí, když je známo, že zdrojový klip je PAL nebo NTSC materiál podrobený telecine.
Pro vypnutí této možnosti (slepé uspoøádání polí), nastavte guide=0. Pro øízení NTSC
24fps-&gt;30fps telecine, nastavte guide=1. Pro jednoduché øízení PAL (snaží se
udržet zámek na fázi polí), nastavte guide=2. Pro øízení NTSC 25fps-&gt;30fps
telecine, nastavte guide=3. </p>

<p>Když je tato možnost zapnuta, Telecide() mùže zmìnit rozhodnutí o uspoøádání polí
a použít pøedpovìzené uspoøádání založené na blízkém okolí v klipu pøed a za daným místem. Parametr <i>gthresh</i>
(níže) je použit pro definování, jak malý nesoulad mezi
pøedpovìzeným a vypoèteným uspoøádáním polí je vyžadován pro pøijetí a použití
pøedpovìdi. Nezapínejte
tuto možnost kromì pøípadu kdy víte, že zdrojový klip odpovídá
vybranému režimu øízení. Pokud si nejste jisti, ponechte guide=0. </p>

<p>Všimnìte si, že tato funkce využívá náhodného pøístupu Avisynthu ke snímku, takže to pracuje dobøe,
když uživatel používá náhodnou navigaci po èasové ose.</p>

<p><b><i>gthresh</i></b> (0.0-100.0, výchozí 10.0) definuje jak velký nesoulad
(v procentech) mezi pøedpovìzeným a vypoèteným uspoøádáním je vyžadován pro
resetování šablony. Použijte možnost zobrazení - show, pokud to vyžaduje vhodné nastavení
této prahové hodnoty. Výstup zobrazení (show) a/nebo ladìní (debug) bude indikovat, která uspoøádání
mají být nadøazená (pøepsána). Nadøazená uspoøádání jsou oznaèená hvìzdièkou, napø., "in-pattern*".</p>

<p>Nenastavujte <i>gthresh</i> pøíliš vysoko, protože to mùže vytvoøit špatné uspoøádání.
Cokoli pøes 10-15 je poèátkem nebezpeèí.</p>

<p><b><i>post</i></b> (0-5, výchozí 2) ovládá jestli a jak Telecide
provádí postprocessing pro vyèištìní snímkù, které jsou i po uspoøádání snímkù
stále roztøepené:
<ul>
<li>post=0: Použijte toto pro úplné vypnutí postprocessingu.
<li>post=1: Použijte toto pro zapnutí
metrik kalkulace a k zobrazení hodnot <i>vmetric</i>, ale ne vykonání odstranìní prokládání.
<li>post=2: Použijte ho pro zapnutí odstraòování prokládání. Všimnìte si, že v tomto režimu
probíhá uspoøádání polí normálnì a nejlépe uspoøádaný snímek je podroben odstranìní prokládání a doruèení.
<li>post=3: Toto je stejné jako post=2 kromì toho, že
je na deinterlovaných snímcích bíle zobrazena pohybová mapa odstraòování prokládání.
<li>post=4: Toto je stejné jako post=2 kromì toho, že místo použití nejlépe uspoøádaných polí
pro snímek je odstranìno prokládání v pùvodním snímku. Použili by jste to pro minutí
sekvencí videa v hybridním klipu.
<li>post=5: Toto je stejné jako post=4 kromì toho, že
je na deinterlovaném snímku zobrazena bílá pohybová mapa.
</ul>
<p><b><i>vthresh</i></b> (0.0-255.0, výchozí 50.0) nastavuje prahovou hodnotu
detekce roztøepení snímku pro postprocessing. Mùžete chtít zvýšit tuto hodnotu pokud
je odstraòováno prokládání z pøíliš velkého poètu dobrých (neroztøepených) snímkù,
nebo ji snížit, když nejsou podchyceny nìkteré roztøepené snímky.
Výchozí je rozumná obecnì úèelová hodnota. Všimnìte si, že tato
prahová hodnota urèuje, zda je snímek považován za roztøepený a potøebuje být
odstranìno prokládání; není to prahová hodnota kterou znáte ze Smart
Deinterlaceru. Tato prahová hodnota je urèena parametrem <i>dthresh</i> (níže); je to
prahová hodnota pro odstranìní prokládání ve snímku <i>detekovaném jako roztøepený</i>. </p>

<p><b><i>dthresh</i></b> (0.0-255.0, výchozí 7.0) nastavuje prahovou hodnotu
odstranìní prokládání ve snímcích detekovaných jako roztøepených. Všimnìte si, že tato prahová hodnota je
prahovou hodnotou, kterou dùvìrnì znáte ze Smart Deinterlaceru. </p>

<p><b><i>blend</i></b> (true/false, výchozí false) zapíná  v roztøepených oblastech
smíchání (blending) namísto interpolace. Interpolace je rychlejší.</p>

<p><b><i>show</i></b> (true/false, výchozí false) umožòuje zobrazit
metriky ve snímku jako pomoc pro nastavení prahových hodnot. Také zobrazuje
verzi softwaru. </p>

<p><a name=advanced><b>Pokroèilé parametry</b></a> </p>

<p><b><i>chroma</i></b> (true/false, výchozí true) urèuje zda je roztøepení barevnosti
zahrnuto do rozhodování, dìlaného pøi postprocessingu o tom, zda je snímek
roztøepený nebo ne. Pokud je chroma=true, pak je roztøepení barevnosti zahrnuto,
jinak není zahrnuto. Všimnìte si, že u barevnosti je vždy odstraòováno prokládání; tento
parametr ovlivní pouze rozhodování o tom, jestli je snímek prokládaný. Je to užiteèné
u klipù, které mají velké množství interference jasu/barevnosti, jako možné dùsledky
ze slabých høebenových (comb) filtrù. Interference mùže zpùsobit, že takové snímky, které
nejsou roztøepené jsou detekovány jako roztøepené pøi chroma=true. Nastavením
chroma=false, lze efekt interference eliminovat. </p>

<p><b><i>back</i></b> (0-2, výchozí 0) volí režim uspoøádání.
Když je back=0, není nikdy vyzkoušeno zpìtné uspoøádání. To znamená, že pøi špatném
støihu nemusí být nalezen progresivní snímek a ve výsledném snímku musí být
odstranìno prokládání pomocí postprocessingnu. Když je back=1 a pokud je snímek stále roztøepený
po uspoøádání snímkù (v souladu s testem oproti 'bthresh' -- viz níže),
pak dojde k pokusu o zpìtné uspoøádání. To vyžaduje post > 0 a
mùže pomoci nalézt dobrý progresivní snímek pøi špatném støihu.
Když je back=2, je zpìtné uspoøádání vždy uvažováno. Nìkteré
klipy, obzvláštì ty s mnoha smíchanými (blended) poli, lze lépe zpracovat pomocí
back=2, který testuje uspoøádání s pøedchozím, aktuálním, a následujícím snímkem.
Ale používejte ho s opatrností, protože mùže vytváøet zadrhávající klipy.</p>

<p><b><i>bthresh</i></b> (0.0-255.0, výchozí 50) nastavuje prahovou hodnotu detekce roztøepení
pro podmínìné zpìtné uspoøádání (back=1). Zpìtné uspoøádání bude použito
když kandidát uspoøádání má roztøepení vìtší než 'bthresh'. Typicky nastavte
vysoké 'vthresh' pro zachycení zbloudilých roztøepených snímkù, spolu s nižší 'bthresh' pro
podchycení špatných støihù.

<p><b><i>nt</i></b> (integer, výchozí 10) definuje prahovou hodnotu tolerance šumu.
Tento parametr by obvykle nemìlo být tøeba upravovat. Nicménì pokud máte zašumìlou nahrávku
a setkáváte se s chybami uspoøádání, mùžete ho úspìšnì použít pro vylepšení takové
situace.</p>

<p><b><i>y0</i></b> a <b><i>y1</i></b> (integer, výchozí 0) definuje
skupinu vylouèení pro uspoøádání polí. Pokud se y0 nerovná y1 je tato funkce
zapnuta. Øádky v obrazu mezi øádky y0 a y1 (vèetnì) jsou vylouèeny
ze zpracování, když je rozhodnuto o uspoøádání polí. Tato funkce je
typicky použita pro ignorování titulkù, které mohou jinak odstartovat
pøeuspoøádání. y0 a y1 musí být oba kladná celá èísla a y0 musí být menší nebo
rovno y1; pokud tomu tak není, vyskoèí chybová zpráva. </p>

<p><b><i>hints</i></b> (true/false, výchozí true) zapíná pøedávání údajù (hints) z Telecide()
do Decimate(). Decimate používá tyto údaje pro optimalizaci svého chování
v režimech 1 a 3. </p>

<p><b><i>ovr</i></b> (string, výchozí &quot;&quot;) zapíná specifikaci
nadøazovacího souboru (viz kapitola výše, nazvaná &quot;Nadøazená rozhodnutí Decomb&quot;).
Soubor musí být ve stejné složce jako skriptový soubor
(aktuální složka Avisynthu) a jméno souboru musí být uzavøeno v uvozovkách,
napø., ovr=&quot;tango.tel&quot;. </p>

<p><b><i>debug</i></b> (true/false, výchozí false) zapíná logovací/ladící
informaci o rozhodnutích filtru pro jejich vytištìní pøes OutputDebugString().
Pro zachycení tìchto øetìzcù je dostupná Utilita zvaná DebugView. </p>

<hr size=2 width="100%" align=center>

<h2><a name=fielddeinterlace>FieldDeinterlace(<i>parameter_list</i>)</a></h2>

<p><b><i>full</i></b> (true/false, výchozí true) volí zda zpracovat všechny
snímky nebo prostì jen snímky, které jsou detekovány jako roztøepené. Použijte full=true
pro zpracování všech snímkù. </p>

<p><b><i>threshold</i></b> (0-255, výchozí 20) nastavuje prahovou hodnotu detekce
roztøepení. Pøi práci s full=false, mùžete chtít zvýšit tuto hodnotu pokud
je odstraòování prokládání podrobeno pøíliš mnoho dobrých snímkù, nebo snížit pokud se
nepodchytily malé oblasti s roztøepením. Výchozí je dobrá obecnì úèelná hodnota. Všimnìte si, že
tato prahová hodnota urèuje zda je snímek považován za roztøepený a potøebuje
odstranit prokládání; není to prahová hodnota, kterou dobøe znáte ze Smart
Deinterlaceru. Tato prahová hodnota je urèena pomocí <i>dthreshold</i> (níže); je to
prahová hodnota pro odstraòování prokládání ve snímku <i>detekovaném jako roztøepený</i>. Když je
full=true, threshold je ignorována, ale dthreshold zùstává funkèní. </p>

<p><b><i>dthreshold</i></b> (0-255, výchozí 7) nastavuje prahovou hodnotu pro
odstranìní prokládání ze snímkù detekovaných jako roztøepené. Všimnìte si, že tuto
prahovou hodnotu možná dobøe znáte ze Smart Deinterlaceru. </p>

<p><b><i>blend</i></b> (true/false, výchozí true) zapíná smíchání (blending) místo
interpolace v roztøepených oblastech. </p>

<p><b><i>map</i></b> (true/false, výchozí false) zapíná zobrazení mapy detekce
roztøepení (mapa pohybu). Pokud full=true, pak je mapa zobrazována pro všechny snímky. Pokud
full=false, pak je mapa zobrazována jen pro snímky detekované jako roztøepené; neroztøepené
snímky jsou zobrazeny normálnì. Mapa zobrazuje roztøepené oblasti svìtle azurovì;
neroztøepené oblasti jsou kopírovány ze zdrojového snímku a smíchány se šedou. </p>

<p><b><i>chroma</i></b> (true/false, výchozí false) urèuje zda je roztøepení barevnosti
zahrnuto do rozhodování, dìlaného pøi postprocessingu o tom, zda je snímek
roztøepený nebo ne. Pokud je chroma=true, pak je roztøepení barevnosti zahrnuto,
jinak není zahrnuto. Všimnìte si, že u barevnosti je vždy odstraòováno prokládání; tento
parametr ovlivní pouze rozhodování o tom jestli je snímek prokládaný. Je to užiteèné
u klipù, které mají velké množství interference jasu/barevnosti, jako možné výsledky
ze slabých comb  filtrù. Interference mùže zpùsobit, že takové snímky, které
nejsou roztøepené, jsou detekovány jako roztøepené pøi chroma=true. Nastavením
chroma=false, lze efekt interference eliminovat. Tato možnost nemá žádný efekt
pøi full=true, protože všechny snímky jsou považovány za roztøepené.</p

<p><b><i>ovr</i></b> (string, výchozí &quot;&quot;) zapíná specifikaci
nadøazovacího souboru (viz kapitola výše nazvaná &quot;Nadøazená rozhodnutí Decomb&quot;).
Soubor musí být ve stejné složce jako skriptový soubor
(aktuální složka Avisynthu) a jméno souboru musí být uzavøeno v uvozovkách,
napø., ovr=&quot;tango.fd&quot;. </p>

<p><b><i>show</i></b> (true/false, výchozí false) umožòuje zobrazit
metriky ve snímku pro pomoc pøi nastavování prahových hodnot. Také zobrazuje
verzi softwaru. </p>

<p><b><i>debug</i></b> je stejný jako u Telecide. </p>

<hr size=2 width="100%" align=center>

<h2><a name=decimate>Decimate(<i>parameter_list</i>)</a></h2>

<p><b><i>cycle</i></b> (2-25, výchozí 5) volí decimaèní pomìr, to je,
decimuje (odstraòuje) 1 snímek v každém cyklu snímkù. </p>

<p><b><i>mode</i></b> (0-3, výchozí 0) urèuje jak Decimate() zachází se
zvláštním snímkem v cyklu. </p>

<p>Pøi mode=0, Decimate zahazuje takový snímek z cyklu, který je nejpodobnìjší
jeho pøedchùdci. </p>

<p>Pøi mode=1, místo zahození nejpodobnìjšího snímku, ho Decimate() buï
nahradí snímkem interpolovaným z aktuálního snímku (obvykle
duplikát pøedchozího snímku) a  následujícího snímku, nebo snímek pøedá
tak jak je. Volba mezi tìmito dvìma režimy závisí na dvou vìcech: 1)
zda je cyklus snímkù z 3:2 pulldown materiálu nebo z èistého videa,
a 2) nastavení parametru threshold a jak se snímek liší od
pøedchozího snímku (viz níže). První vyžaduje guide=1 pro Telecide (pro
deklarování šablony pulldown). </p>

<p>Decimate(mode=1) je užiteèný pro hybridní klipy obsahující hlavnì video. Umožní vám
zachovat frekvenci snímkù na video frekvenci (aby jste získali hladké video sekvence), ale
také pro zlepšení efektu duplikovaných snímkù, které jsou vysílané z
Telecide() pro filmové sekvence (snímky, které jsou normálnì odstranìny pomocí mode=0). </p>

<p>Podívejte se do PØÍLOHY B na více podrobností a ukázání zpracování hybridního
materiálu. </p>

<p>Pøi mode=2, Decimate() smaže snímek z nejdelšího sledu duplikátù.
Tento režim je nejspolehlivìjší u animovaných filmù a jiných materiálù kde
se mùže objevit pohyb jen v každém druhém, tøetím, nebo ètvrtém (atd.) snímku. pokud
použijete mode=0 na takové klipy, je nebezpeèí, že se objeví nesprávná decimace,
zpùsobující zadrhávání. Klipy jako ty zde popsané, obvykle pochází z 8fps nebo
12fps animací, stejnì jako normálních 24fps animací, kde pomalý pohyb vede k
opakování duplikátù. Mode=2 je schopen mazat správné duplikáty ve všech pøípadech. </p>

<p>Pøi mode=3, použije Decimate() místo zahození nejpodobnìjšího duplikátu
rozdílné decimaèní strategie pro 3:2 pulldown materiál (film) a pro
èisté video (nefilm) cykly. Filmové cykly jsou decimovány normálním zpùsobem.
Nefilmové cykly jsou decimovány použitím decimace se smícháním snímkù cyklu z
5 snímkù na 4 snímky. Výsledná frekvence snímkù je filmová rychlost
(decimovaná o 1/5). </p>

<p>Existují dva faktory, které ovlivní rozhodnutí o tom jak decimovat: 1)
jestli je cyklus snímkù z 3:2 pulldown materiálu nebo z èistého videa,
a 2) nastavení parametru threshold a na rozdílu metriky pro
nejpodobnìjší snímek. První vyžaduje guide=1 pro Telecide (pro deklarování
šablony pulldown). </p>

<p>Decimate(mode=3) je užiteèný pro hybridní klipy obsahujících hlavnì film. To vám umožní
decimovat klip na filmové frekvence a zacházet s filmovou èástí normálnì a
na video sekvence použít decimaci smícháním pro zachování jejich hladkého pohybu. </p>

<p>Podívejte se do PØÍLOHY B na více podrobností a ukázání zpracování hybridního
materiálu. </p>

<p><b><i>threshold</i></b> (desetinný, výchozí 0.0) Pøi mode=1, snímky
urèené jako nejpodobnìjší jejich pøedchozím snímkùm mohou být zpracovány
dvìma možnými zpùsoby: 1) mohou být smíchány jak je popsáno výše, nebo 2) mohou
být ponechány pokud parametr threshold je ne-nulový a rozdíl metriky
pøekraèuje threshold. Nastavením vhodné prahové hodnoty (threshold), mùžete
duplikáty získat smíchané a ponecháte snímky, které mají nový obsah,
t.j., které se významnì liší od pøedchozího snímku. To umožní aby byly hybridní
film/nefilm klipy zpracovány inteligentnì: filmové èásti budou smíchané
a nefilmové èásti nebudou. Použijte show=true (nebo debug=true ve spojení s utilitou DebugView)
pro prohlédnutí rozdílù metrik a tím urèete vhodnou prahovou hodnotu
threshold pro váš klip.</p>
<p>Parametr threshold také podobným zpùsobem ovlivní mode=3. Podívejte se do PØÍLOHY B
na podrobnosti.</p>

<p><b><i>threshold2</i></b> (desetinný, výchozí 3.0) Pøi mode=2, Decimate()
smaže snímek z nejdelšího sledu duplikátù jak je popsáno výše. Parametr
threshold2 ovládá jak blízké musí být dva snímky, aby byly považovány za
duplikáty. Pokud je threshold2 zvýšená, toleruje se vìtší rozdíl,
pøièemž jsou snímky stále považovány za duplikáty. Výchozí nastavení pracuje dobøe
u vìtšiny klipù. Použijte show=true (nebo debug=true ve spojení s utilitou DebugView
pro zobrazení rozdílu metrik a tím urèete vhodnou prahovou hodnotu
threshold pro váš klip. </p>

<p><b><i>quality</i></b> (0-3, výchozí 2) Tato možnost umožní uživateli vyvážit
kvalitu rùzných detekcí s rychostí. Zde jsou možnosti: </p>

<ul>
 <li>quality=0: Podvzorkováno pro
     rychlost a barevnost neuvažována (nejrychlejší). </li>
 <li>quality=1: Podvzorkováno pro
     rychlost a barevnost uvažována. </li>
 <li>quality=2: Plné vzorkování a
     barevnost neuvažována. </li>
 <li>quality=3: Plné vzorkování a
     barevnost uvažována (nejpomalejší). </li>
</ul>

<p><b><i>ovr</i></b> (string, výchozí &quot;&quot;) zapíná specifikaci
nadøazovacího souboru (viz kapitola výše nazvaná &quot;Nadøazená rozhodnutí Decomb&quot;).
Soubor musí být ve stejné složce jako skriptový soubor
(aktuální složka Avisynthu) a jméno souboru musí být uzavøeno v uvozovkách,
napø., ovr=&quot;tango.dec&quot;. </p>

<p><b><i>show</i></b> (true/false, výchozí false) umožòuje zobrazit
metriky ve snímku pro pomoc pøi nastavování prahových hodnot. Také zobrazuje
verzi softwaru. </p>

<p><b><i>debug</i></b> (true/false, výchozí false) zapíná logovací/ladící
informaci o rozhodnutích filtru pro jejich vytištìní pøes OutputDebugString().
Pro zachycení tìchto øetìzcù je dostupná Utilita zvaná DebugView.
Zobrazená informace je stejná jako ta, která se zobrazí u možnosti show výše. </p>

<p><hr><h2><a name=iscombed>IsCombed(<i>parameter_list</i>)</a></h2>

Tento filtr je navržen pro použití uvnitø ConditionalFilter().
Vrací logickou hodnotu pro indikování zda je snímek roztøepený (prokládaný).

<p><b><i>threshold</i></b> (0-255, výchozí 20) nastavuje množství roztøepení vyžadované
pro deklarování snímku jako roztøepeného. je to analogické s parametrem <i>threshold</i> u FieldDeinterlace().
Mìli by jste ho upravit pro nejlepší zpracování vašeho zadaného materiálu.</p>

<hr size=2 width="100%" align=center>

<h2><a name=theory>PØÍLOHA A. Telecide() Teorie operace</a></h2>

<p>Zde je uvedeno
co Telecide dìlá ve výchozím stavu. Když obdrží požadavek na snímek pøistoupí
k dalšímu snímku a k požadovanému (nazývaného aktuální snímek).
Zde je to co vidí (kde N=nex (následující), C=current (aktuální), t=horní pole (top field), b=spodní pole (bottom field)): </p>

<p><tt>
Ct Nt<br>
Cb Nb</tt></p>

<p>Telecide udìlá 2 kombinace snímkù z dostupných polí. Zde jsou kombinace: </p>

<p><tt>
Nt<br>
Cb<br>
<br>
Ct<br>
Cb</tt></p>

<p>Nyní jsou oba snímky kontrolovány na roztøepení. Nejménì roztøepený snímek je
výstupním snímkem (nepøedpokládá se žádné øízení šablony (pattern guidance)). Je to takhle jednoduché. </p>
<p>Pokud je zapnuté øízení šablony, rozhodnutí popsané výše lze pøepsat
pøedpovìzeným uspoøádáním založeným na zpozorované šablonì v okolí aktuálního snímku.
Pøedpovìï je ignorována pokud rozdíl mezi uspoøádáními je pøíliš velký, protože
toto používá možnou zmìnu fáze šablony, ke které by mìl Telecide()
resynchronizovat.
<p>Uvažujme nyní cyklus snímkù z 3:2 pulldown sekvence (horní pole první):
</p>
<tt>
a a b c d<br>
a b c c d
</tt><p>
Telecide vytvoøí uspoøádané výstupní snímky následovnì:
<p><tt>
a b c c d<br>
a b c c d
</tt><p>
Je zde vidìt, že byl vytvoøen duplikovaný snímek. Decimate odstraní duplikovaný snímek
nalezením a odstranìním nejpodobnìjšího snímku svému pøedchùdci. Nyní je snadno vidìt proè
Telecide následovaný Decimate vytváøí inverní 3:2 telecine (IVTC) funkci.</p>
<hr size=2 width="100%" align=center>

<h2><a name=hybrid>PØÍLOHA B. Zacházení s hybridními klipy</a></h2>

<p>Vìtšina reálných klipù v NTSC prostøedí je smìsí 3:2 pulldown
materiálu (film) a èistého video (nefilm) materiálu. To pøedstavuje potíže pøi
enkódování, protože náš formát vyžaduje zadat frekvenci snímkù jako
buï 29.97fps nebo 23.976fps. Pokud zvolíme video frekvenci, video sekvence
budou OK, ale filmové sekvence nebudou decimovány a budou vysílány
duplikáty, zpùsobující trhání. </p>

<p>Na druhé stranì, pokud zvolíme filmovou frekvenci, filmové sekvence budou
OK, ale video sekvence budou decimovány, a objeví se trhání. </p>

<p>Decomb poskytuje dva speciální decimaèní režimy pro lepší zpracování hybridních klipù. </p>

<p><b><i>Pøevážnì filmové klipy (mode=3)</i></b> </p>

<p>Nejdøíve uvažujme pøípad, kde je klip pøevážnì filmový. V tomto pøípadì,
chceme decimovat filmové èásti normálnì takže budou hladké (plynulé). Pro
nefilmové èásti, chceme snížit jejich snímkovou frekvenci pomocí (blend) decimace
smícháním každého cyklu snímkù z 5 na 4 snímky. Video sekvence tak rendrované se jeví
plynulejší než když jsou decimovány jako film. </p>

<p>Zde je typický skript pro apnutí tohoto režimu práce: </p>

<p>Telecide(guide=1)<br>
Decimate(mode=3,threshold=1.0) </p>

<p>Jsou 2 faktory, které zapínají Decimate aby vhodnì zacházely s filmovými a nefilmovými
èástmi. Zaprvé, když Telecide deklaruje guide=1, je schopen
podat informaci do Decimate o tom, které snímky jsou odvozené z filmu a které
z videa. Aby tento mechanizmus pracoval, Decimate musí ihned následovat za Telecide.
Pøesnìji, èím lepší práci udìláte s uzamèením šablony v Telecide (nastavením
parametrù podle požadavkù), tím lepší práci mùže Decimate udìlat. </p>

<p>Druhým faktorem je prahová hodnota (threshold). Pokud je vidìt cyklus snímkù, který nemá duplikáty,
pak je cyklus zpracován jako video. Prahová hodnota
urèuje jaké procento rozdílu snímkù je považováno za pøítomnost duplikátu.
Všimnìte si, že threshold=0 vypíná druhý faktor. </p>

<p><b><i>Pøevážnì video klipy (mode=1)</i></b> </p>

<p>Nyní uvažujme pøípad, kde je klip pøevážnì video. V tomto pøípadì,
se chceme vyhnout decimování video èástí aby zùstaly plynulé. U filmových èástí
chceme dosáhnout video frekvence, ale zmìna duplikovaného snímku na
smíchaný snímek není tak zøejmá. </p>

<p>Zde je typický skript pro zapnutí tohoto režimu operace: </p>

<p>Telecide(guide=1)<br>
Decimate(mode=1,threshold=1.0) </p>

<p>Jsou 2 faktory, které zapínají Decimate aby vhodnì zacházely s filmovými a nefilmovými
èástmi. Zaprvé, když Telecide deklaruje guide=1, je schopen
podat informaci do Decimate o tom, které snímky jsou odvozené z filmu a které
z videa. Aby tento mechanizmus pracoval, Decimate musí ihned následovat za Telecide.
Pøesnìji, èím lepší práci udìláte s uzamèením šablony v Telecide (nastavením
parametrù podle požadavkù), tím lepší práci mùže Decimate udìlat. </p>

<p>Druhým faktorem je prahová hodnota (threshold). Pokud je vidìt cyklus snímkù, který nemá duplikáty,
pak je cyklus zpracován jako video. Prahová hodnota
urèuje jaké procento rozdílu snímkù je považováno za pøítomnost duplikátu.
Všimnìte si, že threshold=0 vypíná druhý faktor. </p>

<hr size=2 width="100%" align=center>

<h2><a name=acknowledge>Podìkování</a></h2>

<p>Rád bych
podìkoval Thomasovi Danielovi ('manono')  za jeho cennou pomoc bìhem vývoje
tohoto softwaru. Provedl nejen nìkolik cenných návrhù a poukazoval na
užiteèné zdroje, ale provedl muèivé testování na obtížných streamech
a spouštìl porovnávací testy s jinými dostupnými softwary pro odstraòování roztøepení (prokládání). </p>

<p>Darryl Andrews poskytl cennou pomoc ve specifikaci a testování
nových funkcí ve verzi 4.00. </p>

<p>Klaus Post ('sh0dan') poskytl nìkteré kódy a nápady pro nízkoúrovòovou
optimalizaci YV12 kódu. </p>

<p>Èlenové fóra na doom9.org poskytly velkou pomoc a pøízeò. </p>

<hr size=2 width="100%" align=center>

<p>Copyright &copy; 2003-2008, Donald A. Graft, All Rights Reserved.</p>

<p>Pro aktualizace a další filtry/nástroje, navštivte mou webovou stránku:<br>
<a href="http://neuron2.net/" target="_top">http://neuron2.net/</a>
</p>

<p><kbd>$English Date: 2004/08/13 21:57:25 $</kbd></p>
<p><kbd>Èeský pøeklad:18.3.2009</kbd></p>
</body>

</html>
