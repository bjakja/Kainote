<html>
<head>
<title>TTempSmooth</title>
<link rel="stylesheet" type="text/css" href="../../avisynth.css">
<!--
Automatically generated, don't change:
$Id: ttempSmooth.htm,v 1.1 2010/02/27 14:50:14 wilbertd Exp $
-->
</head>
<body>
<h1>TTempSmooth</h1>
<h2>Pøehled</h2>
<b>autor:</b>    tritical
<br><b>verze:</b>        0.9.4<br>
<b>stáhnout:</b>   <a href="http://bengal.missouri.edu/~kes25c/">http://bengal.missouri.edu/~kes25c/</a>,
<a href="http://avisynth.org/warpenterprises/">http://avisynth.org/warpenterprises/</a>
<br><b>kategorie:</b> Èasové vyhlazovaèe
<br><b>požadavky:</b>&nbsp;
<ul>
  <li>YV12 &amp; YUY2 Barevné prostøedí</li>
</ul>

<p><b>licence:</b> GPL</p>

<hr size=2 width="100%" align=center>

<!-- #EndTemplate -->
<h2>Popis</h2>
<p>      TTempSmooth je pohybovì adaptivní (pracuje jen ve statických èástech obrazu), èasový vyhlazovací filtr.  TTempSmoothF je rychlejší (50-75%)
verzí TTempSmooth, která nemá parametry lmdiff/cmdiff (je shodný s chodem
TTempSmooth, ve kterém jsou lmdiff/mdiffC nastaveny tak, že se rovnají nebo jsou vìtší než LThresh-1/CThresh-1).</p>
<h3>Syntaxe</h3>
<p><code>TTempSmooth</code> (clip, int <var>&quot;maxr&quot;</var>, int <var>&quot;lthresh&quot;</var>, int <var>&quot;cthresh&quot;</var>,
int <var>&quot;lmdiff&quot;</var>, int <var>&quot;cmdiff&quot;</var>, int <var>&quot;strength&quot;</var>, float <var>&quot;scthresh&quot;</var>,
bool <var>&quot;fp&quot;</var>, int <var>&quot;vis_blur&quot;</var>, bool <var>&quot;debug&quot;</var>, bool <var>&quot;interlaced&quot;</var>, PClip <var>&quot;pfclip&quot;</var>)<br>
<br>
<code>TTempSmoothF</code> (clip, int <var>&quot;maxr&quot;</var>, int <var>&quot;lthresh&quot;</var>, int <var>&quot;cthresh&quot;</var>, float <var>&quot;scthresh&quot;</var>,
bool <var>&quot;fp&quot;</var>, int <var>&quot;vis_blur&quot;</var>, bool <var>&quot;debug&quot;</var>, bool <var>&quot;interlaced&quot;</var>, PClip <var>&quot;pfclip&quot;</var>)</p>
<h3>Parametry</h3>
<p><var>   maxd</var> -  (maximální èasový-temporal prùmìr)</p>
<p>Toto nastavuje maximální èasový rádius. TTempSmooth ostatnì automaticky mìní
      použitý rádius... toto nastavuje maximální meze.  Možné hodnoty jsou 1 až 7.  Pøi 1 TTempSmooth
      zahrne pixely z (maximálnì) 1 snímku dále nebo blíže od støedního (celkem budou uvažovány 3 snímky
      vèetnì aktuálního).  Pøi 7 by byly zahrnuty pixely ze snímkù vzdálených až o 7 snímkù
      (celkem bude uvažováno 15 snímkù).  S kontrolou pohybu není moc nebezpeèné
      jeho vyšší nastavení, je to v podstatì možnost upøednostnìní kvality proti rychlosti.  Nižší nastavení jsou rychlejší, zatímco
      vìtší hodnoty smìøují k vytvoøení stabilnìjšího obrazu.</p>
<p>výchozí = 3 (int)</p>
<p><var>LThresh</var>/<var>CThresh</var> - (prahové hodnoty jasu - luma a barevnosti - chroma)</p>
<p>Vaše standardní prahové hodnoty jasu a barevnosti pro rozdíly pixelù mezi snímky.  lthresh je
      pro jas a cthresh je pro barevnost. TTempSmooth kontroluje vzdálenost 2 snímkù a také jednoho snímku,
      takže mohou být obvykle nastaveny mírnì výše, než u vìtšiny jiných èasových vyhlazovaèù a poøád
      se ještì vyhnete artefaktùm.  Platná nastavení jsou od 1 do 256.  Také je dùležitý fakt, že dokud je
      "mdiff" menší než hodnota prahové hodnoty tak pixely s vìtšími rozdíly od pùvodního
      budou mít menší váhu v prùmìru.  Tak dokonce i s dost velkými prahovými hodnotami, právì pixely pod
      prahovými hodnotami nebudou mít velkou váhu, a to napomáhá snížení artefaktù.</p>
<p>výchozí - <var>LThresh</var> = 4  (int)<br>
<var>CThresh</var> = 5  (int)</p>
<p><var>lmdiff</var>/<var>cmdiff</var> - (stálý rozdíl) - (použito jen v TTempSmooth ne v TTempSmoothF)</p>
<p>Jakékoli pixely s rozdíly menšími nebo rovnými "mdiff" budou maximálnì rozmazány.  Obvykle
      èím vìtší rozdíl od støedového pixelu tím menší váha v prùmìru.  mdiff nutí
      TTempSmooth zpracovávat pixely takové, které se liší ménì nebo stejnì jako "mdiff" tak, jako by mìli
      rozdíl 0.  Jinými slovy, posouvá bod nulového rozdílu dále. Nastavte "mdiff"
      na hodnotu rovnou nebo vìtší než lthresh-1/cthresh-1 aby jste úplnì vypnuly vážení pøevráceného (1/x)) rozdílu pixelu.
      Platné hodnoty jsou od 0 do 255. lmdiff je pro jas a cmdiff je pro
      barevnost.</p>
<p>      výchozí - <var>lmdiff</var> = 2  (int)<br>
<var>cmdiff</var> = 3 (int)</p>

<p>   <var>strength</var> - (souèinitel prostorové váhy)</p>

<p>      TTempSmooth používá vážení pøevrácené hodnoty vzdálenosti pøi rozhodování jakou váhu dát každé
      hodnotì pixelu.  Možnost strength vám umožní posunout místo spádu od støedu, což dává
      silnìjší efekt vyhlazení a pøidává váhu vnìjším pixelùm. Dìlá pro prostorové vážení to samé co dìlá
      mdiff pro váhu rozdílu. Možná nastavení jsou:<br>


          1 =    0.13 0.14 0.16 0.20 0.25 0.33 0.50 1.00 0.50 0.33 0.25 0.20 0.16 0.14 0.13<br>
          2 =    0.14 0.16 0.20 0.25 0.33 0.50 1.00 1.00 1.00 0.50 0.33 0.25 0.20 0.16 0.14<br>
          3 =    0.16 0.20 0.25 0.33 0.50 1.00 1.00 1.00 1.00 1.00 0.50 0.33 0.25 0.20 0.16<br>
          4 =    0.20 0.25 0.33 0.50 1.00 1.00 1.00 1.00 1.00 1.00 1.00 0.50 0.33 0.25 0.20<br>
          5 =    0.25 0.33 0.50 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 0.50 0.33 0.25<br>
          6 =    0.33 0.50 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 0.50 0.33<br>
          7 =    0.50 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 0.50<br>
          8 =    1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00</p>


<p>      Zobrazené hodnoty jsou pro maxr = 7, pøi použití menších hodnot rádiusu váhy mimo
      tento rozsah jsou jednoduše vypuštìny.  Tedy, nastavení strength na hodnotu maxr+1 nebo vyšší
      vám dá stejné prostorové vážení všech pixelù v jádøe.  Verze pøed v0.9.3 vždy
      používali vážení podle strength = 2.</p>

      <p>výchozí =  2 (int)</p>


<p>   <var>scthresh</var> - (prahová hodnota zmìny scény)

<p>      Standardní prahová hodnota zmìny scény jako procento maximální možné zmìny jasové plochy.
      Dobrý rozsah hodnot je mezi 8 a 15.  Použijte ladící (debug) výstup, aby jste se podívali na to, které snímky
      jsou detekovány jako zmìna scény a na hodnotu rozdílu vypoètenou pro každý snímek.  Nastavte scthresh
      na <= 0.0 pro vypnutí detekce zmìny scény.</p>

<p>      výchozí =  12.0 (float)</p>


<p>   <var>fp</var> - (regulární nebo zakotvené zprùmìrování podle poètu)</p>

<p>      Nastavení fp=true pøidá nìjakou váhu nedodanou vnìjším pixelùm zpìt k centrálnímu pixelu,
      pøi výpoètu finální hodnoty.  Nastavení fp=false prostì udìlá normální vážený prùmìr.
      fp=true je mnohem lepší pro redukci artefaktù v oblastech pohybu a obvykle vytváøí celkovì lepší výsledky.</p>

<p>      výchozí =  true (bool)</p>


<p>   <var>vis_blur</var> - (vizualizace rozmazání)</p>

<p>       Tato možnost vysílá mapu, která ukazuje které pixely jsou filtrovány a jak moc. Pro
      každý pixel poèítá jaká váha byla dána vnìjším pixelùm (t.j. ne centrálnímu pixelu)
      z maximální možné váhy, která by vnìjším pixelùm mohla být dána.  Pak pøevádí tento výsledek
      do rozsahu 0 až 255, takže oblasti kde nebyla dána žádná váha vnìjším pixelùm
      (neprovádí se žádné vyhlazování) zobrazí èernì, a oblasti, kde byla dána celá možná váha
      vnìjším pixelùm (maximální vyhlazení) zobrazuje bíle.  Jinými slovy,
      èím temnìjší hodnota tím slabší vyhlazení, èím svìtlejší hodnota, tím silnìjší vyhlazení.
      Možné hodnoty jsou:</p>

<p>          0 - bez mapy<br>
          1 - mapa vyhlazení plochy Y<br>
          2 - mapa vyhlazení plochy U<br>
          3 - mapa vyhlazení plochy V

<p>      výchozí =  0 (int)</p>


<p>   <var>debug</var> - (ladící výstup)</p>

<p>      Pokud je zapnutý, TTempSmooth vysílá statistiky zmìny scény a ukazuje, které snímky byly
      detekovány jako snímky zmìny scény.  To je zamýšleno jako pomoc pøi nastavování parametru scthresh.  Pro zobrazení výstupu
      mùžete použít <a href=http://www.sysinternals.com/Utilities/DebugView.html><cite>"DebugView" ze sysinternals.</cite></a></p>

<p>      výchozí =  false (bool)</p>


<p>   <var>interlaced</var> - (prokládaný yv12 vstup)</p>

<p>      Nastavte ho na true, pokud používáte ttempsmooth na prokládaný YV12 klip... jinak ho nastavujte
      na false.  Toto nastavení ovlivní jen YV12 vstup a nemá vliv na vstup YUY2 protože
      prokládané YUY2 nepotøebuje žádné zvláštní zacházení.

<p>      výchozí =  false (bool)</p>

<p>   <var>pfclip</var> -  (pøedfiltrovaný klip k použití rozdílù pixelù)</p>

      Toto vám umožní zadat jiný klip pro ttempsmooth k použití pøi výpoètu
      rozdílù pixelù.  Platí to pro kontrolu prahových hodnot pohybu, výpoèet
      pøevrácených vah rozdílù, a detekci zmìny scén.  V zásadì, pfclip bude
      použit pro urèení vah zprùmìrované hodnoty, ale budou použity na
      hodnoty pùvodních pixelù klipu.  Tato možnost je podobná jako "ppClip" v
      TBilateral... nìkteré možné návrhy pro pøedfiltrování jsou gaussovo rozmazání, adaptivní
      median, atd...

<p>      výchozí =  NULL (PClip)</p>


<h2>Seznam zmìn</h2>
<p>   11/17/2005  v0.9.4<br>

       + Added interlaced parameter (fix incorrect interlaced yv12 chroma handling)<br>
       + Added pfclip parameter<br>
       + Added MMX scenechange routines (for those that don't have an isse capable cpu)<br>
       - Changed default scthresh value to 12.0<br>

<p>   07/20/2005  v0.9.3<br>

       + Added scenechange detection<br>
       + Added visualize blur option<br>
       + Added back in fp and the ability to do a regular average (was removed in v0.9.1)<br>
       + Added debug output<br>
       + Added strength option to adjust spatial weights<br>
       + Rewrote all the code (vastly reduced the total source size)<br>
       + 10% speed increase for TTempSmooth()<br>
       - Changed to maxr instead of maxd, increased max possible radius value from 4 to 7
             and decreased the min possible radius from 2 to 1<br>
       - Changed some of the parameter names (mdiff=lmdiff,mdiffc=cmdiff)<br>
       - Changed default lmdiff/cmdiff values to 2/3 (were 3/4)<br>


<p>   07/29/2004  v0.9.2<br>
       - Modified buffering code to remove unneeded BitBlts()... small speed up (5-10%).<br>
       - Request frames in linear order when completely refilling buffer.<br>
       - Added TTempSmoothF(), a faster version of TTempSmooth (50-75%), which is equivalent to using
TTempSmooth() with mdiff/mdiffC equal to or greater then LThresh/CThresh.  Thus, it only takes
maxd, LThresh, and CThresh as parameters.<br>
       - Changed defaults to be less aggressive.<br>
       - There were no quality changes, the same settings will produce the same output as in v0.9.1.</p>
<p>06/15/2004  v0.9.1<br>
       - Fixed a major bug that caused incorrect calculation of the chroma differences, rendering the
filter completely useless.<br>
       - Got rid of amount/amountC and fixedPoint parameters.  They were unneeded in the case of amount
and fixedPoint = true always worked better then false...<br>
       - Small speed up<br>
       - Changed some of the defaults.</p>
<p>06/11/2004  v0.9<br>
       - Initial Release</p>
<p><kbd>$English Date: 2006/05/14 16:32:16 $</kbd>
<p><kbd>Èeský pøeklad:16.4.2009</kbd>
</p>
</body>
</html>
