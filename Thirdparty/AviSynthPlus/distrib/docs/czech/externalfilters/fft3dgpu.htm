<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<title>FFT3D GPU filter</title>
		<link rel="stylesheet" type="text/css" href="../../avisynth.css">
		<!--
Automatically generated, don't change:
$Id: fft3dgpu.htm,v 1.1 2010/02/27 14:50:14 wilbertd Exp $
-->
	</head>
	<body>
		<h1>FFT3DGPU</h1>
		<h2>Pøehled</h2>
		<p><b>autor:</b> Tonny Petersen aka tsp
			<br>
			<b>verze:</b> 0.8.2<br>
			<b>stáhnout:</b> <a href="http://www.avisynth.org/tsp/">http://www.avisynth.org/tsp/</a>,
<A href="http://avisynth.org/warpenterprises/">http://avisynth.org/warpenterprises/</A<br>
			<b>kategorie:</b> Rùzné pluginy<br>
			<b>poadavky:</b> YV12 nebo YUY2 Barevné prostøedí, Directx 9 graphické karty<br>
			<b>license:</b> GPL</p>
		<h2>Úvod</h2>
		<p>FFT3dGPU je GPU verze filtru <a href="fft3dfilter.htm">FFT3DFilter</a> jeho autorem je Fizick.
			Algoritmus (Rychlá Fourierova Transformace, odšumìní) je vìtšinou stejnı.
			V souèasnosti není implementován následující: podpora pro&nbsp;model šumu.
		</p>
		<p>V této verzi je zpracováván následující snímek zatímco se èeká na GPU a skonèí svou práci.
			To znamená, e filtry pøed fft3dGPU pracují paralelnì s ním.
		</p>
		<h3>Instalace:
		</h3>
		<p>Pro pouití tohoto filtru potøebujete directx 9.0c nebo lepší a grafickou kartu
			podporující directx 9 v hardware. To je pøinejmenším ATI Radeon 95xx nebo Nvidia
			Geforce fx 5xxx. Doporuèuje se Geforce 6xxx nebo lepší. Pokud jste stáhli
			instalátor, prostì ho spuste a máte hotovo, jinak zkopírujte fft3dgpu.hlsl a
			FFT3dGPU.dll do stejné sloky z <a href="http://www.7-zip.org">7-zip</a>
			archivu, také nainstalujte poslední verzi directx (duben 2006 nebo pozdìjší).
			Mùete ho získat <A href="http:www.microsoft.comdownloadsdetails.aspxFamilyID='fb73d860-5af1-45e5-bac0-9bc7a5254203&amp;DisplayLang=en">
				<CITE>zde</CITE></A> nebo rozbalit soubor d3dx9_30.dll (nezahrnutı v
			archivu, ale zahrnutı v instalátoru) do sloky c:\windows\system32 . Instalátor nakopíruje
			d3dx9_30.dll na správné místo, co znamená e by nemìlo bıt nezbytné
			instalovat directx pokud u máte Directx 9c nainstalovanı.</p>

		<h3>Syntaxe</h3>
		<p><code>FFT3DGPU</code>(<var>clip, float "sigma", float "beta", int "bw", int "bh",
				int "bt", float "sharpen", int "plane", int "mode", int "bordersize", int
				"precision", bool "NVPerf", float "degrid", float "scutoff", float "svr", float
				"smin", float "smax", float "kratio", int "ow", int "oh", int "wintype" , int
				"interlaced", float "sigma2", float "sigma3", float "sigma4", bool "oldfft" </var>
			)</p>
		<h3>
			Parametry funkcí:</h3>
		<p><var>clip</var>: klip, kterı má bıt filtrován. Klip musí bıt YV12 nebo YUY2.</p>
		<p><var>sigma</var> a <var>beta</var> mají stejnı vıznam jako ve fft3dfilter.
			Vıchozí=2.</p>
		<P><var>sigma2, sigma3, sigma4</var> Pokud jsou zadány, ovládají hodnotu sigma pro
			nejvyšší (sigma) a nejniší frekvenci (sigma4). Vıchozí=sigma</P>
		<p><var>bw,bh</var>: šíøka bloku a vıška bloku. Mìly by bıt mocninou èísla 2 t.j. platné hodnoty
			jsou 4,8,16,32,64,128,256,512 (všimnìte si, e pro nejlepší vısledek by bw mìlo bıt vìtší
			ne 4). Vıchozí=32</p>
		<p><var>bt</var>: reim  bt=-1 jen zostøuje, bt=0 kalman filtrování, bt=1 je 2d
			filtrování, bt=2 pouívá aktuální a pøedchozí snímek, bt=3 pouívá pøedchozí
			aktuální a následující snímek, bt=4 pouívá dva pøedchozí snímky, aktuální a následující
			snímek. Vıchozí=3</p>
		<P><var>sharpen</var>: kladné hodnoty zostøují obraz, záporné hodnoty rozmazávají
			obraz. 0 vypíná zostøování. Vıchozí=0.</P>
		<p><var>plane</var>: 0 filtruje jas-luma, 1,2 a 3 jsou stejné a filtrují barevnost-chroma (jak U tak V). 4
			filtruje jak jas tak barevnost. Default 0.</p>
		<p><var>mode</var>: 0 pøekrytí jen 1:1. Toto je rychlejší, ale vytváøí artefakty pøi
			vysokıch hodnotách sigma.<br>
			mode=1 pøekrytí blokù 2:1. Toto je pomalejší, ale vytváøí ménì artefaktù.<br>
			mode=2 znovu 1:1 pøekrytí, ale s pøídavnım pruhem. To sniuje hranièní (pruhové) artefakty
			viditelné pøi mode=0. Rychlost je mezi reimy 0 a 1.<br>
			Kalman(bt=0) pracuje dobøe pøi mode=0. Vıchozí 1</p>
		<p><var>bordersize</var>: pouito jen v reimu 2. Definuje velikost pruhu.
			Vıchozí je 1.</p>
		<p><var>precision</var>: 0: pouívá se 16 bitová desetinná pøesnost (polovièní pøesnost),<br>
			1: pouívá se 32 bitová desetinná (celá pøesnost) pro fft a 16 bitová desetinná pro
			wienner/kalman a zostøování.<br>
			2: vdy se pouívá 32 bitová desetinná.<br>
			Pouití 16 bitové desetinné zvyšuje vıkon, ale sniuje pøesnost. U
			Geforce 7800GT precision=0 je ~1.5 krát rychlejší ne u pøesnosti 2. Vıchozí=0.</p>
		<p><var>NVPerf</var>: Zapíná podporu pro NVPerfHUD
			(http://developer.nvidia.com/object/nvperfhud_home.html). Vıchozí false.
		</p>
		<p><var>degrid</var>: Zapíná redukci møíek. Dobøe pracuje jen v mode=1. Neredukuje møíkovitost u
			Kalman filtru (ale redukuje møíky u zostøování (pokud je zapnutı) po
			kalman filtru). Vıchozí 1.0 pro mode=1, 0.0 pro mode=0 nebo 2</p>
		<p><var>scutoff, svr, smin, smax</var>:Stejnı vıznam jako u fft3dfilter. Ovládá
			zostøování. Vıchozí scutoff=0.3, svr=1.0, smin=4.0, smax=20.0</p>
		<p><var>kratio</var>: stejné jako u fft3dfilter. Ovládá prahovou hodnotu pro resetování
			Kalman filtru. Vıchozí 2.0</p>
		<p><var>ow,oh</var>: toto pracuje jen v reimu mode=1. Zadává jak velké je pøekrytí
			mezi bloky. Velikost pøekrytí musí bıt menší nebo rovno polovinì
			velikosi bloku. Ow musí bıt sudé. Vıchozí: ow=bw/2 ,oh=bh/2</p>
		<P><var>wintype</var>: Mìní typ okna funkcí analızy a syntézy. Stejné jako
			v fft3dfilter.</P>
		<P><var>interlaced</var>: Nastavte na true pro oddìlené filtrování kadého pole.
			Vıchozí=false.</P>
		<P><var>oldfft</var>: Nastavte na true pro pouití starého kódu fft (pouitého ve verzi 0.6.2 a
			niších), false pro pouití nového kódu fft. Pokud je nedefinováno, fft3dgpu pouije nejrychlejší
			kód.<br>
		</P>
		<h3>FAQ - èasto kladené otázky:</h3>
		<h4>
			Q: Co znamená, kdy mi vyskoèí nepøedpokládaná chyba (Unexpected error) oznamující
			Error Code: D3DERR_OUTOFVIDEOMEMORY.</h4>
		<p>
			A: To znamená, e fft3dgpu potøebuje více pamìti grafické karty ne je dostupné.
			Take buï musíte koupit lepší nebo zkusit sníit rozlišení,
			pøesnost, bt,bh,bw,ow,oh nebo pouít usefloat16=true nebo mode 0 nebo 2</p>
		<h4>
			Q: Filtr mi poøád nechce pracovat</h4>
		<p>
			A: Zkuste aktualizovat na novìjší ovladaèe (<a href="http://www.ati.com">ati radeon</a>
			nebo <a href="http://www.nvidia.com">nvidia geforce</a>). Zkontrolujte jestli je vaše karta
			podporována (viz níe). Pokud to nevede k øešení problému, napište mi zprávu o chybách (bug report)
			(viz <a href="#support">podpora</a>) kam zapište i pouitı skript, pouitı program
			a typ GPU, verzi ovladaèe, verzi windows a verzi directx kterou pouíváte.</p>
		<h4>
			Q: Jaké nastavení dá stejnı vısledek jako fft3dfilter?</h4>
		<p>
			A:fft3dGPU(mode=1,precision=2) je podobné jako fft3dfilter() ale všimnìte si prosím
			odlišnıch vıchozích hodnot pro bw,ow,bh,ow
			<h4>
				Q: Jsou nìjaké rozdíly mezi fft3dfilter a fft3dgpu?</h4>
		<p>
			A: Nìkteré funkce z fft3dfilter ještì stále chybí v fft3dGPU.
			<h4>
				Q: Proè je fft3dGPU tak pomalı ve srovnání s fft3dfilter?</h4>
		<p>
			A: buï máte pomalou grafickou kartu jako Geforce FX 5200 nebo
			ji nevyuíváte v dobì, kdy cpu provádí tìké enkódování (jako XviD/DivX)
			<h4>
				Q: Jak mám pouít NVPerfHUD?</h4>
		<p>
			A: nastavte NVperf=true a pouijte tento pøíkaz pøíkazového øádku nebo vytvoøte zástupce pro jeho spuštìní:
			"CESTA K NVPerfHUD\NVPerfHUD.exe" "CESTA K VIRTUALDUB\virtualdub.exe" "CESTA K
			AVS\test.avs" a zapnìte "force NON PURE device"
			<h4>
				Q: Dostávám tuto chybovou zprávu: "Only pixelshader 2.0 or greater supported"</h4>
		<p>
			A: Je to proto, e potøebujete grafickou kartu, která má hardwarovou podporu pro Directx
			9.
			<h4>
				Následující karty nebudou pracovat:</h4>
			<pre>
Nvidia:
TNT
TNT2
Geforce 256
GeForce2 Ultra, Ti, Pro,MX,Go and GTS
Geforce3 Ti 200, Ti 500
GeForce4 Ti, MX, Go

Ati:
Radeon 7xxx
Radeon 8xxx
Radeon 90xx
Radeon 92xx

Matrox:
G2xx
G4xx
G5xx
moná Parhelia
</pre>
			<h4>Následující by mìli pracovat:</h4>
			<pre> Nvidia:

Geforce FX 5xxx
Geforce 6xxx
Geforce 7xxx

Ati:
Radeon 9500
Radeon 9550
Radeon 9600
Radeon 9700
Radeon 9800
Radeon Xxxx
Radeon X1xxx

</pre>
			<PRE>

kde x znamená jakákoli cifra.
</PRE>
			<h3 id="support">Podpora:
			</h3>
		<p>
			<a href="http://forum.doom9.org/showthread.php?t=89941"><cite>Toto vlákno</cite></a>
			na fóru doom9 nebo moje emailová adresa (tsp (zavináè) person.dk).</p>
		<h3>Na dopracování:</h3>
		<p>
			&nbsp;(moná) podpora modelu šumu. Oprava všech hloupıch chyb. Pøidání verze directx
			9.0b .
		</p>
		<h3>Seznam zmìn:</h3>
		<ul>
			<li>
			0.1 first release. Buggy and used Brook
			<li>
			0.2 sigma should now work like fft3dfilter
			<li>
			0.3 Rewrote the code to use Directx 9.0 directly and support for 16 bit float
			increasing performance and stability.
			<li>
			0.31 Fixed bug causing aliased edges.
			<li>
			0.4 Added sharpen, mode 1,2, reduceCPU and multithreading
			<li>
			0.41 Fixed bug when calculating PSD.
			<li>
			0.42 Fixed memory leak when reloading
			<li>
			0.43 Fixed bug that caused coruptions on the Geforce FX cards and some more
			memory leaks. Added more comments to the sourcecode and small performance
			improvement in the shaders. Also added support for directx 9.0b
			<li>
			0.44 fft3dgpu can now reset a lost device and continue work. The direcx 9.0b
			version should work now.
			<li>
			0.45 fixed bug when filtering the chromaplane and mode=0 or 2 crashed the
			filter.
			<li>
			0.46 fixed lockups on hyperthread enabled machines(hopefull). Also fixed
			infinite loop when closing WMP 6.4.
			<li>
			0.46.1 fixed issue with nvperf=true causing fft3dgpu to lock up. Added a FAQ
			section to this file.
			<li>
			0.47 fixed bug with corrupted frames after reseting a lost device. Renamed the
			readme.txt to fft3dgpu.txt. Uses a newer version of DirectX 9.0c so please
			_read the install instructions_!!!
			<li>
			0.5 Added Kalman, sharpening, bt=4, degrid from fft3dfilter. Renamed ps.hlsl to
			fft3dgpu.hlsl. Rewrote some of the code. Added new bugs.
			<li>
			0.5a fixed bug with bt=2. Only file changed is fft3dgpu.hlsl
			<li>
			0.51FixedbugwithparametersafterNVPerfwasshifted.iedegrid=scutoff,scutoff=svr.
			Improved download speed from GPU. Geforce fx 5xxx now works with Kalman filter.

			<li>
			0.6 Added wintypes, plane=4 and variable overlap size (ow,oh). Change
			useFloat16 to precision. Changed default value for mode to 1
			<li>
			0.6.1 variable overlap now works on the geforce fx 5xxx. Default value for mode
			is 1 now.
			<li>
			0.6.2 bugfix: Degrid works better and vertical banding is gone when using mode
			1. Right edge artifacts gone when using non mod 8 width and plane&gt;0.
			<LI>
			0.6.3 New fft code. Should improve performance when using larger blocksize and
			precision= 2(by up to 70%). Fixed bug with HC 0.17 crashing. New html
			doc(thanks Fizicks for creating this).
			<LI>
			0.6.4 new fft code should now work with ati cards.
			<LI>
			0.7 Added sigma2,sigma3 and sigma4 and support for interlaced filtering. Uses
			the fastest fft code now.
			<LI>
			0.8&nbsp;Added support for YUY2 colorspace.&nbsp;If not enough GPU memory is
			available the least used texture will be swapped to system memory.
			<LI>
			0.8.1 Fixed crash when recovering lost device with plane=4 (thanks Fizick).
			Changed default for bt to 3 as ff3dfilter
			<LI>
				0.8.2 Fixed crash when recovering lost device with interlaced=true (thanks
				Fizick)&nbsp;and recovering lost device with bt=0 and sigma2,3,4 =sigma.</LI>
		</ul>
		<p>Zdrojovı kód vydán pod GPL - viz copying.txt</p>
		<p><kbd>$English Date: 2006/08/25 02:18:25 $</kbd></p>
	  <p><kbd>Èeskı pøeklad:20.4.2009</kbd></p>
	</body>
</html>