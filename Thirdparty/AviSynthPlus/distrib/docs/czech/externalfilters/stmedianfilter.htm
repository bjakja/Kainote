<html>
<head>
<title>STMedianFilter</title>
<link rel="stylesheet" type="text/css" href="../../avisynth.css">
<!--
Automatically generated, don't change:
$Id: stmedianfilter.htm,v 1.1 2010/02/27 14:50:14 wilbertd Exp $
-->
</head>
<body>
<h1>STMedianFilter</h1>
<h2>Pøehled</h2>
<b>autor:</b>   Tom Barry
<br><b>verze:</b>      0.1.0.3<br>
<b>stáhnout:</b>  <a href="http://www6.impacthosting.com/trbarry/downloads.htm">http://www6.impacthosting.com/trbarry/downloads.htm</a>, <a href="http://www.avisynth.org/warpenterprises/">http://www.avisynth.org/warpenterprises/</a>
<br><b>kategorie:</b>  Prostorovì èasové vyhlazovaèe
<br><b>požadavky:</b>&nbsp;
<ul>
  <li>YV12 &amp; YUY2 Barevné prostøedí</li>
  <li>SSEMMX (=ISSE) podpora</li>
</ul>

<p><b>licence:</b> GPL</p>

<hr size=2 width="100%" align=center>

<!-- #EndTemplate -->
<h2>Popis</h2>
<p>STMedianFilter je (mírnì pohybovì kompenzovaný) prostorovì/èasový mediánový filtr.</p>
<p>Je docela jemnozrnný, používá jen sousední pixely v prostoru a èasu, takže se dívá na
26 sousedních pozic pro filtrování každé pozice. Nyní filtruje jak jas, tak barevnost, ale filtrování
barevnosti je trochu více omezené, jak je popsáno níže.</p>
<p><b>POUŽITÍ - Pro použití prostì:</b></p>
<p>1) Umístìte STMedianFilter.dll do nìjaké složky. Mùžete ho získat z
<a href="http://www.trbarry.com/STMedianFilter.zip"> www.trbarry.com/STMedianFilter.zip</a></p>
<p>2) Ve vašem Avisynth souboru použijte pøíkazy podobné tìmto;</p>
<pre>LoadPlugin(&quot;F:\STMedianFilter\STMedianFilter.dll&quot;)
Avisource(&quot;D:\kdekoli\mujsoubor.avi&quot;)
STMedianFilter(S_FilterThreshHold, S_EdgeThreshHold, T_FilterThreshHold, T_MotionThreshHold)&nbsp;</pre>
<p>Samozøejmì nahraïte jména souborù a složek vašimi vlastními a doplòte celoèíselné hodnoty parametrù.
Platné hodnoty pro každý z nich jsou od 0 do 255.</p>
<p>S a T výše oznaèují prostorový (spatial) a èasový (temporal) režim.</p>
<p>Dobrým startovním místem pro hodnoty parametrù by mohly být</p>
<pre>STMedianFilter(8,15,4,7)</pre>
<p>Vìtší hodnoty zpùsobí více filtrování, ale více artefaktù.
<h3>Popis parametrù:</h3>
<p><var>S_FilterThreshHold</var> - nefiltruje pixel prostorovì, pokud by se mìnil více než o tuto hodnotu.
Vìtší hodnoty mohou zpùsobit ztrátu pìknì podrobných obrysù, ale není to pøíliš citlivé.</p>
<p><var>S_EdgeThreshHold</var> - nefiltruje pixel prostorovì, pokud se hodnoty na hranách mìní více
než tato hodnota. Zdá se, že je docela shovívavý, takže mùže být podle pøání hodnì zvyšován.</p>
<p><var>T_FilterThreshHold</var> - nefiltruje pixel èasovì, pokud by se mìnil více než o tuto hodnotu.
Vìtší hodnoty zpùsobí duchy. Nenastavujte pøes 5-10 , aby jste se vyhnuli duchùm.</p>
<p><var>T_MotionThreshHold</var> - nefiltruje pixel èasovì, pokud se nekompenzované hodnoty pohybu mìní více než
o tuto hodnotu. Nenastavujte pøes 10, aby jste se vyhnuli duchùm.</p>
<h2>Metoda práce</h2>
<p>Pokud tomu správnì rozumím, jednoduchý mediánový filtr je prostì oøezávací krok, kde se nastavuje hodnota tak,
aby nevyšla z urèitých mezí - vysoké i nízké jeho sousedù.&nbsp;
</p>
<p>Napøíklad, pokud jste mìli 3 pixely v øádku, které mìli hodnoty &lt;5,8,7> mohli by jste oøíznout støedovou hodnotu
aby nebyla mimo mezí - zespoda 5 , nebo shora 7,
takže by jste ho nastavili na 7.&nbsp;
</p>
<p>Teï si pøedstavte, že jste mìli malý 3x3 video monitor, podobný ploše Rubikovy kostky. Obraz pøedchozího snímku
byl spodní vrstvou kostky, aktuální snímek
byl støední vrstvou, následující snímek byl horní.&nbsp;
</p>
<p>Pak aktuální støedový pixel by byl právì ve støedu Rubikovy kostky a bylo by 13 zpùsobù
jakými by jste mohli nakreslit èáru pøes nìj s jeho nejbližšími dvìma sousedy.
</p>
<p>Já jsem porovnal každý z tìchto párù sousedù, abych vidìl který pár nejvíce odpovídal hodnotì.
Použil jsem tento pár k oøíznutí hodnoty støedového pixelu.
</p>
<p>Také jsem oøíznul hodnotu pixelu jestliže:
</p>
<p>1) by to nezmìnilo hodnotu pixelu o více než hodnotu nìkterého parametru FilterThreshold, a také;
</p>
<p>2) množství 'nekompenzovaného pohybu' (soulad s hodnotami sousedù) byl menší než hodnota parametru MotionThreshHold.
</p>
<h2>Seznam zmìn
</h2>
<p>2004/08/19  v.0.1.0.3	Released by Fizick 2005/01/30
</p>
<ul>
  <li>Fixed bug with spatial filter radius for YV12</li>
</ul>
<p>2004/08/10  V 0.1.0.2 	by Fizick  - not public</p>
<ul>
  <li>Fix one main bug (for both YUY2 and YV12 modes):<br>
			in all previous versions light pixels were not filtered,<br>
			both S_EdgeThreshHold and T_MotionThreshHold did not work also.</li>
</ul>
<p>2003/06/22  V 0.1.0.1 by Tom Barry</p>
<ul>
  <li>Fix bug affecting YV12 only</li>
</ul>
<p>2003/01/22  V 0.1.0.0 by Tom Barry</p>
<ul>
  <li>Remove chroma filtering again. Add YV12 support. Use Pluginit2<br>
    Also remove Horizontal parms, add them to spatial.<br>
			Hopefully fix purple tint.</li>
</ul>
<p>2002/08/03  V 0.0.3.0 by Tom Barry</p>
<ul>
  <li>Add some chroma filtering</li>
</ul>
<p>2002/08/03  V 0.0.2.0 by Tom Barry</p>
<ul>
  <li>Bugs, Split out spatial, Temporal, Horizontal user parms</li>
</ul>
<p>2002/08/02  V 0.0.1.0 by Tom Barry</p>
<ul>
  <li>Initial test release&nbsp;</li>
</ul>
<p><kbd>$English Date: 2005/07/10 16:11:01 $</kbd>
<p><kbd>Èeský pøeklad:23.4.2009</kbd>
</p>
</body>
</html>
