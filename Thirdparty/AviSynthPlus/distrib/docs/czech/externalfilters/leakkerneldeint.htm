<html>
<head>
<title>LeakKernelDeint</title>
<link rel="stylesheet" type="text/css" href="../../avisynth.css">
<!--
Automatically generated, don't change:
$Id: leakkerneldeint.htm,v 1.1 2010/02/27 14:50:14 wilbertd Exp $
-->
</head>
<body>
<h1>LeakKernelDeint</h1>
<h2>Pøehled</h2>
<b>autor:</b>  Leak
<br><b>verze:</b>     1.5.4 (založen na filtru KernelDeint 1.4.0 od Donalda Grafta)<br>
<b>stáhnout:</b>  <a href="http://leak.no-ip.org/AviSynth/LeakKernelDeint/">http://leak.no-ip.org/AviSynth/LeakKernelDeint/</a>,
<a href="http://www.avisynth.org/warpenterprises/">http://www.avisynth.org/warpenterprises/</a>
<br><b>kategorie:</b>  Odstraòování prokládání &amp; pulldown
<br><b>požadavky:</b>  YV12 &amp; YUY2 &amp; RGB Barevné prostøedí<br>
<b>licence:</b> GPL

<hr size=2 width="100%" align=center>

<h3>Úvod</h3>
<p>Tento filtr odstraòuje prokládání (deinterlace) použitím jádrového (kernel) pøístupu. Dává znaèné zlepšení vertikálního rozlišení
v deinterlovaných oblastech ve srovnání s jednoduchým zahozením pole.</p>
<p>Jestliže nastavíte prahovou hodnotu (threshold) na 0, mùžete obdržet výsledky zcela bez artefaktù (díky nedostatku mezí),
ale s mnohem menší ztrátou vertikálního rozlišení než jednoduché zahození pole. Pro optimální rozlišení však nastavte pohybovou prahovou hodnotu,
která umožní, aby statické oblasti obrazu nebyly dotèeny. V takovém režimu, na jádøe založené odstranìní prokládání pohyblivých oblastí
zachová jejich vertikální rozlišení ve srovnání s jednoduchou interpolací.</p>
<p>Navíc tato verze obsahuje funkci zvanou LeakKernelBob() (adaptovanou ze Scharfis_brainova skriptu stejného jména),
která odstraòuje prokládání s plnou frekvencí snímkù, t.j. pøevrací 50 polí za sekundu na 50 snímkù za sekundu.</p>
<p>Filtr pøijímá RGB, YUY2, nebo YV12 vstup.</p>
<p>Pro použití tohoto filtru jako post-processoru pro Telecide(), použijte následující
skript:
<pre>Telecide(..., post=1, hints=true)
LeakKernelDeint(...)</pre>
<hr size="2" width="100%" align="center">
<h3>Syntaxe funkce</h3>
<p>LeakKernelDeint() a LeakKernelBob() berou následující jmenné parametry:</p>
<p><var>order</var> (0-1, výchozí není!) Tento parametr definuje poøadí
polí v klipu. Je velmi dùležité nastavit ho správnì. Použijte order=0 pro
spodní pole první (bottom field first - bff). Použijte order=1 pro horní pole
první (top field first - tff). Musíte
zadat poøadí; LeakKernelDeint hodí výjimku, když vynecháte tento parametr.</p>
<p>Pro správné rendrování je zásadní nastavit správnì poøadí polí.
Protože správné nastavení je tak dùležité, dùraznì se vám doporuèuje nedìlat
jen domìnky o poøadí polí v klipu, ale radìji ovìøit poøadí polí
použitím následující procedury.</p>
<p>Pro urèení poøadí polí, vytvoøte skript Avisynthu, který pøedá syrový
klip bez jakéhokoliv zpracování. Pokud to bylo AVI, tak by bylo použito prostì
AviSource(). Pro vaše pøíklady, použijeme AviSource(). Pøidejte do skriptu
øádek k oddìlení polí  s použitím horního pole jako prvního, následovnì:
<pre>AviSource(&quot;your_clip.avi&quot;)
AssumeTFF().SeparateFields()</pre>
<p>Nyní pøedejte skript VirtualDubu a najdìte nìjakou oblast s pohybem. Jednoduše krokujte
vpøed podle pohybu. Všímejte si jestli pohyb postupuje stále vpøed
jak by mìl, nebo jestli skáèe zpìt a vpøed. Napøíklad,
jestliže je poøadí polí špatné, objekt pohybující se stále zleva doprava
by se pohnul doprava, pak by skoèil trochu zpìt doleva, pak znovu doprava,
atd. Jestliže je poøadí polí správné, pohybuje se neustále doprava.</p>
<p>Jestliže je pohyb správný pøi AssumeTFF().SeparateFields(), pak vaše poøadí polí
má horní pole první a vy musíte nastavit order=1. Pokud je pohyb nesprávný,
pak vaše poøadí polí má spodní pole první a vy musíte nastavit order=0. Jestliže chcete
dvojitou kontrolu, mùžete použít AssumeBFF.SeparateFields() pro kontrolu
správné operace pro spodní pole první.</p>
<p><var>threshold</var> (0-255, výchozí 10) Tento parametr definuje prahovou hodnotu
&quot;pohybu&quot; . Pohyblivé oblasti jsou jádrovì deinterlovány zatímco
nepohyblivé oblasti jsou nedotèeny. Použijte parametr <i>map</i> k upravení parametru
<i>threshold</i> tak, že právì jen prokládané oblasti snímku jsou deinterlovány.</p>
<p><var>sharp</var> (true/false, výchozí false) Když je tento parametr nastaven na
true, vybere jádro, které poskytne lepší vertikální rozlišení a provede
urèité zostøení videa. Pro mírnìjší zostøení, ale také menší vertikální
rozlišení nastavte tento parametr na false.</p>
<p><var>twoway</var> (true/false, výchozí false) Když je tento parametr nastaven na
true, vybere jádro, které zahrnuje jak pøedchozí tak následující pole
pro odstranìní prokládání. Když je nastaven na false, jádro zahrnuje jen pøedchozí
pole. Poslednì zmínìné one-way (jednoprùchodové) jádro je rychlejší, jiskrnìjší, a dává ménì smíchání
(tato poslední výhoda dìlá výkon filtru lepší na animovaném materiálu). Parametr <i>twoway</i>
je zahrnut v pøípadì, kdy chce uživatel dosáhnout chování døívìjších verzí.</p>
<p><var>map</var> (true/false, výchozí false) Když je tento parametr nastaven na
true, zobrazí se oblasti, které jsou &quot;pohybové&quot; urèené pomocí parametu <i>threshold</i>
a které budou jádrovì-deinterlovány. Použijte tento parametr pro asistenci pøi
nastavování parametru <i>threshold</i></p>
<p><var>linked</var> (true/false, výchozí false; jen YV12/YUY2) Když je tento parametr nastaven na true, propojuje masku pohybu
barevnostní a jasové plochy, takže odstraòování prokládání bere stejná místa v obou plochách. Použijte ho, když stále dostáváte zbytkové artefakty
jen v èásteènì deinterlovaných oblastech, ale vìtšina barevnostních artefaktù verze 1.4.0 byla eliminována použitím kombinované mapy pohybu
pro obì plochy barevnosti, a proto je výchozí false. Pravdìpodobnì také nechcete nastavit tento parametr na true, pokud má vaše video nìjaké duhy,
protože odstraòování prokládání v jasové ploše v takových bodech degraduje kvalitu videa více než by to mohli degradovat jakékoli (jiné) artefakty barevnosti.</p>
<p><var>debug</var> (true/false, výchozí false) Když je tento parametr nastaven na
true, zapíná ladící (debug) výstup pøes DebugView utilitu. V souèasnosti ukazuje
èíslo verze filtru a jestliže jsou z Telecide() pøítomné údaje hints, jestli jsou snímky
oznaèené jako progresivní nebo prokládané. Pokud hints chybí,
ladící výstup zobrazí všechny snímky jako prokládané. Také získáte údaje hints,
jestliže vaše snímky mají rùzné výšky, což vypne MMX optimalizace, dokonce i když si nejsem jistý, jestli to mùže v AviSynthu nastat.</p>
<p><var>forceCPU</var> (0-5, výchozí 0) Tento parametr donutí filtr použít jen zadané optimalizace:<br>
* 0 ... autodetekce<br>
* 1 ... jen kód C++<br>
    * 2 ... Použít MMX kód, kde je to dostupné<br>
    * 3 ... Použít MMX &amp; Integer SSE kód, kde je to dostupné<br>
    * 4 ... Použít MMX &amp; SSE kód, kde je to dostupné<br>
    * 5 ... Použít MMX &amp; SSE &amp; SSE2 kód, kde je to dostupné</p>
<p>NB: protože kód v souèasnosti používá jen MMX, použití hodnot vyšších než 2 nepovede k urychlení.&nbsp;</p>
<hr size="2" width="100%" align="center">
<h3>Seznam zmìn</h3>
<p>1.5.0</p>
<ul>
  <li>Initial release&nbsp;</li>
</ul>
<p>1.5.1</p>
<ul>
  <li>Fixed: don't read beyond the end of frames</li>
  <li>Changed: Small speedup by reading coefficients from memory&nbsp;</li>
</ul>
<p>1.5.2</p>
<ul>
  <li>Fixed: motion mask was b0rked due to field order being swapped when building it</li>
  <li>Fixed: threshold was off by one</li>
  <li>Fixed: map=true Y-values clamped to 235&nbsp;</li>
</ul>
<p>1.5.3</p>
<ul>
  <li>Changed: renamed the plugin to LeakKernelDeint on neuron2's request</li>
  <li>Fixed: implicit "AssumeFrameBased" when using LeakKernelBob&nbsp;</li>
</ul>
<p>1.5.4</p>
<ul>
  <li>Fixed: LeakKernelBob's cache range was too low, which slowed it down considerably</li>
</ul>
<p>Copyright © 2004-2005 Kurt B. Prünner</p>
<p>Mé webové stránky:<br>
<a href="http://leak.no-ip.org/AviSynth/">http://leak.no-ip.org/AviSynth/</a><br>
<br>
    Stránky Donalda Grafta:<br>
<a href="http://neuron2.net/">    http://neuron2.net/</a></p>
<p><kbd>$English Date: 2005/10/01 23:09:51 $</kbd></p>
<p><kbd>Èeský pøeklad:29.4.2009</kbd></p>
</body>
</html>
