<html>
<head>
<title>MPEG2Dec3</title>
<link rel="stylesheet" type="text/css" href="../../avisynth.css">
<!--
Automatically generated, don't change:
$Id: mpeg2dec3.htm,v 1.1 2010/02/27 14:50:14 wilbertd Exp $
-->
</head>
<body>
<h1>MPEG2Dec3</h1>
<h2>Pøehled</h2>
<b>autoøi:</b>  MarcFD, Nic, trbarry, Sh0dan a další
<br><b>verze:</b>  1.10.1<br>
<b>kategorie:</b> MPEG Dekodér (zdrojový) plugin
<br><b>stáhnout:</b>  <a href="http://www.avisynth.org/warpenterprises/">http://www.avisynth.org/warpenterprises/</a>
<br><b>požadavky:</b> &nbsp;
<hr>
<h2>Popis</h2>
Tento filtr je schopen vysílat barevné formáty RGB, YUY2 a YV12.<br>
Je to MPEG-2 dekodér a je schopen dekódovat jakékoli MPEG-2 streamy èitelné v
dvd2avi 1.76 / 1.77.3 / 1.83x (a dalších). Také podporuje hdtv streamy,
ale k tomu potøebujete <a href="http://www.trbarry.com/DVD2AVIT3.zip"><cite>dvd2avi 1.83.5</cite></a>.
(Toto je upravená verze MPEG2Dec2 ze save-oe (smart audio video encoder).)<br>
Další doplòky jsou (napøíklad): YV12, YUY2 a RGB32 výstup (aèkoliv se doporuèuje
použít rutiny pøevodù barev AviSynthu), øízení prokládání,
integrovaný PostProcessing, Jasové filtrování, atd.
<h2>Pøíklady použití filtrù z pluginu MPEG2Dec3:</h2>
	(všechny øádky avisynth skriptu zde jsou jen pøíklady)<br>
	Nejdøíve vložte následující øádek do vašeho .avs skriptu :
<pre>LoadPlugin (&quot;MPEG2Dec3.dll&quot;)</pre>

	<h3>Základní použití MPEG2Dec3</h3>
		Pro provedení plošného (plain) YV12 dekódování.
<pre>MPEG2Source(&quot;dvd.d2v&quot;)</pre>
<p>Pro použití Post Processingu : zde jen deblokování.</p>
<pre>MPEG2Source(&quot;dvd.d2v&quot;, cpu=4)</pre>
<p>pro prokládané zdroje je lepší použít na polích založený (Field Based) Post Processing.</p>
<pre>MPEG2Source(&quot;dvd.d2v&quot;, cpu=4, iPP=true)</pre>
<p>pokud máte intel Pentium 4 cpu, mùžete vynutit sse2 idct.</p>
<pre>MPEG2Source(&quot;dvd.d2v&quot;, idct=5)</pre>
<p>Pro použití uživatelem nastaveného post processingu : zde jen odstranìní zvonìní hran (deringing).</p>
<pre>MPEG2Source(&quot;dvd.d2v&quot;, cpu2=&quot;ooooxx&quot;)</pre>
<h3>Pøevody barevného prostøedí</h3>
		Pro pøevod do YUY2.
<pre>MPEG2Source(&quot;dvd.d2v&quot;)
YV12toYUY2()</pre>
<p>Pro pøevod progresivního zdroje do YUY2.</p>
<pre>MPEG2Source(&quot;dvd.d2v&quot;)
YV12toYUY2(interlaced=false)</pre>
<p>Pro pøevod do RGB24.</p>
<pre>MPEG2Source(&quot;dvd.d2v&quot;)
YV12toRGB24()
FlipVertical() #YV12-&gt;BGR24 pøevod nativnì pøevrací obraz</pre>
<p>Pro pøevod progresivního zdroje do RGB24.</p>
<pre>MPEG2Source(&quot;dvd.d2v&quot;)
YV12toRGB24(interlaced=false)
FlipVertical() #YV12-&gt;BGR24 pøevod nativnì pøevrací obraz</pre>
	<h3>Užiteèné doplòkové YV12 filtry</h3>
		Pro ztmavení jasové složky.
<pre>LumaFilter(-10, 0.9)</pre>
<p>Pro zesvìtlení jasové složky.</p>
<pre>LumaFilter(+10, 1.1)</pre>
<p>Samozøejmì mùžete upravit nastavení jak chcete.<br>
		Pro více informací se podívejte do kapitoly Syntaxe.</p>
<h2>Syntaxe filtrù pluginu MPEG2Dec3:</h2>
	<h3>MPEG2Source</h3>
<p><code>MPEG2Source</code> (<var>string "d2v", int "cpu" int "idct" bool "iPP", int "moderate_h", int "moderate_v", bool "showQ", bool "fastMC", string
&quot;cpu2&quot;</var>)</p>
<p><var>d2v</var> : <br>
	Váš DVD2AVI projektový soubor. (*.d2v)</p>
<p><var>cpu</var> : 0 až 6.<br>
DivX dekodér - úroveò nastavení cpu.<br>
	-	0 : Žádný PP<br>
	- 1 : DEBLOCK_Y_H<br>
	- 2 : DEBLOCK_Y_H, DEBLOCK_Y_V<br>
	- 3 : DEBLOCK_Y_H, DEBLOCK_Y_V, DEBLOCK_C_H<br>
	- 4 : DEBLOCK_Y_H, DEBLOCK_Y_V, DEBLOCK_C_H, DEBLOCK_C_V<br>
	- 5 : DEBLOCK_Y_H, DEBLOCK_Y_V, DEBLOCK_C_H, DEBLOCK_C_V, DERING_Y<br>
	- 6 : DEBLOCK_Y_H, DEBLOCK_Y_V, DEBLOCK_C_H, DEBLOCK_C_V, DERING_Y, DERING_C<br>
  (Y=jas (luma) C=barevnost (chroma), H=horizontální, V=vertikální)<br>
	výchozí : 0</p>
<p><var>idct</var> : 1 až 5.<br>
iDCT : použitý iDCT algoritmus.<br>
	0 : výchozí hodnota (v .d2v souboru)<br>
	1 : 32 bit MMX<br>
	2 : 32 bit SSEMMX<br>
	3 : 64 bit FPU<br>
	4 : 64 bit IEEE-1180 Reference<br>
	5 : 32 bit SSE2 (pro P4)<br>
	6 : Skal's SSEMMX iDCT (nejrychlejší)<br>
	7 : SimpleiDCT (velmi pøesná iDCT z projektu XviD)<br>
	výchozí : 0</p>
<p><var>iPP</var> :<br>
Pro použití na polích založeného (Field-Based) Post-Processingu.<br>
	je to lepší pokud chcete odstranit prokládání<br>
	- True : na polích založené - Field based<br>
	- False : na obrazu založené - Image based (výchozí)</p>
<p><var>moderate_h</var>, <var>moderate_v</var> :<br>
	Síla jemného vyladìní postprocessingu.<br>
	Menší hodnoty jsou silnìjší. Použijte s opatrností.<br>
	výchozí : moderate_h=20, moderate_v=40</p>
<p><var>showQ</var> :<br>
Pro prohlédnutí kvantizerù použitých na každý MB.<br>
	Zábavný nástroj k pøehrávání ^^<br>
	výchozí : false</p>
<p><var>fastMC</var> :<br>
Vladùv kód pro kompenzaci rychlého pohybu.<br>
	Velmi malé urychlení, a snižuje pøesnost,<br>
	je zde pro testovací úèely, a mohl by být v pøíštích verzích odstranìn,<br>
	jen pro ssemmx kompatibilní cpu.<br>
	výchozí : false</p>
<p><var>cpu2</var> :<br>
Uživatelské nastavení cpu,<br>
	potøebujete zadat 6 znakový øetìzec. Každý køížek (x)<br>
	by zapnul odpovídající funkci postprocessingu :</p>
<pre>pøíklad :
&quot;oxoxox&quot;
123456
by zapnul jen PP (postprocesing) barevnosti (chroma)</pre>
<p>1 : luma horizontal deblocking<br>
	2 : luma vertical deblocking<br>
	3 : chroma horizontal deblocking<br>
	4 : chroma vertical deblocking<br>
	5 : luma deringing<br>
	6 : chroma deringing<br>
	výchozí : " " (vypnuto)</p>
<h3>LumaFilter</h3>
<code>LumaFilter</code> (<var>clip, integer "lumoff", float &quot;lumgain&quot;</var>)
<p>pøevod je : yy = (y*lumgain)+lumoff</p>
<p><var>lumoff</var> : <br>
	Posun jasu.<br>
	výchozí = -2 (for iago ^^)</p>
<p><var>lumgain</var> : <br>
	Zesílení jasu.<br>
	výchozí = 1</p>
<h3>YV12toRGB24</h3>
<code>YV12toRGB24</code> (<var>clip, bool "interlaced", bool &quot;TVscale&quot;</var>)
<p>pøevod YV12->RBG24 nativnì pøevrací obraz<br>
	Použijte potom <a href="../corefilters/flip.htm">FlipVertical</a></p>
<p><var>interlaced</var> :<br>
Nastavte ho na true, pokud je váš zdroj prokládaný,<br>
	pro zachování správného prokládání barevnosti.<br>
	Pokud máte progresivní stream, použití false dá<br>
	ostøejší a reálnìjší barvy<br>
	výchozí : true</p>
<p><var>TVscale</var> :<br>
Stejné nastavení jako v DVD2AVI.<br>
	Mùže být obráceno. Zkuste s a nebo bez a ponechte to co upøednostòujete<br>
	výchozí : false</p>
<h3>YV12toYUY2</h3>
<p><code>YV12toYUY2</code> (<var>clip, bool &quot;interlaced&quot;, bool
&quot;tff&quot;</var>)</p>
<p><var>interlaced</var> :<br>
Nastavte ho na true pokud je váš zdroj prokládaný,<br>
	pro zachování správného prokládání barevnosti.<br>
	Pokud máte progresivní stream, použití false dá<br>
	ostøejší a reálnìjší barvy<br>
	výchozí : true</p>
<p><var>tff</var> :<br>
Horní pole první (Top Field First).<br>
	Nastavte ho na false pokud máte spodní pole první (Bottom Field First).<br>
	Výchozí : true</p>
<h3>BlindPP</h3>
<p><code>BlindPP</code> (<var>clip, int "quant", int "cpu", str "cpu2", bool "iPP", int "moderate_h", int
&quot;moderate_v&quot;</var>)</p>
<p>Pro deblokování (Deblock) a odstranìní zvonìní hran (Dering) v jakýchkoli typech DCT-enkódovaných zdrojích.<br>
	Samozøejmì, ménì pøesné než dekodér s intergrovaným PP, ale stále velmi efektivní,<br>
	potøebuje YV12 vstup.</p>
<p><var>quant</var> :<br>
Emulovaný kvantizér,<br>
	použije vyšší hodnotu ke zvýšení agresivity.<br>
	Použitím hodnoty blízko zdroji, umožní velmi pøesný postprocesing.<br>
	Výchozí : 2</p>
<p><var>cpu</var>, <var>cpu2</var>, <var>iPP</var>, <var>moderate_h</var>, <var>moderate_v</var>
:<br>
Stejné nastavení jako v MPEG2Source postprocesingu.
	výchozí : cpu=6, cpu2=&quot;&quot;, iPP=false, moderate_h=20, moderate_v=40</p>
    <h2>Historie</h2>
      <b>based on MPEG2Dec2 (save-oe CVS 28.09.2002)</b>
<ul>
  <li><u>betas versions (1 to 6)</u>
    <ul>
      <li>Added Nic's Post Processing with Field-Based PP</li>
      <li>Overrided iDCT / luma filtering choice</li>
      <li>Fixed Luma filtering MMX code (3 bugs at least)</li>
      <li>YV12-&gt;YUY2 Convertion optimised (+10 % speed)</li>
      <li>a PP bug fixed. a bit slower now.</li>
      <li>trbarry's SSE2 optimisation disabled.</li>
      <li>Added showQ debugging trigger</li>
      <li>Added vlad's new MC (3dnow/ssemmx) / re-writed ssemmx</li>
      <li>Added working MMX memory transfer for seeking (+3% speed)</li>
      <li>Added Interlaced Upsampling support<br>
      </li>
    </ul>
  </li>
  <li>
      <u>v 0.9 (09.11.02)</u>
    <ul>
      <li>heavy code cleaning</li>
      <li>redesigned the whole Avisynth interface</li>
      <li>YV12 support</li>
      <li>RGB24 support</li>
      <li>other misc stuff<br>
      </li>
    </ul>
  </li>
  <li>
      <u>v 0.91 (10.11.02)</u>
    <ul>
      <li>cleaned a bit more the source</li>
      <li>added MPEG2Dec3.def default settings loading (like don's filters)</li>
      <li>bff mode in SeparateFieldsYV12<br>
      </li>
    </ul>
  </li>
  <li>
      <u>v 0.92 (17.11.02)</u>
    <ul>
      <li>code released</li>
      <li>blindPP implemented<br>
      </li>
    </ul>
  </li>
  <li>
      <u>v 0.93 (25.11.02)</u>
    <ul>
      <li>total YV12 code convertion...</li>
      <li>...who fixed YV12 bugs</li>
      <li>less memory is needed</li>
      <li>fast MMX copy (faster seeking)<br>
      </li>
    </ul>
  </li>
  <li>
      <u>v 0.94 (08.12.02)</u>
    <ul>
      <li>very little bugfix<br>
      </li>
    </ul>
  </li>
  <li>
      <u>v 1.00 (19.01.03)</u>
    <ul>
      <li>final version</li>
      <li>i squashed all bugs i were aware of<br>
      </li>
    </ul>
  </li>
  <li>
      <u>v 1.01 (unknown) - trbarry</u>
    <ul>
      <li>Fixed HDTV bug (0x21 PID hardcoded)<br>
      </li>
    </ul>
  </li>
  <li>
      <u>v 1.02 (12.05.03) - Nic</u>
    <ul>
      <li>aligned malloc done different<br>
      </li>
    </ul>
  </li>
  <li>
      <u>v 1.03 (12.05.03) - Nic</u>
    <ul>
      <li>
        Now supports both DVD2AVI 1.77.3 D2V Files and 1.76 ones<br>
      </li>
    </ul>
  </li>
  <li>
      <u>v 1.04 (12.05.03) - Nic</u>
    <ul>
      <li>Removed another memory leak, slightly quicker<br>
      </li>
    </ul>
  </li>
  <li>
      <u>v 1.05a (12.05.03) - trbarry</u>
    <ul>
      <li>
        trbarry test version for optimisations<br>
      </li>
    </ul>
  </li>
  <li>
      <u>v 1.06 (24.05.03)</u>
    <ul>
      <li>
        Nic: Added 2 new iDCT's Skal's (fastest!, idct=6) &amp; SimpleiDCT (very
        accurate, idct=7)</li>
      <li>Nic: Support for external use of MPEG2Dec3.dll without AviSynth added
        back in<br>
        (See Source code for example.zip and GetPic example)</li>
      <li>trbarry: Added new Add_Block optimisations as well as optimised Block
        Decoding for SSE2 machines</li>
      <li>sh0dan: Uses AviSynth's fast BitBlt for mem copys where possible</li>
      <li>Nic: General optimisations :) Faster now on all machines tested.<br>
      </li>
    </ul>
  </li>
  <li>
      <u>v 1.07 (6.06.03)</u>
    <ul>
      <li>
        Nic &amp; Sh0dan: Bug Fixes, better stability on broken streams<br>
      </li>
    </ul>
  </li>
  <li>
      <u>v 1.08 (8.06.03)</u>
    <ul>
      <li>
        trbarry: Optimised Simple_iDCT, lots faster now :)</li>
      <li>Nic: added CPUCheck elsewhere, forgot to fix Lumafilter last time (Thanx
        ARDA!), robUx4 helped me make simple_idct into a fastcall<br>
      </li>
    </ul>
  </li>
  <li>
      <u>v 1.09 (26.07.03)</u>
    <ul>
      <li>Nic: Now skal's Sparse iDCT is used instead for idct=6 (fastest!)</li>
      <li>Nic: Added the Luminance_Filter from DVD2AVI 1.77.3, for when
        Luminance_Filter is used in the .d2v<br>
      </li>
    </ul>
  </li>
</ul>
<ul>
  <li>
      <u>v 1.10 (28.07.03)</u>
  </li>
    <ul>
      <li>Nic: Damn! There was a problem with the Luminance filter and 1.77.3 D2V
        files. Fixed!<br>
      </li>
    </ul>
  <li>
      <u>v 1.10.1 (23.05.05)</u>
    <ul>
      <li>Kassandro: removed assumption &quot;luma pitch = luma width&quot;.
        Needed for AviSynth v2.57 and beyond.</li>
    </ul>
  </li>
</ul>
    <h2>Podìkování</h2>
      Chia-chen Kuo, autor DVD2AVI<br>
      Peter Gubanov, autor MMX/SSEMMX iDCT<br>
      Dmitry Rozhdestvensky, autor SSE2 iDCT<br>
      Miha Peternel, autor Floating Point a Reference iDCT<br>
      Mathias Born, autor MPEG2Dec
<p>Zvláštní podìkování pro Nic, za Post Processing, který umožnil MPEG2Dec3</p>
<p>1.01 a výše: Nic, trbarry, sh0dan<br>
      Díky Skal za použití jeho iDCT (http://skal.planet-d.net)</p>
<p><kbd>$English Date: 2005/08/11 21:11:50 $</kbd></p>
<p><kbd>Èeský pøeklad:3.5.2009</kbd></p>
</body>
</html>