<html>
<head>
<title>TBilateral</title>
<link rel="stylesheet" type="text/css" href="../../avisynth.css">
<!--
Automatically generated, don't change:
$Id: tbilateral.htm,v 1.1 2010/02/27 14:50:14 wilbertd Exp $
-->
</head>
<body>
<h1>TBilateral</h1>
<h2>Pøehled</h2>
<b>autor:</b>    tritical
<br><b>verze:</b>       0.9.11<br>
<b>stáhnout:</b>   <a href="http://bengal.missouri.edu/~kes25c/">http://bengal.missouri.edu/~kes25c/</a>,
<a href="http://www.avisynth.org/warpenterprises/">http://www.avisynth.org/warpenterprises/</a>
<br><b>kategorie:</b>   Prostorové vyhlazovaèe
<br><b>poadavky:</b>&nbsp;
<ul>
  <li>YV12 &amp; YUY2 Barevné prostøedí</li>
</ul>

<p><b>licence:</b> GPL</p>

<hr size=2 width="100%" align=center>

<!-- #EndTemplate -->
<h2>Popis</h2>
<p>      TBilateral je prostorovı vyhlazovací filtr, kterı pouívá dvousmìrovı (bilateral) filtraèní algoritmus.
Dìlá hezké vyhlazování a pøitom zachovává strukturu obrazu.  V souèasnosti podporuje barevná prostøedí YV12 a YUY2&nbsp;<br>
   a má gui s náhledem pro pomoc pøi nastavování.</p>
<h3>Syntaxe</h3>
<p><code>TBilateral</code> (clip, int <var>&quot;diameterL&quot;</var>, int <var>&quot;diameterC&quot;</var>, float
<var>&quot;sDevL&quot;</var>, float <var>&quot;sDevC&quot;</var>, float <var>&quot;iDevL&quot;</var>, float
<var>&quot;iDevC&quot;</var>,                      float <var>&quot;csL&quot;</var>, float
<var>&quot;csC&quot;</var>, bool <var>&quot;d2&quot;</var>, bool <var>&quot;chroma&quot;</var>, bool
<var>&quot;gui&quot;</var>, PClip <var>&quot;ppClip&quot;</var>, int <var>&quot;kernS&quot;</var>, int
<var>&quot;kernI&quot;</var>, int <var>&quot;resType&quot;</var>)</p>
<h3>PARAMETRY</h3>
<p><var>diameterL</var>/<var>diameterC</var> -  (prostorové prùmìry)</p>
<p>Toto nastavuje velikost prùmìru filtraèního okna.  Vìtší hodnoty znamenají, e více pixelù
bude zahrnuto do prùmìru, ale jsou také pomalejší.  Musí bıt jen liché èíslo vìtší ne 1.<br>
      diameterL je pro jas (luma) a diameterC je pro barevnost (chroma) , pokud je zpracovávána.  Toto musí bıt
menší ne šíøka videa a menší ne vıška videa.</p>
<p>vıchozí - <var>diameterL</var> = 5 (int)<br>
<var>diameterL</var> = 5 (int)</p>
<p><var>sDevL</var>/<var>sDevC</var> - (prostorová (domain) odchylka)</p>
<p>Toto nastavuje prostorové odchylky.  Èím je sDev vìtší, tím menší vliv bude mít vzdálenost na váení pixelù v prùmìru.
To je, jak zvıšíte sDev, vzdálené pixely budou mít vìtší váhu.  sDevL je pro jas a sDevC je pro barevnost.  Musí bıt vìtší ne 0.
Aby jste lépe pochopily tato nastavení, zkuste nastavit iDevL/iDevC na vysoké hodnoty, a pak
      postupnì zvìtšujte sDevL/sDevC od 0 nahoru a pøitom drte iDevL/iDevC konstantní.  Zvyšování tìchto nastavení
zvıší sílu vyhlazování.</p>
<p>vıchozí - <var>sDevL</var> = 1.4  (float)<br>
<var>sDevC</var> = 1.4  (float)</p>
<p><var>iDevL</var>/iDevC - (odchylky intenzity pixelù (rozsah))</p>
<p>Tyto nastavují odchylky intenzity pixelu (nebo odchylky barvy v pøípadì barevnostních ploch).
Èím vìtší je iDev , tím menší vliv bude mít rozdíl pixelu pøi váení pixelù v prùmìru.
To je, kdy zvyšujete iDev, pixely které se velmi liší od aktuálního pixelu budou mít
vìtší váhu.  iDevL je pro jas a iDevC je pro barevnost.  Musí bıt vìtší ne 0.
Zkuste zvyšovat toto nastavení a pøi tom dret sDev/sDevC konstantní, aby jste získali lepší pøedstavu co
dìlají.  Zvyšování tìchto nastavení zvıší sílu vyhlazení.</p>
<p>vıchozí - <var>iDevL</var> = 7.0  (float)<br>
<var>iDevC</var> = 7.0 (float)</p>
<p><var>csL</var>/<var>csC</var> - (souèinitele váhy støedového pixelu)</p>
<p>Tyto hodnoty jsou násobeny prostorovou váenou hodnotou støedovıch pixelù. Hodnota 1 nedìlá
nic, &lt; 1 znamená, e støedovı pixel bude mít menší váhu ne normálnì, > 1 znamená, e støedovı pixel
      bude mít vìtší váhu ne normálnì, 0 nedává støedovému pixelu ádnou váhu.  Musí bıt nejménì
      0.  Nastavení csL/csC to 0 vám dá odšumìní jako v SUSAN.</p>
<p>vıchozí - <var>csL</var> = 1.0  (float)<br>
<var>csC</var> = 1.0  (float)</p>
<p><var>d2</var> - (druhá odvozenina nebo první odvozenina)</p>
<p>Toto nastavení zpùsobí, e TBilateral pouije druhou odvozeninu místo první, kdy provádí
vıpoèty intenzity.  Pouití d2 by mìlo dát lepší vısledky v hladších gradientech nebo èemkoli co
vypadá jako kusovì-lineární model.  Nastavení d2 na false dá lepší vısledky v obrazech,
které mají jednolitì (uniformì) vybarvené oblasti s ostrımi hranami (cokoli co vypadá jako kusovì-konstantní model).<br>
      Skuteènı rozdíl mezi tìmito dvìma není pro vìtšinu zdrojù obvykle velkı.
Efekt je spíše mírnı.</p>
<p>vıchozí - false  (bool)</p>
<p><var>chroma</var> - (zapíná zpracování barevnosti)</p>
<p>Je-li nastaven na true, jsou zpracovány plochy barevnosti. Je-li nastaven na false, tak jsou plochy barevnosti
ze zdroje jednoduše zkopírovány do vıstupního snímku.</p>
<p>vıchozí - true  (bool)</p>
<p><var>gui</var> - (gui rozhraní)</p>
<p>Kdy je nastaven na true, tak se tato instance TBilateral spustí s gui.  Jen jedna instance
TBilateral na skript mùe mít gui.  Gui vám umoní zmìnit hodnoty<br>
      diameterL/diameterC/sDevL/sDevC/iDevL/iDevC/csL/csC/d2/chroma/kernS/kernI/resType (v podstatì
      veškeré nastavení). Gui má také náhled aktualizovanı v reálném èase, kterı vám umoní prohlédnout si efekt
      zmìn, které jste udìlali.</p>
<p>      Gui má však nìkolik omezení. Hodnoty diameterL/diameterC jsou v souèasnosti omezeny
na maximálnì 21 pøi pouití gui rozhraní.  Také posuvníky Dev mají maximální
limity vztaené k tomu, aby umonili pouít posuvníky pro jejich nastavení. Nicménì, tyto
maxima by mìly bıt dostateènì vysoká pro umonìní velmi silného filtrování.</p>
<p>Po nalezení vašeho nastavení mùete zavøít gui kliknutím na tlaèítko "OK".
Ve spodní èásti dialogu Advance je øetìzec, kterı mùete zkopírovat a vloit do vašeho avs
skriptu k duplikování aktuálního nastavení. (POZNÁMKA:  parametr ppClip není nastaven v tomto øetìzci)</p>
<p>vıchozí - false (bool)</p>
<p><var>ppClip</var> - (pøed-zpracovanı klip)</p>
<p>Zadává pøed-filtrovanı klip pro TBilateral, aby z nìj bral hodnoty pixelu pøi provádìní
vıpoètù jasovıch rozdílù.  Obecné doporuèení pro pøed-zpracování (pre-processing) je<br>
      gausovo rozmazání (blur) se standardní odchylkou shodnou jako pøi pouití nastavení sDev.  Pouití
pøedfiltrovaného klipu by mìlo pomoci odstranit impulsní šum (t.j. okolí s velmi <br>
      velkımi rozdíly pixelù), kterého se standardní bilaterální filtrování nedotkne.  To obèas smìøuje
k tvorbì artefaktù, zvláš kolem velmi pìknıch detailù.  Další doporuèení<br>
      pro pøed-zpracování je støedovì-váenı medián nebo adaptivní medián.</p>
<p>vıchozí - NULL (PClip)</p>
<p><var>kernS</var>/<var>kernI</var> - (zóna (prostorová) a rozsah (intenzity) jader)</p>
<p>Toto zadává jaké jádro (kernel) je pouito pro zónové - domain (kernS) váhy a rozsahové (kernI) váhy.  Moné
volby jsou:</p>
<p>0 - Andrews' wave<br>
          1 - El Fallah Ford<br>
          2 - Gaussian<br>
          3 - Huber’s mini-max<br>
          4 - Lorentzian<br>
          5 - Tukey bi-weight<br>
          6 - Linear descent<br>
          7 - Cosine<br>
          8 - Flat<br>
          9 - Inverse</p>
<p>Viz. následující pro popis všech tìchto jader a jejich vlastností:</p>
<p><a href="http://dsp7.ee.uct.ac.za/~jfrancis/publicationsDir/PRASA2003.pdf">http://dsp7.ee.uct.ac.za/~jfrancis/publicationsDir/PRASA2003.pdf</a></p>
<p>Gaussian (monost 2) je jádro pouité bilaterálním filtrem jako vıchozí (nejprve nabídnutım).</p>
<p>vıchozí - 2 (<var>kernS</var>)  (int)<br>
                2 (<var>kernI</var>)</p>
<p><var>resType</var> -</p>
<p>Toto zadává jak jsou váhy a hodnoty pixelu kombinovány pro získání finálního vısledku.
Moné hodnoty:</p>
<p>0 - Mean (váenı prùmìr)<br>
          1 - Median  (váenı median)<br>
          2 - CW-Median  (váenı median + doplòková váha støedového pixelu)<br>
          3 - MLR (vícenásobná lineární regrese) (best fit plane)</p>
<p>Monost 0 (váenı prùmìr) je typ pouitı bilaterálním filtrem jako vıchozí.</p>
<p>vıchozí - 0  (int)</p>
<h2>Seznam zmìn</h2>
<p>05/16/2006  v0.9.11<br>
       + added resType 3, MLR (multiple linear regression)<br>
       + some internal changes and code cleanup<br>
       - fixed a problem with the sse2 yuy2 packed to planar and planar to packed conversions
           that could sometimes (very rarely) cause crashes with yuy2 input<br>
       - fixed IDC_IKERND combobox being set to dropdown instead of dropdownlist<br>
<p>06/23/2005  v0.9.10<br>
       + some optimizations, roughly 15-20% speed increase<br>
<br>
   06/21/2005  v0.9.9<br>
       + Added Inverse kernel (what was called "Linear Descent" in v0.9.8 was, in fact, "Inverse")<br>
       - Fixed a bug in the gui routine that set the sDevL/sDevC slider maximums<br>
<br>
   06/20/2005  v0.9.8<br>
       + Added kernS, kernI, and resType<br>
       + Redid the gui interface<br>
       - Lots of cosmetic fixes for the gui (for some options it wouldn't immediately update on change)<br>
<br>
   05/24/2005<br>
       + Added ppClip parameter and processing<br>
       - Changed some default values<br>
       - Fixed a few thread sync/exit problems with the gui code<br>
<br>
   05/02/2005  v0.9.6<br>
       + Added gui with preview<br>
       + Removed all yuy2 restrictions (d2)<br>
       - Fixed iDev settings and sDev settings being switched when calculating the weight tables (doh!)<br>
<br>
   06/16/2004  v0.9.5<br>
       - Fixed iDevC having an i instead of f inside the function param list and only excepting<br>
            integer values.<br>
<br>
   06/16/2004  v0.9.4<br>
       - Fixed the rouding errors with d2 = true, which could have led to +-2 change in the final<br>
            pixel values<br>
       - The change needed for the rounding fix also sped up d2 = true processing 10-15%<br>
<br>
   06/15/2004  v0.9.3<br>
       - Added d2 and centerScale/centerScaleC parameters.<br>
       - Unrolled yloops, no real speed up, but it did make the code huge...<br>
<br>
   06/12/2004  v0.9.2<br>
       - Unrolled xloops in YV12 and the luma only version of YUY2.  Slight speed up.<br>
<br>
   06/11/2004  v0.9.1<br>
       - Fixed a problem with boundary pixels near the egdes of the picture getting incorrect spatial&nbsp;<br>
            weights.<br>
<br>
   06/11/2004  v0.9.0<br>
       - Initial Release</p>
<h2>Na dopracování</h2>
<p>- oprava chyb podle potøeby<br>
     - Vydání v1.0
<p><kbd>$English Date: 2005/07/10 16:11:01 $</kbd>
</p>
<p><kbd>Èeskı pøeklad:29.6.2009</kbd>
</body>
</html>
