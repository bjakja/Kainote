<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
<title>Layer Avisynth Filter</title>
<link rel="stylesheet" type="text/css" href="../../avisynth.css">
</head>
<body >
<h2><a name="Layer"></a>Layer <em>[yuy2][rgb32]</em></h2>
<p><code>Layer </code>(<var>base_clip, overlay_clip, string "op", int "level",
  int "x", int "y", int "threshold", bool "use_chroma"</var>)</p>
<p>Tento filtr mù¾e pøekrýt dva klipy rùzných velikostí&nbsp;(ale se stejným barevným
  formátem)&nbsp;s pou¾itím rùzných pracovních re¾imù.<br>
     Pro informaci o prùhlednosti pixelu&nbsp; ze 4. kanálu&nbsp;RGB32 (A-&nbsp;neboli
  alfa kanál) je pou¾it jako maska.</p>
<p><var>Base_clip</var>   : klip, který le¾í ní¾e&nbsp;a urèuje velikost a
  v¹echny ostatní vlastnosti výsledného videa a audia.<br>
  <var>Overlay_clip</var>:
klip kterým se pøekrývá spodní klip. Tento klip mù¾e obsahovat&nbsp;vrstvu alfa.<br>
  <var>op</var> : provádìná operace pøekrytí, která mù¾e být: "add", "subtract",
  "lighten", "darken", "fast", "mul"<br>
  <var>level</var>       : 0-257, intenzita&nbsp;provádìné operace.
  0:&nbsp;base_clip se vrací nezmìnìn, 257 (256 pro YUY2): je pou¾ita maximální intenzita<br>
  <var>x, y</var>   : posun pozice&nbsp;overlay_clip<br>
  <var>threshold</var>: pou¾itelné pouze pro&nbsp;"lighten" a "darken"<br>
  <var>use_chroma</var>: pou¾ije barvy z overlay_clip, výchozí je=true. Je-li&nbsp;false je
  pou¾ita pouze jasová slo¾ka&nbsp;(luma).</p>
<p>     V     chování filtru a v povolených parametrech jsou
  rozdíly, a ty závisí na&nbsp;barevném formátu a operaci. Zde jsou podrobnosti:</p>
<ul>
  <li>V YUY2 není maska&nbsp;(alfa-kanálu),
  tak¾e alfa kanál&nbsp;se v¹ude&nbsp;pøedpokládá&nbsp;plnì neprùhledný.<br>
  <li>V RGB32 je&nbsp;alfa&nbsp;kanál klipu&nbsp; <var>overlay_clip</var>  násoben parametrem
  <var>level</var>, tak¾e&nbsp;výsledné alfa =     (alpha_mask * level + 1)
  / 256. To znamená, ¾e pro&nbsp;plnou intenzitu&nbsp;operace musí být&nbsp;alpha 255 a <var>level</var>&nbsp;musí být&nbsp;257.</li>
</ul>
<p>Tyto operátory&nbsp;pracují stejnì v&nbsp;RGB32&nbsp;nebo&nbsp;YUY2:</p>
      <pre>&quot;fast&quot;: <i>use_chroma</i> musí být TRUE, <i>level</i> a <i>threshold</i> se nepou¾ívá.
        Výsledek je jednodu¹e prùmìrem <i>base_clip</i> a <i>overlay_clip</i>.

&quot;add&quot;:  <i>threshold</i> se nepou¾ívá. Rozdíl mezi base_clip a
        overlay_clip je násoben hodnotou alpha a pøièten k base_clip.
          alpha=0 -&gt; je viditelný pouze base_clip,
          alpha=128-&gt; base a overlay jsou smíchány stejnì,
          alpha= 255 -&gt; viditelný pouze overlay.
        Pou¾ívá se formule :-
	  RGB32 :: base += ((overlay-base)*(alpha*level+1)&gt;&gt;8)&gt;&gt;8
	  YUY2  :: base += ((overlay-base)*level)&gt;&gt;8
&quot;subtract&quot;: stejné jako add, ale overlay_clip je pøed tím invertován.</pre>

<p>Tyto operátory, jak se zdá pracují správnì jen v&nbsp;YUY2:</p>

<pre>&quot;mul&quot;: <i>threshold</i>   se nepou¾ívá. base_clip je vybarven
       jako overlay_clip, tak¾e <i>use_chroma</i> by mìlo být TRUE.
       alpha=0 -&gt; viditelný jen base_clip, alpha=  255 -&gt; pøibl.
       stejný jas jako Base, ale s barvami z Overlay

&quot;lighten&quot;: <i>use_chroma</i>   musí být TRUE. Provádí stejnou èinnost
           jako &quot;add&quot;, ale jen kdy¾ je výsledek JASNÌJ©Í (BRIGHTER) ne¾
           base , jinak se pou¾ijí nové hodnoty. S vy¹¹í <i>threshold</i>
           je fungování pravdìpodobnìj¹í, tak¾e s <i>threshold</i>=255
           je to stejné jako &quot;add&quot;, s threshold=0 u base_clip
           je pravdìpodobnìj¹í, ¾e nedojde ke
           zmìnám, v závislosti na rozdílu mezi base_clip a overlay_clip.

&quot;darken&quot;: stejné jako &quot;lighten&quot;, ale funguje pouze
          tehdy, kdy¾ je výsledek TMAV©Í ne¾ base.</pre>

<p><br>
Také se podívejte&nbsp; <A href="../syntax.htm#multiclip" target=_self>sem</A>  na vlastnosti
výsledného klipu.</p>
<p>
</p>
<h2><a name="Mask"></a>Mask
  <em>[rgb32]</em></h2>
<p><code>Mask </code>(<var>clip, mask_clip</var>)</p>
<p>Pou¾ije zadanou alfa-masku&nbsp;na <var>clip</var>,&nbsp;pro pou¾ití s&nbsp; <code>Layer</code>,&nbsp;pøevedením
  &nbsp; <var>mask_clip</var> na èernobílý a vyu¾itím tohoto pro masku (ala-kanál)&nbsp;RGB32.&nbsp;V tomto kanálu&nbsp;"èerná"&nbsp;znamená&nbsp;zcela
  prùhledné,&nbsp;bílá&nbsp;znamená zcela neprùhledné).
</p>
<p>
</p>
<h2><a name="ResetMask"></a>ResetMask <em>[rgb32]</em></h2>
<p><code>ResetMask </code>(<var>clip</var>)</p>
<p>Pou¾ije&nbsp;"plnì neprùhlednou " (to je bílou) alfa-masku&nbsp;na <i>clip</i>, pro pou¾ití s <tt>Layer</tt>.
</p>
<p>  Alfa kanál RGB32-klipu není v¾dy dobøe definován
  (závisí to na zdroji), tento filtr je rychlej¹í zpùsob
  pro pou¾ití&nbsp;v¹ech bílých masek:
</p>
<pre>clip=ResetMask(clip)</pre>
    <p>&nbsp;</p>
<h2><a name="ColorKeyMask"></a>ColorKeyMask
  <em>[rgb32]</em></h2>
<p><code>ColorKeyMask </code>(<var>clip, int color[, int tolB, int tolG, int tolR]</var>)</p>
<p>  Èistí pixely&nbsp;v alfa kanálu srovnáním s&nbsp; <var>color</var> (výchozí je
  èerná). Ka¾dý pixel s barvou, li¹ící se ménì ne¾ (<var>tolB, tolR, tolG</var>) (výchozí
10) je nastaven&nbsp;na prùhledný (to je èerný), jinak zùstává nezmìnìn t.j.&nbsp;NENASTAVUJE
  se jako neprùhledný (není nastaven na bílý,&nbsp;to je dùvod proè&nbsp;by jste mohli
  potøebovat&nbsp;ResetMask&nbsp;pøed pou¾itím tohoto filtru),&nbsp;to umo¾ní&nbsp;nahromadìní masky&nbsp;pro&nbsp;konstrukce s vícenásobným voláním.&nbsp;Kdy¾ <var>tolR</var>&nbsp;nebo <var>tolG</var>&nbsp;nejsou nastaveny,&nbsp;pou¾ijí hodnotu z&nbsp; <var>tolB</var>
      (co¾ odrá¾í&nbsp;staré chování).&nbsp;Obvykle zaèínáte s&nbsp;ResetMask, pak&nbsp;pøipojíte
  nìkolik výzev&nbsp;ColorKeyMask, aby jste udìlali prùhledné otvory&nbsp;kde se nachází zajímavá barva.&nbsp;
  <b>Viz <A href="overlay.htm">Overlay</A> pro pøíklady.</b></p>
<p>Pro verze&nbsp;AviSynthu&nbsp;star¹í
ne¾&nbsp;v2.58,&nbsp;nebyly&nbsp;oddìlené tolerance&nbsp;úrovní pro&nbsp;modrou,&nbsp;zelenou a èervenou. Byla pouze jedna&nbsp;tolerance&nbsp;úrovnì&nbsp;zvaná
  <var>tolerance</var> a&nbsp;byla pou¾ita pro modrou,&nbsp;zelenou a&nbsp;èervenou souèasnì.</p>
<p><kbd>$English Date: 2008/02/06 16:40:23 $</kbd></p>
<P><KBD>Èeský pøeklad:16.10.2008</KBD></P>
<FORM>
  <INPUT TYPE="button" VALUE="Zpìt"
 onClick="history.go(-1)">
</FORM>
</body>
</html>

























