<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
   <title> Avisynth Colorspace Conversion Filter</title>
   <link rel="stylesheet" type="text/css" href="../../avisynth.css">
</head>
<body>
<h2>
<a NAME="ConvertTo"></a>ConvertBackToYUY2 / ConvertToRGB / ConvertToRGB24 /
ConvertToRGB32<br>
ConvertToY8 / ConvertToYUY2 / ConvertToYV12 / ConvertToYV16 / ConvertToYV24 /
ConvertToYV411</h2>
<p><code>ConvertToRGB </code>(<var>clip [, string &quot;matrix&quot;] [, bool
&quot;interlaced&quot;] [, string &quot;chromaplacement&quot;] [, string
&quot;chromaresample&quot;]</var>)<br>
<code>ConvertToRGB24 </code>(<var>clip [, string &quot;matrix&quot;] [, bool
&quot;interlaced&quot;] [, string &quot;chromaplacement&quot;] [, string
&quot;chromaresample&quot;]</var>)<br>
<code>ConvertToRGB32 </code>(<var>clip [, string &quot;matrix&quot;] [, bool
&quot;interlaced&quot;] [, string &quot;chromaplacement&quot;] [, string
&quot;chromaresample&quot;]</var>)<br>
<code>ConvertToY8 </code>(<var>clip [, string &quot;matrix&quot;]</var>)<br>
<code>ConvertToYUY2 </code>(<var>clip [, bool
&quot;interlaced&quot;] [, string &quot;matrix&quot;] [, string &quot;chromaplacement&quot;]
[, string
&quot;chromaresample&quot;]</var>)<code><br>
ConvertToYV411 </code>(<var>clip [, bool
&quot;interlaced&quot;] [, string &quot;matrix&quot;] [, string &quot;chromaplacement&quot;]
[, string
&quot;chromaresample&quot;]</var>)<br>
<code>ConvertToYV12 </code>(<var>clip [, bool
&quot;interlaced&quot;] [, string &quot;matrix&quot;] [, string &quot;chromaplacement&quot;]
[, string
&quot;chromaresample&quot;]</var>)<br>
<code>ConvertToYV16 </code>(<var>clip [, bool
&quot;interlaced&quot;] [, string &quot;matrix&quot;] [, string &quot;chromaplacement&quot;]
[, string
&quot;chromaresample&quot;]</var>)<br>
<code>ConvertToYV24 </code>(<var>clip [, bool
&quot;interlaced&quot;] [, string &quot;matrix&quot;] [, string &quot;chromaplacement&quot;]
[, string
&quot;chromaresample&quot;]</var>)<br>
<code>ConvertBackToYUY2 </code>(<var>clip [, string &quot;matrix&quot;]</var>)</p>
<table border="1" width="67%">
  <tbody>
    <tr>
      <td align="center" width="25%">barevné formáty</td>
      <td align="center" width="25%">planární/prolínaný</td>
      <td align="center" width="34%">rozli¹ení barevnosti (chroma)</td>
    </tr>
    <tr>
      <td width="25%">RGB</td>
      <td width="25%">prolínaný</td>
      <td width="34%">plná barevnost - 4:4:4</td>
    </tr>
    <tr>
      <td width="25%">RGB24</td>
      <td width="25%">prolínaný</td>
      <td width="34%">plná barevnost - 4:4:4</td>
    </tr>
    <tr>
      <td width="25%">RGB32</td>
      <td width="25%">prolínaný</td>
      <td width="34%">plná barevnost - 4:4:4</td>
    </tr>
    <tr>
      <td width="25%">YUY2</td>
      <td width="25%">planární</td>
      <td width="34%">barevnost sdílená mezi 2 pixely - 4:2:2</td>
    </tr>
    <tr>
      <td width="25%">Y8</td>
      <td width="25%">planární/prolínaný</td>
      <td width="34%">¾ádná barevnost - 4:0:0</td>
    </tr>
    <tr>
      <td width="25%">YV411</td>
      <td width="25%">planární</td>
      <td width="34%">barevnost sdílená mezi 4 pixely - 4:1:1</td>
    </tr>
    <tr>
      <td width="25%">YV12</td>
      <td width="25%">planární</td>
      <td width="34%">barevnost sdílená mezi 2x2 pixely - 4:2:0</td>
    </tr>
    <tr>
      <td width="25%">YV16</td>
      <td width="25%">planární</td>
      <td width="34%">barevnost sdílená mezi 2 pixely - 4:2:2</td>
    </tr>
    <tr>
      <td width="25%">YV24</td>
      <td width="25%">planární</td>
      <td width="34%">plná barevnost - 4:4:4</td>
    </tr>
  </tbody>
</table>

<p>
  <var>matrix</var>:&nbsp;Výchozí je Rec601. Ovládá koeficienty barev a násobící koeficienty
  pou¾ívané pøi pøevodech RGB - YUV.
  <ul>
  <li>"Rec601" :&nbsp;Pou¾ívá koeficienty &nbsp;Rec.601 , s úpravou do TV&nbsp;rozsahu [16,235].
  <li>"PC.601" :&nbsp;Pou¾ívá koeficienty&nbsp;Rec.601 , pøi zachování plného rozsahu [0,255].
  <li>"Rec709" : Pou¾ívá koeficienty&nbsp;Rec.709 , s úpravou do TV&nbsp;rozsahu.
  <li>"PC.709" : Pou¾ívá koeficienty&nbsp; Rec.709 , pøi zachování plného rozsahu .</li>
  </ul>
<p>
  <var>interlaced</var>
:&nbsp;Výchozí je false.&nbsp;Pou¾ívá prokládanou&nbsp;strukturu pro&nbsp;YV12 - YUV/RGB barevné pøevody.
</p>
<p><var>chromaplacement</var> (pøidáno ve <em>v2.60</em>): Toto urèuje
umístìní barevnosti pøi pøevádìní do nebo z YV12. Mù¾e to být "MPEG2" (výchozí), "MPEG1" a "DV".
</p>
<p><var>chromaresample</var><var></var> (pøidáno ve <em>v2.60</em>): Toto
urèuje který resizer se pøi pøevodu pou¾ije. Je to pou¾ito, kdy¾ se li¹í rozli¹ení barevnosti
zdroje a cíle. Mohou to být v¹echny resamplery, výchozí je "bicubic".
</p>
<p>AviSynth do <em>v2.50</em> mohl vnitønì pracovat se dvìma barevnými formáty, RGB a YUY2.&nbsp;Od v2.50 AviSynth mù¾e
také&nbsp;se tøetím barevným formátem, YV12. Tyto filtry mezi nimi provádí pøevody. Pokud
je video u¾ v daném formátu, tak prochází pøes filtr beze zmìn. RGB
se v¹ude v této dokumentaci rozumí&nbsp;RGBA = RGB32. <code>ConvertToRGB</code>&nbsp;pøevádí do&nbsp;RGB32,&nbsp;pokud
není vá¹ klip v&nbsp;RGB24.&nbsp;Pokud z nìjakého dùvodu potøebujete&nbsp;24-bitové RGB,&nbsp;pou¾ijte pøímo&nbsp; <code>ConvertToRGB24</code>
 a <code>ConvertToRGB32</code>  pro opaèný pøevod.
<p>Ve <em>v2.60</em> jsou podporovány dal¹í doplnìné formáty: Y8
èernobílý (je jak planární tak prolínaný proto¾e neobsahuje barevnost;
4:0:0), YV411 (planární; YUV 4:1:1), YV16 (planární verze YUY2; 4:2:2) a
YV24 (planární; YUV 4:4:4).
<p>  Syntaxe a&nbsp;práce
  <code>ConvertToRGB24</code> je identická s <code>ConvertToRGB</code>, kromì toho, ¾e výstupní formát&nbsp;je 24-bit; pokud je zdroj&nbsp;RGB32,&nbsp;alfa kanál&nbsp;bude odstranìn.
<p>Od&nbsp;v2.51/v2.52 je doplnìn parametr <var>interlaced</var>    &nbsp;(<var>interlaced</var><i>=</i>false je
základní nastavení).&nbsp;Kdy¾ nastavíte false, tak to znamená, ¾e&nbsp; <var>clip</var>&nbsp;je progresivní, kdy¾ nastavíte&nbsp;true tak to znamená, ¾e&nbsp; <var>clip</var>&nbsp;je prokládaný. Tato volba&nbsp;je pøidána&nbsp;proto, ¾e napøíklad (pøedpokládáme prokládaný klip YV12):
<pre>SeparateFields(clip)
ConvertToYV12
Weave</pre>je&nbsp;pøevzorkovaný nesprávnì. Místo toho je lep¹í pou¾ít:
<pre>ConvertToYV12(clip, interlaced=true)</pre>V¹imnìte
si,&nbsp;¾e nastavení &nbsp; <var>interlaced</var>=
 true&nbsp;pracuje pouze pokud je potøeba pøevodu&nbsp;YV12 &lt;-&gt; YUY2/RGB, jinak
je ignorováno. Více o tom naleznete zde "<A href="../advancedtopics/interlaced_fieldbased.htm">Pøevody barev a prokládané/ na polích zalo¾ené video</A>".
<p>Na rozdíl od toho,&nbsp;co mohou&nbsp;nìkteøí pøedpokládat,&nbsp;není jen jeden&nbsp;zpùsob pøevodu YUV&nbsp;na RGB.&nbsp;V AviSynthu jsou implementovány dva
nejznámìj¹í&nbsp;zpùsoby: Rec.601 a Rec.709 (nazývaných podle jejich oficiálních specifikací).&nbsp;I kdy¾ nebudou
správné ve v¹ech pøípadech, následující by mìlo být správné ve vìt¹inì pøípadù:
<p>První varianta (Rec.601) by mìla být pou¾ita pokud je va¹ím zdrojem&nbsp;DivX/XviD nebo video zachycené
z analogového zaøízení:<pre>ConvertToRGB(clip)</pre>
<p>Druhá varianta (Rec.709) by mìla být pou¾ita&nbsp;pokud je Va¹ím zdrojem DVD&nbsp;nebo HDTV:<pre>ConvertToRGB(clip, matrix=&quot;rec709&quot;)</pre>
<p>
Ve&nbsp; <em>v2.56</em>  , je mo¾ný také opaèný pøevod,&nbsp;napø.</p>
<pre>ConvertToYUY2(clip, matrix=&quot;rec709&quot;) nebo ConvertToYV12(clip, matrix=&quot;rec709&quot;)</pre>
<p>
Ve&nbsp; <em>v2.56</em>, <var>matrix</var>="pc.601" (a <var>matrix</var>= "pc.709") je mo¾né provádìt&nbsp;RGB &lt;-&gt; YUV&nbsp;pøevod pøi zachování jasové slo¾ky,&nbsp;tzn.
RGB [0,255] &lt;-&gt; YUV [0,255] (namísto obvyklého/výchozího RGB [0,255] &lt;-&gt; YUV [16,235]).</p>
<p>
V¹echny filtry VirtualDubu&nbsp;(naètené pomocí&nbsp; <code>LoadVirtualdubPlugin</code>,&nbsp;viz.
<A href="../syntax.htm#Plugins">Plugins</A>) podporují pouze vstup&nbsp;RGB32.</p>
<p><b>RGB24, RGB32:</b> Barvy jsou zaznamenány jako hodnoty&nbsp;èervené, zelené a modré.&nbsp;V RGB32 je&nbsp;zvlá¹tní Alfa&nbsp;kanál pro neprùhlednost. Rozmìr
obrazu mù¾e být libovolný.
<p><b>YUY2:</b> Obraz je zaznamenán
jako&nbsp;hodnota jasu&nbsp;Y a dvì barevné hodnoty&nbsp;U, V. Pro dva vodorovné
pixely&nbsp;je jen jedna barevná hodnota a dvì&nbsp;jasové hodnoty (dvakrát Y,&nbsp;jednou U,&nbsp;jednou V). Proto musí být ¹íøka
násobkem dvou.
<p><b>YV8:</b>  Èernobílý. Stejný jako YV24 bez ploch barevnosti.
<p><b>YV411:</b> Podobný jako YV12 ale jen s jednou hodnotou barevnosti pro
4 pixely (1x4 ètverec). Horizontální rozmìr obrazu musí být násobkem
ètyø.
<p><b>YV12:</b>&nbsp;Stejnì jako&nbsp;YUY2 ale je pouze jedna
barevná&nbsp; hodnota&nbsp;pro 4 pixely (na ètverec 2x2). Oba rozmìry obrazu musí být násobkem dvou, je-li&nbsp;video&nbsp;prokládané
musí být vý¹ka násobkem&nbsp;ètyø proto¾e&nbsp;ètverec 2x2&nbsp;je brán z pole a ne ze snímku.
<p><b>YV16:</b> Stejný jako YUY2 ale planární namísto prolínaného.
<p><b>YV24:</b> Stejný jako YV12/YV16, ale s plnou barevností.
<p>Nìkteré funkce kontrolují&nbsp;omezení
rozmìrù obrazu, nìkteré zaokrouhlují parametry, ale stále mohou vzniknout&nbsp;nìkteré poruchy obrazu nebo&nbsp;chyby programu.
<p>Práce&nbsp;v&nbsp;YUY2&nbsp;je
rychlej¹í&nbsp;ne¾&nbsp;v&nbsp;RGB.
YV12 je dokonce je¹tì rychlej¹í&nbsp;a je to
výchozí&nbsp;(nativní) MPEG formát, tak¾e je zde ménì&nbsp;pøevodù barevných prostøedí.
<p>   Pøevod zpìt a vpøed není bezeztrátový, proto pou¾ívejte co
nejménì pøevodù. Pokud je nutné více pøevodù, pou¾ijte <code>ConvertBackToYUY2</code>
      pro pøevod do&nbsp;YUY2, pokud Vá¹ zdroj&nbsp;u¾ jednou&nbsp;byl
v&nbsp;YUY2. To zmírní rozmazání barev, ale stále se ztrácí èást pøesnosti.
<p>Ve vìt¹inì pøípadù,&nbsp;by filtr <code>ConvertToRGB</code>

          &nbsp;nemìl být nutný.&nbsp;Pokud
výstup Avisynthu&nbsp;je v&nbsp;YUY2 formátu a editor pøedpokládá&nbsp;RGB,&nbsp;systém pou¾ije&nbsp;instalovaný&nbsp;YUY2 kodek pro pøevod. Nicménì, pokud není nainstalovaný
YUY2 kodek, nebo pokud (jako je vpøípadì&nbsp;ATI a nìkterých jiných&nbsp;YUY2 kodekù) kodek
pøevede z&nbsp;YUY2&nbsp;do RGB nesprávnì, mù¾ete místo toho pou¾ít&nbsp;filtr AviSynthu.
<p><a href="http://www.math.berkeley.edu/~benrg/huffyuv.html" target="_parent">Huffyuv</a> bude pracovat jako systémový&nbsp;YUY2 kodek pokud není nainstalovaný jiný kodek,
tak¾e jestli máte nainstalovaný Huffyuv <i>a odinstalovali jste v¹echny ostatní&nbsp;YUY2 kodeky</i>,
tak nikdy nebudete potøebovat&nbsp; <code>ConvertToRGB</code>.
<p><code>ConvertToRGB24</code> a <code>ConvertToRGB32</code> mù¾e být pou¾ito&nbsp;pro vynucení
pou¾ití &nbsp;AviSynthu k pou¾ití specifické metody zachování pro&nbsp;RGB data. RGB24 data jsou èasto&nbsp;mnohem&nbsp;pomalej¹í pro zpracování ne¾
RGB32 data, tak¾e jestli je vá¹ zdroj v&nbsp;RGB24, mù¾ete zvý¹it rychlost&nbsp;pøevodem do&nbsp;RGB32. Nejsou známy
¾ádné výhody pou¾ití RGB24 kromì toho, ¾e&nbsp;TMPGEnc a VFApi&nbsp;po¾adují vstup v&nbsp;RGB24.
<p><b>Pøíklady:</b></p>
<pre># Pøi pøevodu YUV a RGB dochází k mírnému sní¾ení kvality.
# Podívejme se, jestli je mo¾né ho uvidìt.
control = ConvertToYUY2()
test = ConvertToYUY2(ConvertToRGB(ConvertToYUY2(ConvertToRGB(control))))
test = ConvertToYUY2(ConvertToRGB(test))
return Subtract(test,control)</pre>
<p><b>Zmìny:</b>
<table border="1" width="46%">
  <tbody>
    <tr>
      <td width="5%">v2.60</td>
      <td width="95%">Pøidáno: ConvertToY8, ConvertToYV411, ConvertToYV16, ConvertToYV24,<br>
        chromaplacement a chromaresample</td>
    </tr>
    <tr>
      <td width="5%">v2.50</td>
      <td width="95%">ConvertToYV12</td>
    </tr>
  </tbody>
</table>
<p><kbd>$English Date: 2009/03/08 15:06:50 $</kbd></p>
<P><KBD>Èeský pøeklad:18.9.2009</KBD></P>
<form><input TYPE="button" VALUE="Zpìt"
 onClick="history.go(-1)"></form>
</body>
</html>













