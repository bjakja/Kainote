<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-2">
<title>GeneralConvolution Avisynth Filter</title>
<link rel="stylesheet" type="text/css" href="../../avisynth.css">
</head>
<body>
<h2><a name="Convolution"></a>GeneralConvolution</h2>
<P><code>GeneralConvolution </code>(<var>clip, int "bias", string "matrix", float "divisor", bool "auto"</var>)
<p>Tento filtr&nbsp; provádí konvoluèní (spirálovou) matici.
</p>
<table border="1" width="75%">
  <tr>
    <td width="34%"><var>clip</var> </td>
    <td width="66%">RGB32 klip</td>
  </tr>
  <tr>
    <td width="34%"><var>bias</var> (výchozí 0)</td>
    <td width="66%">aditivní posun pro pøizpùsobení celkové výstupní intenzity</td>
  </tr>
  <tr>
    <td width="34%"><var>matrix</var> (výchozí "0 0 0 0 1 0 0 0 0") </td>
    <td width="66%">mù¾e být&nbsp;matice 3x3&nbsp;nebo 5x5&nbsp;s 9&nbsp;nebo 25 celými èísly&nbsp;mezi -256 a 256</td>
  </tr>
  <tr>
    <td width="34%"> <var>divisor</var> (výchozí 1.0)</td>
    <td width="66%">  dìlí výstup konvoluce (vypoèítává se pøed
      pøidáním posunutí)</td>
  </tr>
  <tr>
    <td width="34%"><var>auto</var> (výchozí true)</td>
    <td width="66%">
    Zapíná funkci automatické zmìny velikosti. Dìlí výsledek souètem elementù matice. Hodnota&nbsp; <var>divisor</var>&nbsp;je pou¾ita&nbsp;jako doplnìní&nbsp;tohoto faktoru&nbsp;automatické&nbsp;zmìny velikosti. Pokud je souèet&nbsp;elementù
    nula, auto&nbsp;je vypnuto.</td>
  </tr>
</table>
<p>Parametr&nbsp; <var>divisor</var>         je obvykle&nbsp;souètem elementù
matice. Ale pokud je souèet nula, musíte pou¾ít&nbsp; <var>divisor</var> a
nastavení&nbsp;posunu&nbsp; <var>bias</var>&nbsp;pro korekci&nbsp;hodnot pixelù.&nbsp; Parametr <var>bias</var>
mù¾e být
u¾iteèný&nbsp;pokud jsou hodnoty pixelu&nbsp;záporné po konvoluci. Po pøidání&nbsp;posunu, jsou hodnoty
pixelù ze spodu oøíznuty na nulu a shora na 255 (pokud jsou vìt¹í ne¾&nbsp;255).
</p>
<p>  Kolem okrajù se krajní pixely jednodu¹e opakují pro pøedání do matice.
</p>
<p>Nìkolik pøíkladù:
</p>
<pre># Rozmazání:

GeneralConvolution(0, &quot;
   10 10 10 10 10
   10 10 10 10 10
   10 10 16 10 10
   10 10 10 10 10
   10 10 10 10 10 &quot;, 256, False)
</pre>
<pre># Horizontální (Sobel) detekce hran:

GeneralConvolution(128, &quot;
    1  2  1
    0  0  0
   -1 -2 -1 &quot;, 8)</pre>

<pre># Vertikální (Sobel) detekce hran:

GeneralConvolution(128, &quot;
   1  0 -1
   2  0 -2
   1  0 -1 &quot;, 8)</pre>

<pre># Posunutí (jednodu¹e posune pozici
# &quot;1&quot; nalevo, doprava, nahoru, dolù)

GeneralConvolution(0,&quot;
   0 1 0
   0 0 0
   0 0 0 &quot;)</pre>

<pre># Posunutí o polovinu pixelu nahoru (automatická zmìna velikosti):

GeneralConvolution(0,&quot;
   0 1 0
   0 1 0
   0 0 0 &quot;)</pre>

<pre># Posunutí o polovinu pixelu doprava (ruèní zmìna velikosti):

GeneralConvolution(0,&quot;
   0   0   0
   0 128 128
   0   0   0 &quot;, 256, False)</pre>

<pre># Zostøující filtr:

GeneralConvolution(0,&quot;
   0   -1    0
  -1    5   -1
   0   -1    0 &quot;, 1, True)
V tomto pøípadì, jsou hodnoty nových pixelù y(m,n) dány vztahem
y(m,n) = (-1*x(m-1,n) - 1*x(m,n-1) + 5*x(m,n) - 1*x(m,n+1)
         - 1*x(m+1,n))/(-1-1+5-1-1)/1.0 + 0</pre>

<pre># Mírnì rozmazávající filtr s omezením úrovnì èerné a zjasnìním (brightening) o 25%:

GeneralConvolution(-16,&quot;
    0    12    0
   12   256   12
   0     12    0 &quot;, 0.75 ,True)
V tomto pøípadì, jsou hodnoty nových pixelù y(m,n) dány vztahem
y(m,n) = ( 12*x(m-1,n) + 12*x(m,n-1) + 256*x(m,n) + 12*x(m,n+1)
         + 12*x(m+1,n) )/(12+12+256+12+12)/0.75 - 16</pre>

<p>Nìkteré dal¹í pøíklady naleznete&nbsp; <a href="http://www.gamedev.net/reference/programming/features/imageproc/page2.asp"><cite>zde</cite></a>.</p>
<p><b>Historie zmìn:</b></p>
<table border="1">
  <tbody>
    <tr>
      <td>v2</td>
      <td>Pùvodní vydání</td>
    </tr>
    <tr>
      <td>v2.55</td>
      <td>pøidáno&nbsp;divisor, auto</td>
    </tr>
  </tbody>
</table>
<p><kbd>$English Date: 2008/05/28 21:24:49 $</kbd></p>
<P><KBD>Èeský pøeklad:13.10.2008</KBD></P>
<FORM>
<INPUT TYPE="button" VALUE="Zpìt"
 onClick="history.go(-1)">
</FORM>
</body>
</html>








