<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
<!--
Automatically generated, don't change:
$Id: importing_media.htm,v 1.2 2010/02/27 14:50:13 wilbertd Exp $
-->
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
   <title> Importing Media into AviSynth </title>
<style type=text/css></style>
   <link rel="stylesheet" type="text/css" href="../../avisynth.css">
</head>
<body>

<h1>Importování medií&nbsp;do AviSynthu</h1>

<h2>Obsah</h2>
<A href="#load_clip">1) Naèítání klipù do AviSynthu<br>
</A>&nbsp;&nbsp;&nbsp; <A href="#load_clip_vidaud">1.1) Naèítání klipù s videem
   a audiem do AviSynthu<br>
</A>&nbsp;&nbsp;&nbsp; <A href="#load_clip_vid">1.2) Naèítání video klipù do
AviSynthu<br>
</A>&nbsp;&nbsp;&nbsp; <A href="#load_clip_aud">1.3) Naèítání audio klipù do
AviSynthu<br>
</A>&nbsp;&nbsp;&nbsp; <A href="#load_image">1.4) Naèítání obrázkù do AviSynth</A>u
<p><A href="#merit_filter">  2) Zmìna meritu DirectShow filtrù</A></p>
<p><A href="#graphs">    3)&nbsp;Pou¾ití GraphEditu pro vytvoøení grafù DirectShow
   filtrù a jak naèíst tyto grafy do AviSynth</A>u</p>

<h2>Naèítání klipù do<a name="load_clip"></a>   AviSynthu</h2>
<p>Vìt¹inu&nbsp;video/audio formátù lze do&nbsp;AviSynthu naèíst, ale jsou
nìkteré výjimky&nbsp;jako swf video, flv4 (VP6) a dvr-ms. Pokud není mo¾né naèíst klip do Avisynthu,&nbsp;budete
ho muset pøevést&nbsp;do nìjakého jiného formátu, který mù¾e být naèten. Pamatujte, aby jste vybrali formát&nbsp;u
kterého budete mít v dùsledku pøevodu jen minimální&nbsp;sní¾ení kvality.
<p>Obecnì jsou dva zpùsoby jak&nbsp;naèíst va¹e video do&nbsp;AviSynthu:
<ol>
  <li>pou¾itím filtru nebo pluginu AviSynthu, který
  je vytvoøen&nbsp;pro&nbsp;otevøení nìkterého specifického formátu.
  <li>pou¾itím pluginu <A href="../corefilters/directshowsource.htm"> DirectShowSource</A> .</li>
</ol>
<p>Pøesvìdète se, ¾e vá¹ klip obsahuje maximálnì jeden video a(nebo) jeden&nbsp;audio stream (jinak odstraòte&nbsp;titulky a
odstraòte&nbsp;jiné video/audio streamy). Pokud chcete naèíst klip, který obsahuje&nbsp;jak video&nbsp;tak i&nbsp;audio,&nbsp;máte dvì mo¾nosti:
<ul>
  <li>Demuxujte&nbsp;(vyjmìte) audio stream a&nbsp;naètìte&nbsp;streamy
  do AviSynthu oddìlenì.
  <li>Zkuste naèíst klip do AviSynthu. To mù¾e
      nebo nemusí&nbsp;fungovat.&nbsp;Pro AVI se pøesvìdète, ¾e máte nainstalovaný&nbsp;dobrý&nbsp;AVI splitter
    [<a href="http://sourceforge.net/project/showfiles.php?group_id=82303">Gabestùv
    AVI splitter</a>]. (Ano, Windows mají svùj vlastní AVI splitter,&nbsp;který bude
    fungovat ve vìt¹inì pøípadù.)</li>
</ul>
<p>Pøi naèítání klipù do AviSynthu&nbsp;vám poradíme&nbsp;dodr¾ovat následující pravidla:</p>
<ul>
  <li>Kdy¾ je mo¾né naèíst vá¹ klip do AviSynthu&nbsp;pou¾itím AviSource&nbsp;nebo specifického&nbsp;pluginu&nbsp;tak
  to tak udìlejte,&nbsp;proto¾e to je spolehlivìj¹í ne¾&nbsp;dvì alternativy&nbsp;uvedené ní¾e.
  <li>Pokud vý¹e uvedené sel¾e,&nbsp;naètìte vá¹ klip
  pomocí&nbsp;pluginu DirectShowSource.
  <li>Pokud obojí vý¹e uvedené sel¾e, pøeveïte&nbsp;vá¹ klip&nbsp;do&nbsp;jiného formátu
    (do takového, který AviSynth podporuje).</li>
</ul>
<p>Vysvìtluje se zde pro mnohé formáty,&nbsp;jak je naèíst do&nbsp;AviSynthu,&nbsp;ale
pokud zde vá¹ formát&nbsp;není probírán,&nbsp;mìlo by zde i tak být dost&nbsp;informací pro to aby
jste&nbsp;vìdìli jak&nbsp;zaèít. <i>Obvykle je více zpùsobù jak naèíst vá¹ formát&nbsp;do
AviSynthu,&nbsp;tak¾e pokud jeden z nich nepracuje,&nbsp;nezapomeòte zkusit ostatní.&nbsp;Napøíklad,&nbsp;dejme
tomu, ¾e máte AVI&nbsp;se zvukem&nbsp;5.1 DTS,&nbsp;ale&nbsp;ten se neotevøe jako&nbsp;5.1&nbsp;pomocí AviSource.&nbsp;Zkuste
jiné zpùsoby,&nbsp;jako otevøít ho pomocí&nbsp;DirectShowSource (pou¾itím AC3filteru),&nbsp;nebo demuxujte&nbsp;audio a&nbsp;naètìte dts&nbsp;pomocí NicAudio.</i></p>
<h3><a name="load_clip_vidaud"></a>1.1) Naèítání klipù s videem a audiem&nbsp;do AviSynthu</h3>
<h4>1.1.1) AVI&nbsp;s audiem:</h4>
<p>Pro naètení va¹eho AVI&nbsp;s audiem&nbsp;potøebujete (1)&nbsp;VfW
   (<a href="http://en.wikipedia.org/wiki/Video_for_Windows">Video for Windows</a>) kodek&nbsp;pro&nbsp;otevøení (to je dekódování)&nbsp;va¹eho videa&nbsp;v AviSynthu a&nbsp;ACM
   (<a href="http://en.wikipedia.org/wiki/Audio_Compression_Manager">Audio Compression Manager</a>)
kodek&nbsp;pro&nbsp;otevøení&nbsp;va¹eho audia&nbsp;v AviSynthu. Pro
   mnohé&nbsp;video a audio formáty&nbsp;jsou takové kodeky&nbsp;dostupné,&nbsp;ale urèitì ne pro v¹echny.</p>
<p>       Poèet rùzných formátù videa, které lze nalézt v
AVI&nbsp;je&nbsp;docela omezen. Výbìr z nich:</p>
<ul>
  <li>MPEG-4 ASP (nainstalujte XviD&nbsp;nebo DivX&nbsp;pro dekódování tohoto
  formátu).
  <li>MPEG-4 AVC (abychom byli pøesnìj¹í; zakódované
  video, kde byla pou¾ita&nbsp;pro jeho vytvoøení&nbsp;podskupina vlastností&nbsp;MPEG-4 AVC, mù¾e být umístìno do&nbsp;AVI; pokud vím neexistuje&nbsp;specifický x264 VfW
  DEkodér, tak¾e k otevøení tìchto souborù potøebujete&nbsp;DirectShowSource).
  <li> DV (nainstalujte&nbsp;
    <a href="http://www-user.rhrk.uni-kl.de/~dittrich/cedocida/index.html">Cedocida codec</a>
    [<a href="http://forum.doom9.org/showthread.php?t=94458">odkaz na kodek</a>]).
  <li>MJPEG:&nbsp;pokud vím neexistuje bezplatný&nbsp;VfW
  MJPEG dekodér (ale ffdshow&nbsp;ho dekódovat mù¾e).
  <li>WMV (nainstalujte <a href="http://nic.dnsalias.com/wm9enc.html">WM9/VC-1 codecs</a>).
  <li><a href="http://forum.doom9.org/showthread.php?t=97877">VP7</a>.</li>
</ul>
<p>   Seznam
   formátù audia&nbsp;je uveden ní¾e:&nbsp;</p>

<p><u>audio:&nbsp;nekomprimované WAV, CBR/VBR MP2&nbsp;nebo CBR/VBR MP3:</u></p>
<p>Existuje&nbsp;ACM kodek&nbsp;pro MP2&nbsp;zvaný
   [<a href="http://www.geocities.com/wilbertdijkhof/qmpeg_mp2.zip">QDesign</a>].&nbsp;Existují&nbsp;ACM kodeky&nbsp;pro MP3
   [<a href="http://www.free-codecs.com/MPEG_Layer_3_Codec_download.htm">Radium Codec</a>]&nbsp;nebo [<a href="http://www.free-codecs.com/LAME_ACM_Codec_download.htm">Lame ACM</a>].</p>

<p><u>audio: AC3/DTS:</u></p>
<p>Existuje ACM kodek&nbsp;pro AC3&nbsp;zvaný
   [<a href="http://fcchandler.home.comcast.net/AC3ACM/index.html">AC3ACM</a>].&nbsp;Existuje ACM kodek&nbsp;pro AC3/DTS&nbsp;zvaný valex ACM kodek
   [<a href="http://sourceforge.net/project/showfiles.php?group_id=66022">vac3acm</a>].</p>
<p>Pøíklady:</p>
<pre>AviSource(&quot;d:\xvid_dts.avi&quot;)</pre>
<p>Vezmìte&nbsp;AC3/DTS directshow filtr&nbsp;jako
<a href="http://sourceforge.net/project/showfiles.php?group_id=66022">AC3Flter</a> (ujistìte se, ¾e je vypnuto sní¾ení poètu
kanálù (downmixing), kromì pøípadu kdy chcete provést&nbsp;downmixing&nbsp;nebo
 pokud u¾ zvuk je&nbsp;stereo/mono) a&nbsp;
 <a href="http://sourceforge.net/project/showfiles.php?group_id=82303"> AVI-AC3/DTS splitter</a>,&nbsp;nebo ffdshow (s
DTS&nbsp;nastaveným na libdts).&nbsp;Pou¾ijte AC3Filter a&nbsp;vytvoøte skript:</p>
<pre>DirectShowSource(&quot;d:\xvid_dts.avi&quot;)</pre>

<p><u>audio: AAC:</u></p>
<p>Pro AAC&nbsp;neexistuje spolehlivý&nbsp;ACM kodek,&nbsp;tak¾e
není mo¾né naèíst&nbsp;vá¹ klip&nbsp;s AAC&nbsp;pomocí AviSource.&nbsp;Se¾eòte si AAC directshow filtr&nbsp;jako
   CoreAAC (ujistìte se, ¾e je vypnuto sní¾ení poètu kanálù (downmixing), kromì pøípadu kdy chcete
   provést&nbsp;downmixing)&nbsp;nebo ffdshow (s AAC nastaveným na libfaad2&nbsp;nebo realaac).&nbsp;Pou¾ijeme zde&nbsp;
   <a href="http://sourceforge.net/project/showfiles.php?group_id=173941"> ffdshow</a>
   :</p>
<p><IMG height=465 src="../../english/pictures/advancedtopics/ffdshow_avi_aac.jpg" width=575 border=0></p>
<p>pou¾ijte skript</p>
<pre>DirectShowSource(&quot;d:\xvid_aac.avi&quot;)</pre>
<p>pro naètení va¹eho AVI.</p>
<h4><a name="cont_audio"></a>1.1.2) Jiné kontejnery s audiem:</h4>
<p>Není v¾dy mo¾né&nbsp;naèíst&nbsp;va¹e klipy do AviSynthu pou¾itím&nbsp;AviSource (nebo jednoho ze specifických pluginù, které
   budou probírány ní¾e).&nbsp;Pøíklady jsou ne-AVI, co¾ jsou klipy&nbsp;obsa¾ené uvnitø jiného kontejneru, jako MKV, MP4,
   RMVB, OGM&nbsp;nebo ASF/WMV. V takovém pøípadì je DirectShowSource&nbsp;va¹í poslední nadìjí.&nbsp; Také by mìlo být
   mo¾né, ¾e máte AVI,&nbsp;s nainstalovaným vhodným VfW kodekem,&nbsp;ale chcete pou¾ít DirectShow kodeky pro&nbsp;jejich otevøení
   v AviSynthu. V takovém pøípadì smíte&nbsp;pou¾ít také&nbsp;DirectShowSource.</p>
<p>Pøi pøehrávání klipu ve WMP6.4 (mplayer2.exe) jsou pou¾ívány DirectShow
   filtry (*.ax). Jsou  to ty samé jako&nbsp;které jsou "pou¾ity"&nbsp;pøes DirectShowSource.&nbsp;Tak¾e si musíte být
   jisti, ¾e máte nainstalovány vhodné&nbsp;DirectShow filtry.&nbsp;Pro nalezení, které filtry&nbsp;sou pou¾ity pro pøehrávání klipu,&nbsp;otevøete&nbsp;klip
   ve&nbsp;WMP6.4 a podívejte se na : soubor (file) -&gt; vlastnosti (properties) -&gt; Pokroèilé (Advanced).
   Zde mù¾ete také zmìnit&nbsp;nastavení&nbsp;filtrù.&nbsp;Více informací o filtrech získáte, kdy¾ otevøete&nbsp;klip napø. v programu&nbsp;
   <a href="http://www.headbands.com/gspot/">GSpot</a>. Prostì
otevøete klip&nbsp;a stisknìte&nbsp;"1"&nbsp;pod A/V&nbsp;v&nbsp;èásti "Proposed Codec Solutions and Tests".&nbsp;Je vytvoøen&nbsp;"graph"&nbsp;s filtry které&nbsp;jsou pou¾ity
   pro&nbsp;jeho pøehrávání:</p>
<p><IMG height=638 src="../../english/pictures/advancedtopics/directshow_avi_aac.jpg" width=864 border=0></p>
<p>            (Jestli se
divíte, pøi mém nastavení&nbsp;AC3Filtru,&nbsp;se tento&nbsp;v¾dy zobrazuje v øetìzci filtrù. Ale v tomto&nbsp;pøíkladu by nemìl být
naèten, proto¾e nepodporuje&nbsp;AAC.)</p>
<p>Pokud se vám objeví zpráva "rendering failed
   (...)",&nbsp;znamená to, ¾e&nbsp;nejsou nainstalované vhodné&nbsp;DirectShow filtry. Dbejte také na
   to aby byl soubor&nbsp;pøehráván správnì&nbsp;stiskem tlaèítka&nbsp;"2"&nbsp;pod "1". Proto¾e pokud není pøehráván, DirectShowSource
   nemù¾e naèíst&nbsp;klip. Obecnì, mù¾ete mít následující problém s tímto pøístupem:&nbsp; <b><i>pro&nbsp;
pøehrávání media souboru jsou
   pou¾ity jiné&nbsp;DirectShow filtry&nbsp;ne¾ ty, které jste nainstalovali nebo které chcete pou¾ít. To se mù¾e stát
   proto¾e pou¾ité filtry&nbsp;mají vy¹¹í merit (prioritu pøehrávání)&nbsp;ne¾ ten který chcete pou¾ít</i></b>
     .&nbsp;Jsou dvì øe¹ení tohoto&nbsp;problému:</p>
<ol>
  <li>zmìòte merit&nbsp;pou¾itého filtru&nbsp;pou¾itím
  <a href="http://www.free-codecs.com/download/RadLight_Filter_Manager.htm">Radlight Filter Manager</a>.
  <li>pou¾ijte&nbsp; <a href="http://forum.doom9.org/showthread.php?t=104234">GraphEdit
    (last post of the thread)</a> pro vytvoøení
  "graphu"&nbsp;pou¾itím DirectShow filtrù&nbsp;podle va¹í vùle a&nbsp;naètìte&nbsp;tento graph&nbsp;s DirectShowSource.</li>
</ol>
<p>  Je to probíráno v kapitole
   "<A href="#merit_filter">   Zmìna meritu&nbsp;DirectShow filtrù</A>"
   a "<A href="#graphs">   Pou¾ití GraphEditu pro vytvoøení
   grafù DirectShow filtrù a jak naèíst tyto grafy do AviSynthu</A>".</p>
<p>Na¹tìstí mù¾ete nainstalovat
<a href="http://sourceforge.net/project/showfiles.php?group_id=173941">ffdshow</a> (který pøichází s nìkolika DirectShow dekodéry), které jsou schopny dekódovat mnohé
formáty. Napøíklad:</p>
<ul>
  <li>MPEG1/2:&nbsp;zapíná mpeg1/2 výbìrem knihovny libavcodec&nbsp;nebo libmpeg2:<br>
    <IMG height=507 src="../../english/pictures/advancedtopics/ffdshow_m2p.jpg" width=604 border=0>
  <li>    MJPEG&nbsp;v AVI:&nbsp;zapíná mjpeg výbìrem
  knihovny libavcodec.
  <li>DV&nbsp;v AVI:&nbsp;zapíná DV výbìrem knihovny
  libavcodec.
  <li>MPEG-4 ASP&nbsp;v OGM: <font color="#ff0000">xxx</font>
  <li><font color="#ff0000">MKV / MP4 / TS</font>
  <li>h.264&nbsp;v MKV/MP4: nainstalujte <font color="#ff0000">xxx</font> a&nbsp;pou¾ijte ffdshow
  <li>h.264&nbsp;v TS: nainstalujte Haali splitter a&nbsp;pou¾ijte ffdshow
  (nebo CoreAVC)
  <li>h.263&nbsp;v FLV1: se¾eòte si
  [<a href="http://sourceforge.net/project/showfiles.php?group_id=82303">flv splitter</a>] a&nbsp;zapnìte h.263&nbsp;pøehrávání&nbsp;výbìrem knihovny&nbsp;libavcodec.</li>
</ul>
<p>Pøíklad:</p>
<p>Naèteme&nbsp;MP4 (video: h.264, audio: aac)&nbsp;pou¾itím DirectShowSource a ffdshow
(aac dekódování zapnuto v ffdshow; kdy¾ je audio&nbsp;AC3&nbsp;nebo DTS&nbsp;mù¾ete také pou¾ít&nbsp;AC3Filter).&nbsp;Vá¹ skript mù¾e být
napøíklad:</p>
<pre># upravte fps pokud je to nutné
DirectShowSource(&quot;d:\x264_aac.mp4&quot;, fps=25, convertfps=true)</pre>

<p><u>nìkteré jiné formáty:</u></p>
<p>* RM/RMVB (<font size="-1">RealMedia / </font><font size="-1">RealMedia</font><font size="-1"> Variable Bitrate - promìnný
   datový tok; obvykle obsahuje Real Video/Audio)</font>: nainstalujte&nbsp;
   <a href="http://sourceforge.net/projects/guliverkli/">rmvb splitter</a> a Real kodeky nainstalováním
   pøehrávaèe&nbsp;RealPlayer/<a href="http://www.free-codecs.com/download/Real_Alternative.htm">RealAlternative</a>
    .&nbsp;Vytvoøte skript:</p>
<pre># upravte fps pokud je to nutné
DirectShowSource(&quot;d:\clip.rmvb&quot;, fps=25, convertfps=true)</pre>
<p>* WMV/ASF (Windows Media
   Video / Advanced Systems Format; obvykle obsahuje WMV/WMA): tento formát&nbsp;není zcela podporován v&nbsp;ffdshow, tak¾e
   budete muset nainstalovat  kodeky&nbsp;wmv.&nbsp;Vezmìte
   <a href="http://msdn.microsoft.com/windowsmedia/downloads/default.aspx">WMF SDK v9&nbsp;pro W2K nebo pozdìj¹í pro XP/Vista </a>které obsahují kodeky (a DMO obálky (wrappers)&nbsp;nezbytné
   pro pou¾ití&nbsp;DMO filtrù&nbsp;v DirectShow). (V¹imnìte si, ¾e&nbsp;vlastní kodek VC1 od Microsoftu&nbsp;není podporován ve W2K&nbsp;tak¾e
   potøebujete&nbsp;WMF SDK v11.) Vytvoøte skript:</p>
<pre># upravte fps pokud je to nutné
DirectShowSource(&quot;d:\clip.wmv&quot;, fps=25, convertfps=true)</pre>
<p align="left">Pokud má zdrojový materiál&nbsp;video s
promìnnou snímkovou frekvencí (variable framerate),&nbsp;pøeètìte si
tuto&nbsp; <A href="hybrid_video.htm">nápovìdu</A>.</p>
<h3><a name="load_clip_vid"></a>1.2)&nbsp;Naèítání video klipù&nbsp;do AviSynthu</h3>
<p>Jak u¾ bylo vysvìtleno,&nbsp;obecnì&nbsp;jsou dva zpùsoby jak naèíst&nbsp;va¹e video&nbsp;do AviSynthu:</p>
<ol>
  <li>pou¾itím pluginu AviSynthu, který je navr¾en pro
  otevøení&nbsp;nìkterého specifického formátu.
  <li> pou¾itím pluginu DirectShowSource.</li>
</ol>
<p>Seznam v¹ech tìchto pluginù a jejich&nbsp;akceptované formáty&nbsp;jsou uvedeny ní¾e.</p>

<p><u>1) Filtry a pluginy AviSynthu, které jsou navr¾eny pro&nbsp;otevøení specifických formátù:</u></p>
<p><u>AviSource - AVI/VDR:</u></p>
<p><A href="../corefilters/avisource.htm">AviSource</A>
podporuje
   v¹ehny typy AVI s&nbsp;audiem MP3 (VBR MP3)&nbsp;nebo AC3. Také podporuje DV type 1 a type 2, a
   soubory snímkového serveru&nbsp;VirtualDubu (VDR).</p>
<p>AVI lze do AviSynthu naèíst za podmínky, ¾e
   máte&nbsp;nainstalovaný vhodný VfW kodek, který mù¾e být pou¾it k&nbsp;dekódování AVI. Výchozí kodek, který je pou¾it
   pro dekódování AVI&nbsp;je urèen na zaèátku&nbsp;media&nbsp;souboru (v jeho hlavièce)&nbsp;&nbsp;ve formì FourCC (FOUR Character
   Code).&nbsp;Od v2.55, je pøidána mo¾nost fourCC,&nbsp;která vám umo¾ní pou¾ít jiné kodeky pro naètení va¹eho&nbsp;AVI&nbsp;do
   AviSynthu.</p>
<p> Pár pøíkladù:</p>
<pre>AviSource(&quot;d:\filename.avi&quot;)</pre>
<p> nebo bez audia:</p>
<pre>AviSource(&quot;d:\filename.avi&quot;, false)</pre>
<p>Pro naètení klipu do AviSynthu bylo pou¾ito vynucení&nbsp;dekodéru: </p>
<pre># naèítáte va¹e avi pou¾itím kodeku XviD:
# otevøe avi (napøíklad DivX3) pou¾itím kodeku XviD
AviSource(&quot;d:\filename.avi&quot;, fourCC=&quot;XVID&quot;)

# naèítáte va¹e dv-avi pou¾itím kodeku Canopus DV Codec:
AviSource(&quot;d:\filename.avi&quot;, fourCC=&quot;CDVC&quot;)

#vdr-soubory (soubory snímkového serveru (frameserver) VirtualDubu):
AviSource(&quot;d:\filename.vdr&quot;) </pre>
<p>Jestli si AviSynth&nbsp;postì¾uje, ¾e není schopen naèíst va¹e avi&nbsp;
   <font color="#ff0000"> (couldn't decompress ...)</font> musíte nainstalovat&nbsp;vhodný
   kodek. GSpot, napøíklad,&nbsp;vám øekne jaký kodek&nbsp;potøebujete nainstalovat, aby jste&nbsp;mohli pøehrávat va¹e&nbsp;avi.</p>

<p><u>Mpeg2Source/DGDecode - MPEG1/MPEG2/VOB/TS/PVA:</u></p>
<p>DGDecode (døíve Mpeg2Dec3) je externí plugin a&nbsp;podporuje MPEG-1, MPEG-2 / VOB, TS a
   PVA streamy. Otevøete je nejdøíve v programu DGIndex (nebo Dvd2avi 1.76/1.77.3&nbsp;pro Mpeg2Dec3)&nbsp;a&nbsp;vytvoøte d2v
   skript&nbsp;který lze otevøít v&nbsp;AviSynthu (v¹imnìte si, ¾e&nbsp;toto v AviSynthu otevøe jen video):</p>
<p> Pár pøíkladù:</p>
<pre># starý Mpeg2dec3; pokud potøebujete d2v skript
# který se vytvoøí v dvd2avi 1.76/1.77.3
LoadPlugin(&quot;d:\mpeg2dec3.dll&quot;)
mpeg2source(&quot;d:\filename.d2v&quot;)

# DGDecode:
LoadPlugin(&quot;d:\dgecode.dll&quot;)
mpeg2source(&quot;d:\filename.d2v&quot;) </pre>
<p>V¹imnìte si, ¾e&nbsp;Mpeg2Dec3 je velmi omezený ve srovnání
   s DGDecode,&nbsp;proto¾e je to ve skuteènosti stará verze DGDecode a&nbsp;podporuje jen&nbsp;MPEG-2 / VOB.</p>

<p><u><font color="#ff0000">DGAVCDec -&nbsp;syrové AVC/H.264 elementární streamy</font></u><font color="#ff0000">
<a href="http://neuron2.net/dgavcdec/dgavcdec.html" class="external autonumber" title="http://neuron2.net/dgavcdec/dgavcdec.html" rel="nofollow">[1]</a></font></p>
<p><font color="#ff0000">DGAVCIndex: Indexuje vá¹ syrový AVC/H.264 stream.</font></p>
<p><font color="#ff0000">Vytvoøí
Avisynth skript&nbsp;pro pøedávání snímkù (frameserve) videa:</font></p>
<pre><font color="#ff0000">LoadPlugin(&quot;d:\DGAVCDecode.dll&quot;)
AVCSource(&quot;d:\file.dga&quot;)</font></pre>

<p><u>RawSource -&nbsp;syrové formáty s/bez hlavièky:</u></p>
<p>Externí pluginy&nbsp;RawSource&nbsp;podporují v¹echny
druhy&nbsp;syrových (raw)&nbsp;videosouborù&nbsp;s YUV4MPEG2&nbsp;hlavièkou (header)&nbsp;a&nbsp;bez&nbsp;hlavièky (videosoubory, které obsahují YUV2,
   YV16, YV12, RGB&nbsp;nebo Y8 video data).</p>
<p>Pøíklady:</p>
<pre># Toto pøedpokládá, ¾e je uvnitø platná YUV4MPEG2-header (hlavièka):
RawSource(&quot;d:\yuv4mpeg.yuv&quot;)

# Syrový soubor s RGBA daty:
RawSource(&quot;d:\src6_625.raw&quot;,720,576,&quot;BGRA&quot;)

# Mù¾ete zadat bajtovou pozici video snímkù
# pøímo (které lze najít pomocí yuvscan.exe). To
# je u¾iteèné pokud se ve skuteènosti nejedná o syrové (raw) video, ale napø.
# nekomprimované MOV soubory nebo soubor se stejným typem hlavièky:
RawSource(&quot;d:\yuv.mov&quot;, 720, 576, &quot;UYVY&quot;, \
    index=&quot;0:192512 1:1021952 25:21120512 50:42048512 75:62976512&quot;)</pre>

<p><u>QTSource (s QuickTime 6&nbsp;nebo 7) a QTReader - MOV/QT:</u></p>
<p>Jsou dva zpùsoby jak naèíst va¹e quicktime&nbsp;videa&nbsp;do AviSynthu
   (a&nbsp;také RawSource&nbsp;pro&nbsp;nekomprimované mov): QTSource a QTReader. První se objevil docela nedávno a je schopen otevøít&nbsp;mnoho
   quicktime formátù (s mo¾ností otevøít je jako&nbsp;YUY2),&nbsp;ale potøebujete nainstalovat QuickTime player , aby&nbsp;jste tento plugin
   mohli pou¾ít. Druhý je velmi starý,&nbsp;není po¾adována ¾ádná instalace&nbsp;pøehrávaèe pro otevøení quicktime formátù&nbsp;v AviSynthu.</p>
<p><i>QTSource:</i></p>
<p>Budete potøebovat Quicktime 6 pro obdr¾ení
pouze&nbsp;videa nebo&nbsp;Quicktime 7 pro obdr¾ení audia&nbsp;a videa.</p>
<pre># YUY2 (výchozí):
QTInput(&quot;FileName.mov&quot;, color=2)

# s audiem (v mnoha pøípadech mo¾né s QuickTime 7)
QTInput(&quot;FileName.mov&quot;, color=2, audio=true)

# syrový (raw) (s napøíklad YUYV formátem):
QTInput(&quot;FileName.mov&quot;, color=2, mode=1, raw=&quot;yuyv&quot;)

# dither = 1; pøevádí raw 10bit na 8bit video (v210 = 10bit uyvy):
QTInput(&quot;FileName.mov&quot;, color=2, dither=1, raw=&quot;v210&quot;)</pre>
<p><i>QTReader:</i></p>
<pre># Pokud vý¹e uvedené nepracuje, nebo kdy¾ nemáte QuickTime,
# stáhnìte si plugin QTReader (najdeteho v
# sekci ke sta¾ení na Doom9):
LoadVFAPIPlugin(&quot;C:\QTReader\QTReader.vfp&quot;, &quot;QTReader&quot;)
QTReader(&quot;C:\quicktime.mov&quot;) </pre>

<p><u>Filtr Import - pro skripty AviSynthu:</u></p>
<p>Prostì importujte&nbsp;skript&nbsp;pou¾itím <A href="../corefilters/import.htm">Import</A>
    &nbsp;na zaèátku va¹eho skriptu:</p>
<pre>Import(&quot;d:\filename.avs&quot;)</pre>
<p>Ve&nbsp;v2.05 nebo novìj¹í verzi&nbsp;mù¾ete pou¾ít&nbsp;autonaèítání&nbsp;skriptù AVSI.&nbsp;Prostì pøesuòte&nbsp;AVS-soubor&nbsp;do slo¾ky pluginù&nbsp;obsahující
   ostatní (externí) pluginy, a&nbsp;pøejmenujte pøíponu na 'avsi'.&nbsp;Viz také&nbsp; <A href="../faq.htm">FAQ</A> &nbsp;pro
   více diskuze.</p>

<p><u>2) DirectShowSource:</u></p>
<p>Podívejte se do kapitoly&nbsp;"<A href="#cont_audio">Jiné kontejnery s
   audiem</A>" pro více informací.</p>
<h3><a name="load_clip_aud"></a>1.3)&nbsp;Naèítání audio&nbsp;klipù&nbsp;do AviSynthu</h3>
<p>Vìt¹inu&nbsp;audio formátù&nbsp;lze
   do AviSynthu naèíst, ale je nìkolik výjímek jako&nbsp;MPL&nbsp;nebo&nbsp;vícekanálové WMA&nbsp;pøi&nbsp; pou¾ití&nbsp;W98/W2K. Pokud není mo¾né naèíst klip
   do AviSynthu, budete muset pøevést zvuk do&nbsp;nìkterého jiného&nbsp;formátu který lze naèíst. Pøitom pamatujte, aby
   jste vybrali&nbsp;formát&nbsp;u kterého budete mít nejmen¹í sní¾ení kvality&nbsp;pøi pøevodu.</p>
<p>Obecnì jsou dva zpùsoby pro naètení&nbsp;va¹eho audia do AviSynthu:</p>
<ol>
  <li>pou¾itím pluginu AviSynthu který je navr¾en&nbsp;pro
  otevøení&nbsp;nìkterého specifického formátu.
  <li>pou¾itím pluginu&nbsp;DirectShowSource.</li>
</ol>
<p>Seznam v¹ech tìchto pluginù&nbsp;a jejich&nbsp;akceptovaných formátù jsou uvedeny&nbsp;ní¾e.</p>

<p><u>1) Filtry a pluginy AviSynthu, které&nbsp;jsou navr¾eny pro otevøení specifických formátù:</u></p>
<p><u>WavSource - WAV:</u></p>
<p><A href="corefilters/wavsource.htm">WavSource</A>&nbsp;podporuje v¹echny
druhy WAV,&nbsp;jako nekomprimované&nbsp;WAV&nbsp;nebo MP2/MP3/AC3/DTS audio&nbsp;s
   WAVE hlavièkou.&nbsp;WAV&nbsp;lze naèíst&nbsp;do AviSynthu za podmínky, ¾e máte nainstalovaný vhodný<font color="#ff0000">
   <a href="http://en.wikipedia.org/wiki/Audio_Compression_Manager">ACM kodek</a>
   </font>,&nbsp;který mù¾e být pou¾it pro&nbsp;dekódování WAV. Výchozí kodek, který je pou¾it&nbsp;pro dekódování&nbsp;WAV&nbsp;je
   urèen na zaèátku&nbsp;media&nbsp;souboru (v jeho hlavièce-header; podobnì jako&nbsp;fourCC&nbsp;pro video kodeky).</p>

<p><u>audio: MP2/MP3&nbsp;s WAVE hlavièkou (header):</u></p>
<p>Existuje&nbsp;ACM&nbsp;kodek&nbsp;pro MP2&nbsp;zvaný
   [<a href="http://www.geocities.com/wilbertdijkhof/qmpeg_mp2.zip">QDesign</a>
      ].&nbsp;Existují&nbsp;ACM&nbsp;kodeky pro MP3
   [<a href="http://www.free-codecs.com/MPEG_Layer_3_Codec_download.htm">Radium Codec</a>]&nbsp;nebo [<a href="http://www.free-codecs.com/LAME_ACM_Codec_download.htm">Lame ACM</a>].</p>

<p><u>audio: AC3/DTS&nbsp;ve WAVE hlavièce (header) (tak zvané DD-AC3 a DTSWAV):</u></p>
<p>Existuje ACM kodek&nbsp;pro AC3&nbsp;zvaný
   [<a href="http://fcchandler.home.comcast.net/AC3ACM/index.html">AC3ACM</a>].&nbsp;Existuje ACM kodek&nbsp;pro AC3/DTS&nbsp;zvaný valex ACM codec
   [<a href="http://sourceforge.net/project/showfiles.php?group_id=66022">vac3acm</a>].</p>
<p>
Pøíklad:</p>
<pre># DTS ve WAV:
V = BlankClip(height=576, width=720, fps=25)
A = WAVSource(&quot;D:\audio_dts.wav&quot;)
AudioDub(V, A)</pre>
<p>nebo pokud máte&nbsp;WinDVD platinum, nainstalujte
   <a href="http://forum.doom9.org/showthread.php?s=&amp;threadid=52692">
   hypercube's DTSWAV filter</a>.</p>
<p><font color="#ff0000"> Pár pøíkladù:</font></p>
<pre><font color="#ff0000">xxx</font></pre>

<p><u>MPASource - MP1/MP2/MP3/MPA:</u></p>
<p>Pøíklad:</p>
<pre>LoadPlugin(&quot;C:\Program Files\AviSynth25\plugins\mpasource.dll&quot;)
V = BlankClip(height=576, width=720, fps=25)
A = MPASource(&quot;D:\audio.mp3&quot;, normalize = false)
AudioDub(V, A)</pre>

<p><u>NicAudio - MP1/MP2/MP3/MPA/AC3/DTS/LPCM:</u><br>
<br>
Nìkteré pøíklady:</p>
<pre>LoadPlugin(&quot;C:\Program Files\AviSynth25\plugins\NicAudio.dll&quot;)

# AC3 audio:
V = BlankClip(height=576, width= 720,  fps=25) A= NicAC3Source(&quot;D:\audio.AC3&quot;)

# A = NicAC3Source(&quot;D:\audio.AC3&quot;,downmix = 2) #downmixováno-zmìnìn poèet kanálù na stereo
AudioDub(V, A)

# LPCM audio (48 kHz, 16 bit and stereo):
V = BlankClip(height=576, width=720, fps=25)
A = NicLPCMSource(&quot;D:\audio.lpcm&quot;, 48000, 16, 2)
AudioDub(V, A)</pre>

<p><u>BassAudio - MP3/MP2/MP1/OGG/WAV/AIFF/WMA/FLAC/WavPack/Speex/Musepack/AAC/M4A/APE/CDA:</u></p>
<p>BassAudio&nbsp;mù¾ete stáhnout&nbsp; <a href="http://forum.doom9.org/showthread.php?t=108254">zde</a>.
Nìkteré pøíklady:</p>
<pre># FLAC soubory:
bassAudioSource(&quot;C:\ab\Dido\001 Here With Me.flc&quot;)

# OGG soubory:
bassAudioSource(&quot;C:\ab\Dido\001 Here With Me.ogg&quot;)

# AAC soubory:
bassAudioSource(&quot;C:\ab\Dido\001 Here With Me.aac&quot;)</pre>
<pre># Audio-CD ripování vyu¾ívající tento plugin
# Stáhnìte BASSCD 2.2 z oficiální domovské stránky BASS
# Rozbalte basscd.dll a pøejmenujte ho na bass_cd.dll
# Umístìte bass_cd.dll do stejné slo¾ky jako bassAudio.dll
bassAudioSource(&quot;D:\Track01.cda&quot;)</pre>

<p><u>2) DirectShowSource:</u></p>
<p>Podívejte se na kapitolu&nbsp;"<A href="#cont_audio"> &nbsp;Jiné kontejnery s
   audiem</A>      " pro více
   informací.&nbsp;Nìkteré directshow filtry (kromì tìch, které jsou v&nbsp;ffdshow)&nbsp;pro Ogg Vorbis, Speex, Theora a
   FLAC&nbsp;najdete <a href="http://www.illiminable.com/ogg/">zde</a>.</p>

<p><u>audio: MP2/MP3&nbsp;s WAVE hlavièkou (header):</u></p>
<p>Pou¾ijte&nbsp;ffdshow: MP1/2/3 dekódování zapnuto a&nbsp;vyberte mp3lib&nbsp;nebo libmad.</p>

<p><u>audio: AC3/DTS&nbsp;s WAVE hlavièkou (header) (tak zvané&nbsp;DD-AC3 a DTSWAV):</u></p>
<p>Pou¾ijte&nbsp;ffdshow: DTS dekódování zapnuto a nekomprimované: podporovat v¹echny formáty.</p>
<p>Pøíklad:</p>
<pre># DTS ve WAV:
V = BlankClip(height=576, width=720, fps=25)
A = DirectShowSource(&quot;D:\audio_dts.wav&quot;)
AudioDub(V, A)</pre>
<p>nebo vytvoøíme graph:</p>
<pre># DTS ve WAV:
# pou¾ijeme WAVE parser a ffdshow nebo AC3filter: [pøidat obrázky]
V = BlankClip(height=576, width=720, fps=25)
A = DirectShowSource(&quot;D:\audio_dts_wav.grf&quot;, video=false)
AudioDub(V, A)</pre>

<p><u>aac:</u></p>
<p>Vezmìte AAC directshow filtr&nbsp;jako CoreAAC
(pøesvìdète se, ¾e downmixing-sní¾ení poètu kanálù&nbsp;je vypnuto,&nbsp;kromì pøípadu kdy chcete&nbsp;sní¾it poèet kanálù;)&nbsp;nebo ffdshow (s AAC nastaveným
   na libfaad&nbsp;nebo realaac), a pou¾ijte</p>
<pre>DirectShowSource(&quot;d:\audio.aac&quot;)</pre>
<p>pro naètení va¹eho AAC.&nbsp;Mù¾ete potøebovat&nbsp;AAC parser filtr&nbsp;pro DirectShow.&nbsp;Najdete ho
zde&nbsp; <a href="http://www.rarewares.org/aac-decoders.php#aac_parser" class="external autonumber" title="http://www.rarewares.org/aac-decoders.php#aac_parser" rel="nofollow">[2]</a>.</p>
<h3><a name="load_image"></a>1.4) Naèítání obrázkù do AviSynthu</h3>
<p>1)&nbsp;Pou¾ijte ImageReader&nbsp;nebo ImageSource pro
   naètení va¹ich obrázkù&nbsp;do AviSynthu (umí naèíst nejoblíbenìj¹í&nbsp;formáty,&nbsp;kromì GIF a animovaných formátù).&nbsp;Viz
   <A href="../corefilters/imagesource.htm">vnitøní&nbsp;dokumentaci</A> &nbsp;pro
   informace.</p>
<p>    2) Pou¾ijte plugin Immaavs pro GIF, animované formáty a&nbsp;jiné
   typy&nbsp;obrázkù.</p>
<pre># samostatný obrázek:
immareadpic(&quot;x:\path\pic.bmp&quot;)

# animovaný gif:
immareadanim(&quot;x:\path\anim.gif&quot;)</pre>

<h2><a name="merit_filter"></a>  2) Zmìna meritu DirectShow Filtrù</h2>
<p>Otevøete&nbsp;Radlight Filter Manager a&nbsp;vyberte, který z filtrù&nbsp;schopných pøehrávat vá¹ klip&nbsp;má vy¹¹í&nbsp;merit. Zmìòte&nbsp;merit u filtru,
který chcete pou¾ít pro pøehrávání,&nbsp;napøíklad:</p>
<p><IMG height=455 src="../../english/pictures/advancedtopics/filtermanager_ac3.jpg" width=352 border=0></p>
<p>a restartujte&nbsp;va¹e PC. Podle mé zku¹enosti to v¾dy nefunguje.&nbsp;V
AC3Filter,&nbsp;napøíklad,&nbsp;je nastavení zvané 'Filter Merit"&nbsp;které je nastaveno&nbsp;na 'Prefer AC3Filter'&nbsp;jako výchozí.
Aèkoliv&nbsp;byl v mém pøípadì merit&nbsp;pro AC3Filter&nbsp;nastaven ni¾¹í ne¾&nbsp;merit&nbsp;pro Moonlight Odio
Dekoda (MERIT_NORMAL versus MERIT_NORMAL+1),&nbsp;byl pro pøehrávání mého AC3 byl pou¾it první z nich (pøedpokládám, ¾e je
to dùsledek nastavení&nbsp;'Prefer AC3Filter'&nbsp;v AC3Filter;&nbsp;nastavení na&nbsp;'Prefer other decoder' ('Preferovat jiné dekodéry')
tento problém vyøe¹í).&nbsp;Jiné filtry mohou mít také takové nastavení.</p>

<h2><a name="graphs"></a>3)&nbsp;Pou¾ití
GraphEditu&nbsp;k vytvoøení
   grafù&nbsp;DirectShow filtrù a&nbsp;naètení&nbsp;tìchto grafù&nbsp;do AviSynthu</h2>
<p>Formou pøíkladu zde bude ukázáno&nbsp;jak vytvoøit
graf&nbsp;(graph)&nbsp;kde CoreAAC
   Audio Decoder&nbsp;bude pou¾it k&nbsp;rendrování&nbsp;audia&nbsp;v AVI-AAC souboru.&nbsp;Pøesnìji, bude ukázáno&nbsp;jak by mìl být nahrazen
   ffdshow Audio dekodér&nbsp;dekodérem CoreAAC Audio Decoder,&nbsp;kde první&nbsp;má vy¹¹í merit&nbsp;(èím¾ se rozumí, ¾e&nbsp;filtr&nbsp;bude pou¾it pøi
   pøehrávání klipu v pøehrávaèích zalo¾ených na DirectShow&nbsp;jako WMP6.4&nbsp;nebo pøi otvírání&nbsp;AVI&nbsp;pøímo v &nbsp;AviSynthu&nbsp;pomocí DirectShowSource):</p>
<p> Otevøete&nbsp;GraphEdit a&nbsp;otevøete vá¹ klip: File&nbsp;-&gt; Open Graph -&gt; Select
   All Files -&gt;&nbsp;otevøete vá¹ klip:</p>
<p><IMG height=368 src="../../english/pictures/advancedtopics/directshow_avi_aac2.jpg" width=1119 border=0></p>
<p>Kliknìte pravým tlaèítkem my¹i na filtr (ffdshow Audio decoder) -&gt; Filter Properties -&gt;&nbsp;zmìòte
   nastavení, pokud je to nutné.</p>
<p> Graph -&gt; Insert Filters -&gt;&nbsp;pod DirectShow Filters -&gt;&nbsp;vyberte
   CoreAAC Audio Decoder:</p>
<p><IMG height=331 src="../../english/pictures/advancedtopics/directshow_avi_aac3.jpg" width=458 border=0></p>
<p>Stisknìte&nbsp;Insert Filter. Odstraòte ffdshow Audio dekodér&nbsp;tím, ¾e ho vyberete
   a&nbsp;stisknete Delete:</p>
<p><IMG height=340 src="../../english/pictures/advancedtopics/directshow_avi_aac4.jpg" width=583 border=0></p>
<p>       Nakonec, pøipojte CoreAAC Audio Decoder,
   pøipojením pinù pomocí&nbsp;levého tlaèítka my¹i&nbsp;(¹ipky budou nakresleny automaticky):</p>
<p><IMG height=610 src="../../english/pictures/advancedtopics/directshow_avi_aac5.jpg" width=1117 border=0></p>
<p>Zkontrolujte a upravte vlastnosti filtru, jestli je to nutné.&nbsp;Stisknìte
   play pro kontrolu zda&nbsp;lze klip pøehrávat&nbsp;zvolenou kombinací DirectShow filtrù.&nbsp;To je velmi dùle¾ité,&nbsp;proto¾e pokud
   ho nelze pøehrávat, AviSynth&nbsp;nebude schopen otevøít klip. V takovém pøípadì by jste mìli&nbsp;vybrat a&nbsp;nebo
   nainstalovat&nbsp;jiné filtry,&nbsp;které umí klip pøehrát.</p>
<p>Nakonec odstraòte WaveOut Device a&nbsp;video filtry,&nbsp;proto¾e AviSynth&nbsp;potøebuje&nbsp;volný pin&nbsp;pro své pøipojení&nbsp;kdy¾&nbsp;je ve skriptu volán&nbsp;DirectShowSource.</p>
<p><IMG height=325 src="../../english/pictures/advancedtopics/directshow_avi_aac6.jpg" width=1119 border=0></p>
<p>Ulo¾te graf jako audio.grf. Pokud chcete naèíst také video&nbsp;do AviSynthu,&nbsp;mìlo by být&nbsp;naèteno
   oddìlenì,&nbsp;pou¾itím&nbsp;jiného grafu&nbsp;(kde jsou&nbsp;audio èást&nbsp;a Video Renderer&nbsp;odstranìny):</p>
<p><IMG height=219 src="../../english/pictures/advancedtopics/directshow_avi.jpg" width=959 border=0></p>
<p>Ulo¾te graf jako&nbsp; video.grf.&nbsp;Vá¹ skript bude vypadat:</p>
<pre># zmìòte fps jestli je to nutné
vid = DirectShowSource(&quot;D:\video.grf&quot;,\
              fps=25, convertfps=true, audio=false)
aud = DirectShowSource(&quot;D:\audio.grf&quot;, video=false)
AudioDub(vid, aud)</pre>
<h2>
Na dopracování&nbsp;
</h2>

<ul>
  <li>Mìlo by být doplnìno následující: tpr, aup, RaWav (&gt;4
  GB WAVE soubory), ffmpegsource,
  <li>../docs/english/faq_loading_clips.htm#How_do_I_load_MP4.2FMKV.2FM2TS_into_AviSynth.3F,
  swf (ffmpegsource)
- mìlo by být doplnìno.</li>
</ul>

<p>
<kbd>$English Date: 2008/07/11 18:28:55 $</kbd>
</p>
<P><KBD>Èeský pøeklad:12.2.2009</KBD>&nbsp;</P>
</body>
</html>

















