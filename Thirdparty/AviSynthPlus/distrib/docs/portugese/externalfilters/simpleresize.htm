<html>
<head>
<title>SimpleResize</title>
<link rel="stylesheet" type="text/css" href="../../avisynth.css">
<!--
Automatically generated, don't change:
$Id: simpleresize.htm,v 1.1 2006/03/26 18:11:54 wilbertd Exp $
-->
</head>
<body>
<h1>SimpleResize</h1>
<h2>Abstrato</h2>
<b>autor:</b> Tom Barry
<br><b>versão:</b> 0.3.3.0
<br><b>download:</b> <a href="http://mywebpages.comcast.net/trbarry/downloads.htm">http://mywebpages.comcast.net/trbarry/downloads.htm</a><br>
<b>categoria:</b> Resizers
<br><b><span style="font-size:10.0pt;mso-bidi-font-size:
12.0pt;font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">requisitos</span>:</b> YV12 &amp; YUY2 Colorspace
<hr>
<h2>Descrição</h2>
<span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">SimpleResize é um filtro Avisynth que faz uma
interpolação linear de 2 tampas muito simples. É não filtrado, e significa
que não suaviza muito.</span>
<p><code>InterlacedResize</code> e <code>InterlacedWarpedResize</code>  <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">é projetado para trabalhar em material entrelaçado
(mais ao fim do doc)</span></p>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Sua vantagem principal é que roda um pouco mais
rápido que alguns outros.</span></p>
<h3>Para usar:</h3>
<p> <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Em seu arquivo Avisynth use comando semelhante
para</span> </p>
<pre>LoadPlugin(&quot;F:\SimpleResize\SimpleResize.dll&quot;)
Avisource(&quot;D:\wherever\myfile.avi&quot;)
SimpleResize(width, height)</pre>
<p> <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">E substitua o nome do arquivo e diretório com o
seu próprio e dê os valores inteiros para</span> <var>width</var> &amp; <var>height</var>. </p>
<p><code>SimpleResize</code>  <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">deva rodar em todas as máquinas de MX. Tem também
alguns (opcional) códigos de instruções SSE2 para P4 e alguns de SSEMMX para
P3 &amp; Athlon, entretanto poderia usar talvez um pouco mais. Mas desculpe,
nenhum plano para 3DNow extra.</span></p>
<h3>WarpedResize</h3>
<p><code>WarpedResize</code>  <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-ansi-language:PT-BR;mso-fareast-language:PT-BR;mso-bidi-language:AR-SA">também
é incluído no SimpleResize.dll.&nbsp;</span><span style="font-size:10.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA"><span style="mso-bidi-font-size: 12.0pt; mso-fareast-font-family: Times New Roman">
</span><code>WarpedResize </code></span><code><span style="font-size:10.0pt;font-family:&quot;Microsoft Sans Serif&quot;;
mso-ansi-language:PT-BR;mso-fareast-language:PT-BR;mso-bidi-language:AR-SA"><font color="#000000">fará
um</font> </span></code><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:&quot;Microsoft Sans Serif&quot;;
mso-fareast-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">expandir / comprimir</span><code><span style="font-size:10.0pt;font-family:&quot;Microsoft Sans Serif&quot;;mso-ansi-language:
PT-BR;mso-fareast-language:PT-BR;mso-bidi-language:AR-SA"> <font color="#000000">não
linear em ambas as dimensões horizontais e verticais.</font> </span></code><span style="font-size:
10.0pt;mso-bidi-font-size:12.0pt;font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:
&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:PT-BR;
mso-bidi-language:AR-SA">Isto pode ser útil quando você quer mudar a relação
de aspecto de um clipe de vídeo e principalmente torcer no alto, no fundo e nas
extremidades laterais. Isto principalmente é experimental mas o incluí porque
exigiu poucas mudanças de código e quase Zero penalidade em desempenho. Use
como:</span></p>
<pre>LoadPlugin(&quot;F:\SimpleResize\SimpleResize.dll&quot;)
AviSource(&quot;D:\wherever\myfile.avi&quot;)
WarpedResize(width, height, hWarp, vWarp)</pre>
<p>onde <var>hWarp</var> &amp; <var>vWarp</var>  <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">são os fatores de deformações horizontais e
verticais. Estes são números reais, normalmente entre .8 e 1.3 isso determina
como você realmente quer a produção não linear.</span></p>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Valores acima de 1.0 estira a produção da
imagem mais no meio e apertado nas extremidades. Valores abaixo de 1.0 farão o
contrário. Especificando 1.0 para qualquer um deles fará um resize linear
naquela dimensão, da mesma maneira que com SimpleResize. Valores além de 1.0
darão alguns resultados muito estranhos. Veja as &quot;Notas aos Matemáticos&quot;
abaixo.</span></p>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Uma razão para usar WarpedResize é para quando
tiver um clipe com uma relação de aspecto 16:9 e quiser redimensionar para uma
exibição de relação de aspecto <span style="mso-spacerun: yes">&nbsp;</span>4:3
sem cortar valiosas infos ou ter que exibir barras pretas. (ou vice-versa)</span></p>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Um exemplo de imagem usando o WarpedResize pode
ser achada (agora) em</span> <a href="http://www.trbarry.com/WarpTest.jpg"><cite>www.trbarry.com/WarpTest.jpg</cite></a>.
<span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Esta imagem era de uma curta captura digital HDTV
com resolução de 1280x720, relação de aspecto16:9. Foi reduzida e deformada
a 640x480 e relação de aspecto 4:3 usando o comando de escrito seguinte:</span></p>
<pre>WarpedResize(640,480,1.15,0.95))</pre>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Também, um exemplo de uma captura deformada 4:3
para ajustar em uma tela 16:9 veja</span> <a href="http://www.trbarry.com/WarpTest2.jpg"><cite>www.trbarry.com/WarpTest2.jpg</cite></a></p>
<h3>Atuais limitações, para SimpleResize/WarpedResize</h3>
<p>1) <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Só cores modo YUY2 são suportadas atualmente.
Coloque primeiro um comando ConvertToYuY2 se precisar.</span></p>
<p>2) <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">A largura designada não deve ser mais um múltiplo
de 4 píxeis.</span></p>
<p>3) <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Rodará mais rápido em máquinas SSE2 se a
largura designada for um múltiplo de 8 píxeis e se o dados começa em um
limite de 8 píxeis. Eu não sei se os comandos Clip() anteriores afetam isto ou
não.</span></p>
<p>4) <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Se alguém souber fazer um filtro DirectShow
assim, seguramente gostarei de ter um.</span> ;-)</p>
<h3>Notas aos Matemáticos: (e perguntas)</h3>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Imagine a tela com dimensões de -1.0 a 1.0.
Vamos considerar só a dimensão horizontal para o momento e só a metade
direita da tela. Assuma que queremos calcular o valor de um píxel de produção
em local x onde 0 &lt;= x &lt;=1.</span></p>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">O valor de saída será o valor de fonte da tela
de entrada com as mesmas dimensões, no local s. Agora mesmo eu estou calculando
apenas s = (1-w) * x^3 + w * x onde w é o fator de deformação mencionado
acima (note depois: w = 2 - fator de deformação, para compatibilidade com a
primeira versão). Isto faz o serviço e produz números lisos de 0 a um, sem
muita distorção contanto que w esteja perto de 1.0.</span> </p>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">A mesma fórmula é refletida para a metade
esquerda da tela.</span></p>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">As equações de distorção são projetadas:</span></p>
<p>* <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Sempre está aumentando mas o rendimento é o
resultado de 0 a 1</span></p>
<p>* <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Tenha um primeiro derivado que não vai a 0 ou
infinito, pelo menos perto do centro da tela,</span></p>
<p>* <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Tenha uma curvatura (valor absoluto do 2º
derivado) isso é pequeno no centro e sobe suavemente para as extremidades. Nós
gostaríamos que a curvatura estivesse em todos lugares = 0 quando o fator de
deformação = 1</span></p>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Agora, tão próximo quanto eu posso contar a
curvatura é mais ou menos só o valor absoluto do segundo derivado. Assim se nós
quiséssemos a curvatura pequena quando x = 0 e crescer para as extremidades, o
que poderia ser uma função de deformação útil? A função anterior já
representa uma mudança desde V 0.1 mas ainda não estou tão seguro que é o
melhor.</span> </p>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">É fácil de soltar em outra função de deformação.
E não há nenhuma penalidade de desempenho de qualquer modo porque apenas é
calculado e tabelado no início. Depois disso roda à mesma velocidade de
SimpleResize.</span></p>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Alguém tem uma idéia? (Alguém se importa com
esta parte?)</span></p>
<h3>InterlacedResize e InterlacedWarpedResize</h3>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Se você quer resize uma fonte entrelaçada você
pode usar ao invés:</span></p>
<p><code>InterlacedResize</code> (<var>width, height</var>)</p>
<p><span lang="EN-US" style="font-size:10.0pt;mso-bidi-font-size:
12.0pt;font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:EN-US;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">ou</span></p>
<p><code>InterlacedWarpedResize</code> (<var>width, height, hWarp, vWarp</var>)</p>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Estes têm os mesmos parâmetros como antes mas são
projetados para operar em fontes entrelaçadas, sem dados de mistura de
iguais/diferentes ou desordenando as coordenadas por causa dessa linha de
compensação. Teoricamente estes podem perder uma pequena quantia de detalhe
vertical ou podem confundir um desentrelace subseqüente ou função IVTC mas de
longe, em meu próprio teste, eu não acho que isso seja um problema.</span></p>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Assim se você pretende manter seu vídeo em
forma entrelaçada, certamente use estes. E se você está reduzindo pode achar
que fazendo primeiro o InterlacedResize antes de um passo de desentrelace mais
caro pode lhe dar uma pequena vantagem de desempenho em outro material. Mas isto
ainda é experimental. YMMV.</span>
</p>
<p><kbd>$Date: 2006/03/26 18:11:54 $ Portuguese translation by RoLon</kbd></p>
</body>
</html>
