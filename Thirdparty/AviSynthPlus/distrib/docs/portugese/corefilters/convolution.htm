<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>GeneralConvolution Avisynth Filter</title>
<link rel="stylesheet" type="text/css" href="../../avisynth.css">
</head>
<body>
<h2><a name="Convolution"></a>GeneralConvolution</h2>
<P><code>GeneralConvolution </code>(<var>clip, int &quot;bias&quot;, string &quot;matrix&quot;, float &quot;divisor&quot;, bool &quot;auto&quot;</var>)
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Este filtro executa uma convolução de matriz.</span>
</p>
<table border="1" width="79%">
  <tr>
    <td width="34%"><var>clip</var> </td>
    <td width="66%">RGB32 clip</td>
  </tr>
  <tr>
    <td width="34%"><var>bias</var>  (padrão 0)</td>
    <td width="66%"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">aditivo bias para ajustar a intensidade de saída
      total</span></td>
  </tr>
  <tr>
    <td width="34%"><var>matrix</var>  (padrão &quot;0 0 0 0 1 0 0 0 0&quot;) </td>
    <td width="66%"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">pode ser uma matriz 3x3 ou 5x5 com 9 ou 25 números
      inteiros entre -256 e 256</span></td>
  </tr>
  <tr>
    <td width="34%"> <var>divisor</var>  (padrão 1.0)</td>
    <td width="66%"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">divide a saída da convolução (calculado antes
      de incluir bias)</span></td>
  </tr>
  <tr>
    <td width="34%"><var>auto</var>  (padrão true)</td>
    <td width="66%"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Habilita a auto funcionalidade de escalagem.
      Divide o resultado pela soma dos elementos da matriz. O valor do <i>divisor</i>
      é aplicado além deste auto fator de escala. Se a soma de elementos for
      zero, auto fica desativado</span></td>
  </tr>
</table>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">O <i>divisor</i> normalmente é a soma dos
elementos da matriz. Mas quando a soma for zero, você tem que usar <i>divisor</i>
e a colocação de <var>bias</var> para corrigir os valores do píxel. O <var>bias</var>
pode ser útil se os valores dos píxeis forem negativos devido à convolução.
Depois de somar um <var>bias</var>, os píxeis são reduzidos a zero (e 255 se
eles forem maiores de 255).</span>
</p>
<p>Exemplos:
</p>
<pre># Borrar:

GeneralConvolution(0, &quot;
   10 10 10 10 10
   10 10 10 10 10
   10 10 16 10 10
   10 10 10 10 10
   10 10 10 10 10 &quot;, 256, False)
</pre>
<pre># <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Detecção de extremidade Horizontal (Sobel):</span>

GeneralConvolution(128, &quot;
    1  2  1
    0  0  0
   -1 -2 -1 &quot;, 8)</pre>

<pre># <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Detecção de extremidade Vertical (Sobel):</span>

GeneralConvolution(128, &quot;
   1  0 -1
   2  0 -2
   1  0 -1 &quot;, 8)</pre>

<pre># <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Deslocamento (simplesmente mover a posição</span>
# <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">do &quot;1&quot; para esquerda, direita, para cima, para baixo)</span>

GeneralConvolution(0,&quot;
   0 1 0
   0 0 0
   0 0 0 &quot;)</pre>

<pre># <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Deslocamento de meio píxel acima (auto escala):</span>

GeneralConvolution(0,&quot;
   0 1 0
   0 1 0
   0 0 0 &quot;)</pre>

<pre># <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Deslocamento de meio píxel à direita (escalamento manual):</span>

GeneralConvolution(0,&quot;
   0   0   0
   0 128 128
   0   0   0 &quot;, 256, False)</pre>

<pre># <span lang="EN-US" style="font-size:10.0pt;mso-bidi-font-size:
12.0pt;font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:EN-US;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Filtro de agudez:</span>

GeneralConvolution(0,&quot;
   0   -1   0
  -1    5  -1
   0   -1   0 &quot;, 1, True)

<span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Neste caso, o valor do novo píxel y(m,n) é determinado por</span>
y(m,n) = (-1*x(m-1,n) - 1*x(m,n-1) + 5*x(m,n) - 1*x(m,n+1)
         - 1*x(m+1,n))/(-1-1+5-1-1)/1.0 + 0</pre>

<pre># <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Filtro de borrar levemente com recorte de nível preto e 25% de claro:</span>

GeneralConvolution(-16,&quot;
   0   12   0
  12  256  12
   0   12   0 &quot;, 0.75 ,True)

<span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Neste caso, o valor do novo píxel y(m,n) é determinado por</span>
y(m,n) = ( 12*x(m-1,n) + 12*x(m,n-1) + 256*x(m,n) + 12*x(m,n+1)
         + 12*x(m+1,n) )/(12+12+256+12+12)/0.75 - 16</pre>

<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Alguns outros exemplos podem ser achados</span>&nbsp;<a href="http://www.gamedev.net/reference/programming/features/imageproc/page2.asp"><cite>
aqui</cite></a><cite> </cite>.</p>
<p><b>Mudanças:</b></p>
<table border="1">
  <tbody>
    <tr>
      <td>v2</td>
      <td>Lançamento inicial&nbsp;</td>
    </tr>
    <tr>
      <td>v2.55</td>
      <td>divisor incluído, auto</td>
    </tr>
  </tbody>
</table>
<p><kbd>$Date: 2006/03/26 18:11:19 $ Portuguese translation by RoLon</kbd></p>
<FORM>
<INPUT TYPE="Button" VALUE="Back"
onClick="history.go(-1)">
</form>
</body>
</html>
